<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Avatar Generator</title>
<style>
body {
    margin: 0;
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background: #f9fafb;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 40px 20px;
    color: #1a202c;
}

h1 {
    font-size: 2.2rem;
    margin-bottom: 20px;
    text-align: center;
}

/* Top five avatar placeholders */
.random-avatars {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 20px;
    margin-bottom: 40px;
}

.random-avatars img {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    border: 2px solid #e2e8f0;
    box-shadow: 0 4px 15px rgba(0,0,0,0.08);
    object-fit: cover;
    background: #fff; /* placeholder */
}

/* Main interactive iframe */
.avatar-iframe-wrapper {
    width: 100%;
    max-width: 500px;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 10px 25px rgba(0,0,0,0.08);
    margin-bottom: 20px;
}

.avatar-iframe-wrapper iframe {
    width: 100%;
    height: 700px;
    border: none;
}

@media (max-width: 600px) {
    .random-avatars img {
        width: 90px;
        height: 90px;
    }
    .avatar-iframe-wrapper {
        max-width: 100%;
    }
}
</style>
</head>
<body>

<h1>Avatar Generator</h1>

<!-- Top 5 placeholders -->
<div class="random-avatars" id="top-avatars">
    <img src="" alt="Avatar 1">
    <img src="" alt="Avatar 2">
    <img src="" alt="Avatar 3">
    <img src="" alt="Avatar 4">
    <img src="" alt="Avatar 5">
</div>

<!-- Main interactive Flask app -->
<div class="avatar-iframe-wrapper">
    <iframe src="https://pyshine.pythonanywhere.com/" title="Avatar Generator" id="main-avatar"></iframe>
</div>

<script>
// Top avatars container
const topAvatars = document.querySelectorAll("#top-avatars img");
let currentIndex = 0;

// Function to copy current avatar from iframe
function addTopAvatar() {
    const iframe = document.getElementById("main-avatar");
    try {
        // Create a canvas and draw iframe contents
        // Since cross-origin iframe, we can't access the DOM, so instead we copy the current img src
        const imgInIframe = iframe.contentWindow.document.getElementById("avatar-img");
        if(imgInIframe) {
            topAvatars[currentIndex].src = imgInIframe.src;
            currentIndex = (currentIndex + 1) % topAvatars.length;
        } else {
            alert("Select or generate an avatar in the app first.");
        }
    } catch(e) {
        // Cross-origin block: can't access iframe DOM
        alert("Due to cross-origin restrictions, top avatars can only be updated after clicking download button in the main app.");
    }
}

// Add click listener to iframe wrapper for user to manually copy current avatar
document.getElementById("main-avatar").addEventListener("load", () => {
    // Inform user to click download to update top avatars
    console.log("Use the download button in the app to update top avatars.");
});
</script>

</body>
</html>
