<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Online Image Resizer</title>

<style>
:root{
  --brand:#6cb9ff;
  --brand-dark:#3c54c5;
  --radius:12px;
  --shadow:0 4px 12px rgba(0,0,0,.15);
}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:linear-gradient(135deg,#dce9ff,#f3f8ff);
}
header{
  background:var(--brand);
  color:#fff;
  padding:20px;
  text-align:center;
}
main{
  max-width:650px;
  margin:30px auto;
  background:#ffffffdd;
  padding:25px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}
label{
  font-weight:bold;
  display:block;
  margin-top:15px;
}
input,select,button{
  width:100%;
  padding:12px;
  margin-top:8px;
  font-size:16px;
  border-radius:var(--radius);
  border:1px solid #ccc;
}
button{
  background:var(--brand);
  color:#fff;
  font-weight:bold;
  border:none;
  cursor:pointer;
}
button:hover{background:var(--brand-dark);}
.box{
  background:#eef4ff;
  padding:12px;
  margin-top:15px;
  border-radius:var(--radius);
}
img{
  max-width:100%;
  display:block;
  margin-top:10px;
  border-radius:var(--radius);
  box-shadow:var(--shadow);
}
.checkbox-row{
  display:flex;
  align-items:center;
  gap:10px;
  margin-top:12px;
  font-weight:bold;
}
.checkbox-row input{
  width:auto;
  margin:0;
  transform:scale(1.2);
}
.size-info{
  margin-top:8px;
  font-size:14px;
  color:#333;
}
footer{
  text-align:center;
  padding:15px;
  font-size:14px;
  color:#555;
}
</style>
</head>

<body>

<header>
  <h1>Online Image Resizer</h1>
  <p>Resize PNG, JPG, WEBP & more – mobile friendly</p>
</header>

<main>

<label>Upload Image</label>
<input type="file" id="imageUpload" accept="image/*">

<div id="info" class="box" style="display:none;">
  <div><strong>Resolution:</strong> <span id="originalResolution"></span></div>
  <div class="size-info"><strong>File Size:</strong> <span id="originalSize"></span></div>
</div>

<div id="previewBox" class="box" style="display:none;">
  <strong>Preview</strong>
  <img id="previewImage">
</div>

<label>New Width (px)</label>
<input type="number" id="resizeWidth">

<label>New Height (px)</label>
<input type="number" id="resizeHeight">

<div class="checkbox-row">
  <input type="checkbox" id="lockRatio" checked>
  <label for="lockRatio">Lock aspect ratio</label>
</div>

<label>Output Format</label>
<select id="format">
  <option value="image/png">PNG</option>
  <option value="image/jpeg">JPEG</option>
  <option value="image/webp">WEBP</option>
</select>

<label>JPEG / WEBP Quality (0.1 – 1.0)</label>
<input type="number" id="quality" value="1.0" step="0.05" min="0.1" max="1">

<div class="box">
  <strong>Estimated Output Size:</strong>
  <div id="outputSize">—</div>
</div>

<button id="resizeBtn">Resize & Download</button>

<p style="text-align:center;font-size:14px;color:#666;margin-top:10px">
Mobile: image opens → long-press → Save Image
</p>

</main>

<footer>
© <span id="year"></span> Image Resizer • <a href="https://pyshine.com" target="_blank">Pyshine</a>
</footer>

<script>
document.getElementById("year").textContent=new Date().getFullYear();

const upload=document.getElementById("imageUpload");
const preview=document.getElementById("previewImage");
const info=document.getElementById("info");
const resText=document.getElementById("originalResolution");
const sizeText=document.getElementById("originalSize");
const outSize=document.getElementById("outputSize");

const wInput=document.getElementById("resizeWidth");
const hInput=document.getElementById("resizeHeight");
const lock=document.getElementById("lockRatio");
const format=document.getElementById("format");
const quality=document.getElementById("quality");

const canvas=document.createElement("canvas");
const ctx=canvas.getContext("2d");

let img=new Image();
let ratio=1;

function formatBytes(bytes){
  if(bytes<1024) return bytes+" B";
  if(bytes<1048576) return (bytes/1024).toFixed(1)+" KB";
  return (bytes/1048576).toFixed(2)+" MB";
}

function estimateOutputSize(){
  if(!img.src) return;
  const w=parseInt(wInput.value);
  const h=parseInt(hInput.value);
  if(!w||!h) return;

  canvas.width=w;
  canvas.height=h;
  ctx.drawImage(img,0,0,w,h);

  canvas.toBlob(blob=>{
    outSize.textContent=formatBytes(blob.size);
  },format.value,parseFloat(quality.value)||1);
}

upload.onchange=e=>{
  const file=e.target.files[0];
  if(!file) return;

  sizeText.textContent=formatBytes(file.size);

  const reader=new FileReader();
  reader.onload=()=>{
    img.onload=()=>{
      ratio=img.width/img.height;
      resText.textContent=`${img.width} × ${img.height}`;
      wInput.value=img.width;
      hInput.value=img.height;
      preview.src=reader.result;
      info.style.display="block";
      preview.parentElement.style.display="block";
      estimateOutputSize();
    };
    img.src=reader.result;
  };
  reader.readAsDataURL(file);
};

wInput.oninput=()=>{
  if(lock.checked) hInput.value=Math.round(wInput.value/ratio);
  estimateOutputSize();
};
hInput.oninput=()=>{
  if(lock.checked) wInput.value=Math.round(hInput.value*ratio);
  estimateOutputSize();
};

format.onchange=estimateOutputSize;
quality.oninput=estimateOutputSize;

document.getElementById("resizeBtn").onclick=()=>{
  estimateOutputSize();

  canvas.toBlob(blob=>{
    const url=URL.createObjectURL(blob);
    const a=document.createElement("a");
    a.href=url;
    a.download=`resized-image.${format.value.split("/")[1]}`;
    document.body.appendChild(a);
    a.click();
    setTimeout(()=>window.open(url,"_blank"),200);
    setTimeout(()=>URL.revokeObjectURL(url),5000);
  },format.value,parseFloat(quality.value)||1);
};
</script>

</body>
</html>
