

  <!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/Article">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Pinterest & Google verification -->
  <meta name="p:domain_verify" content="fb68a8459fe32b8b072bcd5cc620d125"/>
  <meta name="google-site-verification" content="WAkFPi5cvufClnQetgIl0STmvvwHhVf8jfyENFWhsxU" />
  <meta name="google-site-verification" content="g2pFZlv-92XQD67BPgiVHsvZ4TZH13Ucvmmvvv36kU4" />

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>How to send audio data using socket programming in Python | PyShine</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="How to send audio data using socket programming in Python" />
<meta name="author" content="PyShine Team" />
<meta property="og:locale" content="en" />
<meta name="description" content="This tutorial is about using PyAudio and TCP sockets for server-client transfer of audio stream" />
<meta property="og:description" content="This tutorial is about using PyAudio and TCP sockets for server-client transfer of audio stream" />
<link rel="canonical" href="https://www.pyshine.com/How-to-send-audio-from-PyAudio-over-socket/" />
<meta property="og:url" content="https://www.pyshine.com/How-to-send-audio-from-PyAudio-over-socket/" />
<meta property="og:site_name" content="PyShine" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-02-24T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How to send audio data using socket programming in Python" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"PyShine Team"},"dateModified":"2021-02-24T00:00:00+00:00","datePublished":"2021-02-24T00:00:00+00:00","description":"This tutorial is about using PyAudio and TCP sockets for server-client transfer of audio stream","headline":"How to send audio data using socket programming in Python","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.pyshine.com/How-to-send-audio-from-PyAudio-over-socket/"},"name":"{{ page.title escape }}","url":"https://www.pyshine.com/How-to-send-audio-from-PyAudio-over-socket/"}</script>
<!-- End Jekyll SEO tag -->
  <!-- This will generate the canonical link automatically -->

  <script src="https://analytics.ahrefs.com/analytics.js" data-key="Im0K82YsmEDy08+6wyUIZA" async></script>

  <!-- Favicon & App Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icons/apple-touch-icon.png?v=qA3OXqyw77">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/icons/favicon-32x32.png?v=qA3OXqyw77">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/icons/favicon-16x16.png?v=qA3OXqyw77">
  <link rel="manifest" href="/assets/img/icons/manifest.json?v=qA3OXqyw77">
  <link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg?v=qA3OXqyw77" color="#5bbad5">
  <link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77">
  <!--[if IE]><link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77"><![endif]-->

  <!-- App & Theme Info -->
  <meta name="apple-mobile-web-app-title" content="Sleek">
  <meta name="application-name" content="Sleek">
  <meta name="msapplication-config" content="/assets/img/icons/browserconfig.xml?v=qA3OXqyw77">
  <meta name="theme-color" content="#ffffff">

  
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-TCVFBKF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GTM-TCVFBKF');
</script>

  

  <!-- Critical CSS Inline -->
  <style class="inlineCSS">
    h1{color:#313237;margin-top:0;margin-bottom:.5rem}.dark-bg{background-color:#19d319}@media (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:last-of-type,.post-card:nth-child(2n+2){margin-right:0}}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figure,main{display:block}figure{margin:1em 40px}a{background-color:transparent;-webkit-text-decoration-skip:objects}img{border-style:none}svg:not(:root){overflow:hidden}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}body{-webkit-overflow-scrolling:touch}*,::after,::before{-webkit-box-sizing:inherit;box-sizing:inherit}.site{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.site__content{-webkit-box-flex:1;-ms-flex:1;flex:1}img{max-width:100%;height:auto;width:auto;vertical-align:middle}figure{margin:0}body{background-color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Hiragino Sans GB","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;font-size:1rem;line-height:1.5;color:#343851;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%}p{margin-top:0;margin-bottom:1.25rem}h1,h2{color:#313237;margin-top:0;margin-bottom:.5rem}a{color:#277cea;text-decoration:none;border-bottom:1px dashed #277cea}.blur{background:#fff;filter:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"><filter id="filter"><feGaussianBlur stdDeviation="16" /></filter></svg>#filter');-webkit-filter:blur(1rem);filter:blur(1rem)}.container{padding:0 20px}@media (min-width:0){.container{max-width:auto;margin:0 auto}}@media (min-width:36em){.container{max-width:540px;margin:0 auto}}@media (min-width:48em){.container{max-width:720px;margin:0 auto}}@media (min-width:62em){.container{max-width:960px;margin:0 auto}}@media (min-width:75em){.container{max-width:1170px;margin:0 auto}}.header{background-color:#fff;color:#343851;position:absolute;z-index:4;width:100%;top:0;left:0;will-change:transform;-webkit-transform:translateY(0);transform:translateY(0)}.header a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:0}.header__logo{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;overflow:hidden;padding:19px 0;margin-right:1.25rem;outline:0;border-bottom:0;color:#313237}.header__logo .header__logo--container{width:58px}.header__logo .header__logo--container .logo{fill:currentColor}.header__inner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3.75em;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header__links{padding-bottom:.5rem;display:none;position:absolute;top:3.75em;left:0;width:100%;height:auto;background:#fff}.header__link{color:#343851;padding:.938rem 0;border-top:1px solid #ededed}.header__toggle{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:44px;height:100%;background-color:transparent;padding-left:1.25rem}.header__toggle span{display:block;position:relative;margin-top:4px;background-color:#343851;width:100%;height:2px;border-radius:1px}.header__toggle span:first-child{margin-top:0}@media (min-width:62em){.header__toggle{display:none;visibility:hidden}.header__links{position:static;padding:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;visibility:visible;width:auto;height:100%}.header__links-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;padding:0}.header__link{position:relative;padding:.938rem 1rem;border:0;height:100%}.header__link::after{content:"";display:block;position:absolute;left:0;bottom:0;height:3px;width:100%;-webkit-transform:scaleX(0);transform:scaleX(0);background:#277cea}}.post-card{display:block;position:relative;width:100%;min-height:250px;border-radius:4px;overflow:hidden;background-color:#fff;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.08);box-shadow:0 1px 3px rgba(0,0,0,.08);margin-bottom:2.25rem;border-bottom:0}@media (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:0}}@media (min-width:75em){.post-card{width:31.25%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:3.125%}}.post-card__label{position:absolute;top:1.5rem;left:1.5rem;z-index:2}.post-card__thumb{margin:0;background:#fff;position:relative;overflow:hidden}.post-card__thumb::after{content:"";display:block;height:0;width:100%;padding-bottom:56.25%}.post-card__thumb>*{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.post-card__inner{padding:1.875rem 1.25rem .625rem;color:#838c8d}.post-card__header{margin-bottom:.75rem}.post-card__header .post-card__meta{font-size:.875rem}.label{padding:0 10px;margin-bottom:1rem;display:inline-block;line-height:20px;font-size:.75rem;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.8);border:2px solid rgba(255,255,255,.5);border-radius:100px}.hero{margin:3.75rem auto 0;min-height:16.25rem;width:100%;position:relative;background-color:#dde5ea;background-repeat:no-repeat;background-position:50%;background-size:cover}@media (min-width:62em){.hero{margin:0 auto;height:36em}}.hero::before{position:absolute;display:block;content:"";top:0;left:0;width:100%;height:100%;background:rgba(52,56,81,.8)}.hero__wrap{position:absolute;margin:auto;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;color:rgba(255,255,255,.8);width:100%;max-width:90%;z-index:1}.hero__wrap .hero__title{font-size:1.8em;color:#fff}.blog{background-color:#f9f9f9}.post-list{padding-top:2.5em;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}@media (min-width:48em){.hero__wrap{max-width:40em}.hero__wrap .hero__title{padding:1rem 0;font-size:2.625em;line-height:3.125rem}.post-list{padding-top:5em}}
  </style>

  <!-- Main CSS -->
  <link rel="preload" href="/assets/css/main.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/css/main.css"></noscript>

  <script type="text/javascript">
    /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
(function(w){"use strict";if(!w.loadCSS){w.loadCSS=function(){}}
var rp=loadCSS.relpreload={};rp.support=(function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload")}catch(e){ret=!1}
return function(){return ret}})();rp.bindMediaToggle=function(link){var finalMedia=link.media||"all";function enableStylesheet(){link.media=finalMedia}
if(link.addEventListener){link.addEventListener("load",enableStylesheet)}else if(link.attachEvent){link.attachEvent("onload",enableStylesheet)}
setTimeout(function(){link.rel="stylesheet";link.media="only x"});setTimeout(enableStylesheet,3000)};rp.poly=function(){if(rp.support()){return}
var links=w.document.getElementsByTagName("link");for(var i=0;i<links.length;i++){var link=links[i];if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){link.setAttribute("data-loadcss",!0);rp.bindMediaToggle(link)}}};if(!rp.support()){rp.poly();var run=w.setInterval(rp.poly,500);if(w.addEventListener){w.addEventListener("load",function(){rp.poly();w.clearInterval(run)})}else if(w.attachEvent){w.attachEvent("onload",function(){rp.poly();w.clearInterval(run)})}}
if(typeof exports!=="undefined"){exports.loadCSS=loadCSS}
else{w.loadCSS=loadCSS}}(typeof global!=="undefined"?global:this))

  </script>

  <!-- MathJax -->
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>


  <body class="site" itemscope itemtype="https://schema.org/WebPage">

    
      <!-- Google Tag Manager (noscript) -->
      <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TCVFBKF"
                height="0" width="0" style="display:none;visibility:hidden"></iframe>
      </noscript>
      <!-- End Google Tag Manager -->
    

    <header class="header" itemscope itemtype="http://schema.org/SiteNavigationElement" aria-label="Main navigation">
  <div class="container">
    <div class="header__inner">

      <!-- Logo -->
      <a class="header__logo" href="/">
        <div class="header__logo--container">
          <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<g>
	<path d="M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"></path>

	
	
</g>
</svg>

        </div>
      </a>

      <!-- Navigation Links -->
      <nav class="header__links">
        <div class="container header__links-wrapper">

          
            
              <a class="header__link"
                 href="/"
                 itemprop="url">
                <span itemprop="name">Home</span>
              </a>
            
          
            
              <a class="header__link"
                 href="/categories"
                 itemprop="url">
                <span itemprop="name">Posts</span>
              </a>
            
          
            

              <!-- DROPDOWN -->
              <div class="header__dropdown" itemprop="url">
                <a class="header__link header__dropdown-toggle" href="javascript:void(0)">
                  <span itemprop="name">Applications</span>
                </a>

                <div class="header__dropdown-menu">
                  
                    <a class="header__dropdown-item"
                       href="/photo"
                       itemprop="url">
                      <span itemprop="name">Online Passport Photo 20KB</span>
                    </a>
                  
                    <a class="header__dropdown-item"
                       href="/finger.html"
                       itemprop="url">
                      <span itemprop="name">Online Fingers Scanner</span>
                    </a>
                  
                    <a class="header__dropdown-item"
                       href="/avatars"
                       itemprop="url">
                      <span itemprop="name">Online Make Avatars</span>
                    </a>
                  
                    <a class="header__dropdown-item"
                       href="/kanban/debounce.html"
                       itemprop="url">
                      <span itemprop="name">Online Reminder App</span>
                    </a>
                  
                    <a class="header__dropdown-item"
                       href="/converter.html"
                       itemprop="url">
                      <span itemprop="name">Online PNG Converter</span>
                    </a>
                  
                </div>
              </div>

            
          
            
              <a class="header__link"
                 href="/about"
                 itemprop="url">
                <span itemprop="name">About</span>
              </a>
            
          
            
              <a class="header__link"
                 href="/contact"
                 itemprop="url">
                <span itemprop="name">Contact</span>
              </a>
            
          
            
              <a class="header__link"
                 href="/privacy"
                 itemprop="url">
                <span itemprop="name">Privacy Policy</span>
              </a>
            
          
            
              <a class="header__link"
                 href="/disclaimer"
                 itemprop="url">
                <span itemprop="name">Disclaimer</span>
              </a>
            
          

        </div>
      </nav>

      <!-- Language Switcher -->
      

      <!-- Mobile Menu Toggle -->
      <div class="header__toggle">
        <span></span><span></span><span></span>
      </div>

    </div>
  </div>

<style>
/* ===============================
   BASE NAV ALIGNMENT
=============================== */
.header__links-wrapper{
  display:flex;
  align-items:center;
  gap:1.4rem;
}

/* ===============================
   DROPDOWN (STABLE)
=============================== */
.header__dropdown{
  position:relative;
  display:inline-flex;
  align-items:center;
}

/* invisible hover bridge */
.header__dropdown::after{
  content:"";
  position:absolute;
  top:100%;
  left:0;
  width:100%;
  height:12px;
}

/* Toggle */
.header__dropdown-toggle{
  display:inline-flex;
  align-items:center;
}

.header__dropdown-toggle::after{
  content:" ▾";
  font-size:.7em;
  opacity:.8;
}

/* Menu */
.header__dropdown-menu{
  position:absolute;
  top:100%;
  left:0;
  min-width:220px;
  background:#121212;
  border:1px solid #333;
  border-radius:10px;
  padding:6px 0;
  display:none;
  z-index:9999;
}

/* SHOW when hovering parent OR menu */
.header__dropdown:hover .header__dropdown-menu,
.header__dropdown-menu:hover{
  display:block;
}

.header__dropdown-item{
  display:block;
  padding:10px 16px;
  font-size:14px;
  color:#eaeaea;
  text-decoration:none;
}

.header__dropdown-item:hover{
  background:#1f1f1f;
}

/* ===============================
   MOBILE
=============================== */
@media (max-width:768px){
  .header__dropdown-menu{
    position:static;
    border:none;
    background:transparent;
    padding-left:12px;
  }
}

/* ===============================
   LANGUAGE SWITCHER
=============================== */
.header__lang-switcher{
  display:inline-flex;
  gap:.5rem;
  align-items:center;
  font-size:1.3rem;
  margin-left:1rem;
}
.lang-flag.disabled{ opacity:.5; filter:grayscale(100%) }
.lang-flag.active{ text-decoration:underline }
</style>

</header>


    
      <div class="hero lazyload"
           data-bg="https://www.pyshine.com/assets/img/posts/matthiasgroeneveld.jpg"
           role="img"
           aria-label="How to send audio data using socket programming in Python">
    
        <div class="hero__wrap">

          
            <div class="hero__categories">
              
                <a class="label"
                   href="/categories/#Socket Programming Series"
                   aria-label="Category: Socket Programming Series">
                   Socket Programming Series
                </a>
                
              
            </div>
          

          <h1 class="hero__title" itemprop="headline">How to send audio data using socket programming in Python</h1>

          <p class="hero__meta">
            <time datetime="2021-02-24T00:00:00+00:00" itemprop="datePublished">
              24 Feb 2021
            </time>
            &nbsp;·&nbsp;
            
            <span itemprop="timeRequired">
              
                19 mins read
              
            </span>
          </p>
        </div>
      </div>

    <main class="site__content" role="main">
      <div class="container post-layout">

        <!-- SIDEBAR TOC -->
        <aside class="post-toc" id="post-toc">
          <h3 class="no-toc">Contents</h3>
          <nav id="toc-list"></nav>
        </aside>

        <!-- MAIN CONTENT -->
        <article class="post-content"
                 itemprop="articleBody"
                 itemscope itemtype="https://schema.org/Article">

          <!-- INLINE TOC -->
          <div id="inline-toc" class="inline-toc-box">
            <h3 class="no-toc">Contents</h3>
            <nav id="inline-toc-list"></nav>
          </div>

          <p>Hi! Let’s say we have an audio file (.wav), and we want to send it to the client so that the client can listen
the stream as a playback in real-time. For this purpose we require PyAudio and socket programming. PyAudio enriches
Python bindings for PortAudio, the cross-platform audio I/O library. We will first make codes for the TCP and then go on with the UDP. But before that, please
install PyAudio. If you can’t install it using pip installer, then please go this <a href="https://www.lfd.uci.edu/~gohlke/pythonlibs/#pyaudio">link</a> and download the <code class="language-plaintext highlighter-rouge">.whl</code> according to your Python version. For instance if you are
using Python 3.6 then you need to download this <code class="language-plaintext highlighter-rouge">PyAudio‑0.2.11‑cp36‑cp36m‑win_amd64.whl</code>. After that go to the location of this download
and open up the power shell or terminal and use the command below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pip3.6 install PyAudio‑0.2.11‑cp36‑cp36m‑win_amd64.whl
</code></pre></div></div>

<p>The audio data normally consists of 2 channels, which means the data array will be of shape (CHUNK,2), where CHUNK is
the number of data samples representing the digital sound. We commonly put CHUNK as 1024. Below are the TCP based
server client codes to provide these data CHUNKS from a server to a client. For more details on socket programming
please visit our previous tutorials.</p>

<p>Here is the server side code, we assume that you already have wave (.wav) audio file in the same directory as this 
server.py file. Please run the server.py at one computer and accordingly provide your host_ip to it.</p>

<h1 id="tcp-socket-version">TCP SOCKET VERSION</h1>

<h2 id="serverpy">server.py</h2>
<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## This is server code to send video and audio frames over TCP
</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">threading</span><span class="p">,</span> <span class="n">wave</span><span class="p">,</span> <span class="n">pyaudio</span><span class="p">,</span><span class="n">pickle</span><span class="p">,</span><span class="n">struct</span>

<span class="n">host_name</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">gethostname</span><span class="p">()</span>
<span class="n">host_ip</span> <span class="o">=</span> <span class="s">'192.168.1.102'</span><span class="c1">#  socket.gethostbyname(host_name)
</span><span class="k">print</span><span class="p">(</span><span class="n">host_ip</span><span class="p">)</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">9611</span>

<span class="k">def</span> <span class="nf">audio_stream</span><span class="p">():</span>
    <span class="n">server_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">()</span>
    <span class="n">server_socket</span><span class="p">.</span><span class="n">bind</span><span class="p">((</span><span class="n">host_ip</span><span class="p">,</span> <span class="p">(</span><span class="n">port</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>

    <span class="n">server_socket</span><span class="p">.</span><span class="n">listen</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">CHUNK</span> <span class="o">=</span> <span class="mi">1024</span>
    <span class="n">wf</span> <span class="o">=</span> <span class="n">wave</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="s">"temp.wav"</span><span class="p">,</span> <span class="s">'rb'</span><span class="p">)</span>
    
    <span class="n">p</span> <span class="o">=</span> <span class="n">pyaudio</span><span class="p">.</span><span class="n">PyAudio</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'server listening at'</span><span class="p">,(</span><span class="n">host_ip</span><span class="p">,</span> <span class="p">(</span><span class="n">port</span><span class="o">-</span><span class="mi">1</span><span class="p">)))</span>
   
    
    <span class="n">stream</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">get_format_from_width</span><span class="p">(</span><span class="n">wf</span><span class="p">.</span><span class="n">getsampwidth</span><span class="p">()),</span>
                    <span class="n">channels</span><span class="o">=</span><span class="n">wf</span><span class="p">.</span><span class="n">getnchannels</span><span class="p">(),</span>
                    <span class="n">rate</span><span class="o">=</span><span class="n">wf</span><span class="p">.</span><span class="n">getframerate</span><span class="p">(),</span>
                    <span class="nb">input</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                    <span class="n">frames_per_buffer</span><span class="o">=</span><span class="n">CHUNK</span><span class="p">)</span>

             

    <span class="n">client_socket</span><span class="p">,</span><span class="n">addr</span> <span class="o">=</span> <span class="n">server_socket</span><span class="p">.</span><span class="n">accept</span><span class="p">()</span>
 
    <span class="n">data</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">client_socket</span><span class="p">:</span>
            <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
              
                <span class="n">data</span> <span class="o">=</span> <span class="n">wf</span><span class="p">.</span><span class="n">readframes</span><span class="p">(</span><span class="n">CHUNK</span><span class="p">)</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">pickle</span><span class="p">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">message</span> <span class="o">=</span> <span class="n">struct</span><span class="p">.</span><span class="n">pack</span><span class="p">(</span><span class="s">"Q"</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">))</span><span class="o">+</span><span class="n">a</span>
                <span class="n">client_socket</span><span class="p">.</span><span class="n">sendall</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
                
<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">audio_stream</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
<span class="n">t1</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

</code></pre></div></div>

<p>Usage:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python server.py
</code></pre></div></div>

<p>On the same or second computer please run the code below as:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python client.py
</code></pre></div></div>

<h2 id="clientpy">client.py</h2>
<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Welcome to PyShine
## This is client code to receive video and audio frames over TCP
</span>
<span class="kn">import</span> <span class="nn">socket</span><span class="p">,</span><span class="n">os</span>
<span class="kn">import</span> <span class="nn">threading</span><span class="p">,</span> <span class="n">wave</span><span class="p">,</span> <span class="n">pyaudio</span><span class="p">,</span> <span class="n">pickle</span><span class="p">,</span><span class="n">struct</span>
<span class="n">host_name</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">gethostname</span><span class="p">()</span>
<span class="n">host_ip</span> <span class="o">=</span> <span class="s">'192.168.1.102'</span><span class="c1">#  socket.gethostbyname(host_name)
</span><span class="k">print</span><span class="p">(</span><span class="n">host_ip</span><span class="p">)</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">9611</span>
<span class="k">def</span> <span class="nf">audio_stream</span><span class="p">():</span>
	
	<span class="n">p</span> <span class="o">=</span> <span class="n">pyaudio</span><span class="p">.</span><span class="n">PyAudio</span><span class="p">()</span>
	<span class="n">CHUNK</span> <span class="o">=</span> <span class="mi">1024</span>
	<span class="n">stream</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">get_format_from_width</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
					<span class="n">channels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
					<span class="n">rate</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
					<span class="n">output</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
					<span class="n">frames_per_buffer</span><span class="o">=</span><span class="n">CHUNK</span><span class="p">)</span>
					
<span class="c1">### create socket
</span>	<span class="n">client_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_INET</span><span class="p">,</span><span class="n">socket</span><span class="p">.</span><span class="n">SOCK_STREAM</span><span class="p">)</span>
	<span class="n">socket_address</span> <span class="o">=</span> <span class="p">(</span><span class="n">host_ip</span><span class="p">,</span><span class="n">port</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'server listening at'</span><span class="p">,</span><span class="n">socket_address</span><span class="p">)</span>
	<span class="n">client_socket</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="n">socket_address</span><span class="p">)</span> 
	<span class="k">print</span><span class="p">(</span><span class="s">"CLIENT CONNECTED TO"</span><span class="p">,</span><span class="n">socket_address</span><span class="p">)</span>
	<span class="n">data</span> <span class="o">=</span> <span class="sa">b</span><span class="s">""</span>
	<span class="n">payload_size</span> <span class="o">=</span> <span class="n">struct</span><span class="p">.</span><span class="n">calcsize</span><span class="p">(</span><span class="s">"Q"</span><span class="p">)</span>
	<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">payload_size</span><span class="p">:</span>
				<span class="n">packet</span> <span class="o">=</span> <span class="n">client_socket</span><span class="p">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="mi">1024</span><span class="p">)</span> <span class="c1"># 4K
</span>				<span class="k">if</span> <span class="ow">not</span> <span class="n">packet</span><span class="p">:</span> <span class="k">break</span>
				<span class="n">data</span><span class="o">+=</span><span class="n">packet</span>
			<span class="n">packed_msg_size</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="n">payload_size</span><span class="p">]</span>
			<span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">payload_size</span><span class="p">:]</span>
			<span class="n">msg_size</span> <span class="o">=</span> <span class="n">struct</span><span class="p">.</span><span class="n">unpack</span><span class="p">(</span><span class="s">"Q"</span><span class="p">,</span><span class="n">packed_msg_size</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
			<span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">msg_size</span><span class="p">:</span>
				<span class="n">data</span> <span class="o">+=</span> <span class="n">client_socket</span><span class="p">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="mi">1024</span><span class="p">)</span>
			<span class="n">frame_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="n">msg_size</span><span class="p">]</span>
			<span class="n">data</span>  <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">msg_size</span><span class="p">:]</span>
			<span class="n">frame</span> <span class="o">=</span> <span class="n">pickle</span><span class="p">.</span><span class="n">loads</span><span class="p">(</span><span class="n">frame_data</span><span class="p">)</span>
			<span class="n">stream</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

		<span class="k">except</span><span class="p">:</span>
			
			<span class="k">break</span>

	<span class="n">client_socket</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'Audio closed'</span><span class="p">)</span>
	<span class="n">os</span><span class="p">.</span><span class="n">_exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
	
<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">audio_stream</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
<span class="n">t1</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>


</code></pre></div></div>

<p>If everything goes well you will listen the good quality sound at the client side.</p>

<h2 id="udp-socket-version">UDP SOCKET VERSION</h2>

<p>Alright, lets do the same things as above but this time using UDP socket. The process of reading audio data should be streamed smoothly, in case of UDP. The <code class="language-plaintext highlighter-rouge">wf.readframes(CHUNK)</code> returns at most CHUNK frames of audio, as a bytes object. These bytes are then sent to the client address using <code class="language-plaintext highlighter-rouge">server_socket.sendto(data,client_addr)</code>. If we don’t put enough wait, the receiver will overload and the reliability that all samples are properly sent, will be highly compromised and could even result in no sound or exceptin raised. We need to put a wait using <code class="language-plaintext highlighter-rouge">time.sleep()</code>, before sending the next CHUNK of audio data. Since we know that the sample rate of audio is 44100 samples per second, so it means that the time for one sample to send is <code class="language-plaintext highlighter-rouge">1/sample_rate</code> . In this context, all the samples in a CHUNK would require a time of <code class="language-plaintext highlighter-rouge">CHUNK/sample_rate</code>. Therefore, after sending a CHUNK we will put a <code class="language-plaintext highlighter-rouge">time.sleep(CHUNK/sample_rate)</code>. Here is the server side code:</p>

<h3 id="serverpy-1">server.py</h3>
<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c1">## This is server code to send video and audio frames over UDP
</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">threading</span><span class="p">,</span> <span class="n">wave</span><span class="p">,</span> <span class="n">pyaudio</span><span class="p">,</span> <span class="n">time</span>

<span class="n">host_name</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">gethostname</span><span class="p">()</span>
<span class="n">host_ip</span> <span class="o">=</span> <span class="s">'192.168.1.102'</span><span class="c1">#  socket.gethostbyname(host_name)
</span><span class="k">print</span><span class="p">(</span><span class="n">host_ip</span><span class="p">)</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">9633</span>
<span class="c1">## For details visit: www.pyshine.com
</span>
<span class="k">def</span> <span class="nf">audio_stream_UDP</span><span class="p">():</span>

    <span class="n">BUFF_SIZE</span> <span class="o">=</span> <span class="mi">65536</span>
    <span class="n">server_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_INET</span><span class="p">,</span><span class="n">socket</span><span class="p">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
    <span class="n">server_socket</span><span class="p">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span><span class="n">socket</span><span class="p">.</span><span class="n">SO_RCVBUF</span><span class="p">,</span><span class="n">BUFF_SIZE</span><span class="p">)</span>

    <span class="n">server_socket</span><span class="p">.</span><span class="n">bind</span><span class="p">((</span><span class="n">host_ip</span><span class="p">,</span> <span class="p">(</span><span class="n">port</span><span class="p">)))</span>
    <span class="n">CHUNK</span> <span class="o">=</span> <span class="mi">10</span><span class="o">*</span><span class="mi">1024</span>
    <span class="n">wf</span> <span class="o">=</span> <span class="n">wave</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="s">"temp.wav"</span><span class="p">)</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">pyaudio</span><span class="p">.</span><span class="n">PyAudio</span><span class="p">()</span>
    <span class="k">print</span><span class="p">(</span><span class="s">'server listening at'</span><span class="p">,(</span><span class="n">host_ip</span><span class="p">,</span> <span class="p">(</span><span class="n">port</span><span class="p">)),</span><span class="n">wf</span><span class="p">.</span><span class="n">getframerate</span><span class="p">())</span>
    <span class="n">stream</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">get_format_from_width</span><span class="p">(</span><span class="n">wf</span><span class="p">.</span><span class="n">getsampwidth</span><span class="p">()),</span>
                    <span class="n">channels</span><span class="o">=</span><span class="n">wf</span><span class="p">.</span><span class="n">getnchannels</span><span class="p">(),</span>
                    <span class="n">rate</span><span class="o">=</span><span class="n">wf</span><span class="p">.</span><span class="n">getframerate</span><span class="p">(),</span>
                    <span class="nb">input</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
                    <span class="n">frames_per_buffer</span><span class="o">=</span><span class="n">CHUNK</span><span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="n">sample_rate</span> <span class="o">=</span> <span class="n">wf</span><span class="p">.</span><span class="n">getframerate</span><span class="p">()</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">msg</span><span class="p">,</span><span class="n">client_addr</span> <span class="o">=</span> <span class="n">server_socket</span><span class="p">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="n">BUFF_SIZE</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'GOT connection from '</span><span class="p">,</span><span class="n">client_addr</span><span class="p">,</span><span class="n">msg</span><span class="p">)</span>
        
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">wf</span><span class="p">.</span><span class="n">readframes</span><span class="p">(</span><span class="n">CHUNK</span><span class="p">)</span>
            <span class="n">server_socket</span><span class="p">.</span><span class="n">sendto</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">client_addr</span><span class="p">)</span>
            <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.8</span><span class="o">*</span><span class="n">CHUNK</span><span class="o">/</span><span class="n">sample_rate</span><span class="p">)</span>
            
           
                

<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">audio_stream_UDP</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
<span class="n">t1</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

</code></pre></div></div>
<p>Since in UDP there is no handshake, so at the receiver side, we have to store each received datagram in a queue. For this purpose our queue will serve
as a buffer of some size (let’s say 100). On a thread we will continue to receive the UDP datagram of audio data. On the other hand, in a while loop
we will playback the sound. A time.sleep(5), will provide 5 second delay at the receiver side to fill the buffer, you can change it according to your requirements.</p>

<h3 id="clientpy-1">client.py</h3>
<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Welcome to PyShine
## This is client code to receive video and audio frames over UDP
</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">threading</span><span class="p">,</span> <span class="n">wave</span><span class="p">,</span> <span class="n">pyaudio</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">queue</span>

<span class="n">host_name</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">gethostname</span><span class="p">()</span>
<span class="n">host_ip</span> <span class="o">=</span> <span class="s">'192.168.1.102'</span><span class="c1">#  socket.gethostbyname(host_name)
</span><span class="k">print</span><span class="p">(</span><span class="n">host_ip</span><span class="p">)</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">9633</span>
<span class="c1">## For details visit: www.pyshine.com
</span><span class="n">q</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">Queue</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">audio_stream_UDP</span><span class="p">():</span>
	<span class="n">BUFF_SIZE</span> <span class="o">=</span> <span class="mi">65536</span>
	<span class="n">client_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_INET</span><span class="p">,</span><span class="n">socket</span><span class="p">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
	<span class="n">client_socket</span><span class="p">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span><span class="n">socket</span><span class="p">.</span><span class="n">SO_RCVBUF</span><span class="p">,</span><span class="n">BUFF_SIZE</span><span class="p">)</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">pyaudio</span><span class="p">.</span><span class="n">PyAudio</span><span class="p">()</span>
	<span class="n">CHUNK</span> <span class="o">=</span> <span class="mi">10</span><span class="o">*</span><span class="mi">1024</span>
	<span class="n">stream</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">get_format_from_width</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
					<span class="n">channels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
					<span class="n">rate</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
					<span class="n">output</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
					<span class="n">frames_per_buffer</span><span class="o">=</span><span class="n">CHUNK</span><span class="p">)</span>
					
<span class="c1">### create socket
</span>	<span class="n">message</span> <span class="o">=</span> <span class="sa">b</span><span class="s">'Hello'</span>
	<span class="n">client_socket</span><span class="p">.</span><span class="n">sendto</span><span class="p">(</span><span class="n">message</span><span class="p">,(</span><span class="n">host_ip</span><span class="p">,</span><span class="n">port</span><span class="p">))</span>
	<span class="n">socket_address</span> <span class="o">=</span> <span class="p">(</span><span class="n">host_ip</span><span class="p">,</span><span class="n">port</span><span class="p">)</span>
	
	<span class="k">def</span> <span class="nf">getAudioData</span><span class="p">():</span>
		<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
			<span class="n">frame</span><span class="p">,</span><span class="n">_</span><span class="o">=</span> <span class="n">client_socket</span><span class="p">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="n">BUFF_SIZE</span><span class="p">)</span>
			<span class="n">q</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
			<span class="k">print</span><span class="p">(</span><span class="s">'Queue size...'</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">qsize</span><span class="p">())</span>
	<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">getAudioData</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
	<span class="n">t1</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
	<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'Now Playing...'</span><span class="p">)</span>
	<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
		<span class="n">frame</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">get</span><span class="p">()</span>
		<span class="n">stream</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

	<span class="n">client_socket</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'Audio closed'</span><span class="p">)</span>
	<span class="n">os</span><span class="p">.</span><span class="n">_exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>



<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">audio_stream_UDP</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
<span class="n">t1</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

</code></pre></div></div>
<p>Please checkl that your MacOS is configured with maximum datagram size as:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo sysctl -w net.inet.udp.maxdgram=65535
</code></pre></div></div>
<p>The above UDP max buffer size may reduce back to 9216 upon restart. So please run the above above command again if required.
Usage: on the server side run:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python server.py
</code></pre></div></div>
<p>On the client side please run:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>python client.py
</code></pre></div></div>

<h2 id="a-little-bit-advanced-udp-method">A little bit advanced UDP method</h2>

<p>Thanks to Ethan Chocron, who tested the above code and commented that “regarding the UDP audio stream, the code works perfectly as long as the queue size is greater than 1. I understood why. I think it has to do with the quality and power of the computer but the rate that the data is sent and received is slower than the rate at which it is written on the stream, thus when the queue is 1, it plays, waits (no sound is heard) and then plays again, the difference between the rates is very small, but makes a big difference in the quality of the sound”. The main problem is that how to maintain the queue size greater than 1.</p>

<p>Well, there are multiple solutions to this problem: the first is simple yet sub-optimal to overload the receiver queue, i.e., <code class="language-plaintext highlighter-rouge">time.sleep(0.8*CHUNK/sample_rate)</code>, at the server side, and it will ensure that the queue, at the receiver will not be over-utilized and get emptied, instead it will continue to increase at a much lower rate, and keeping the max size of queue to 2000 or above. The second solution is to have a feedback from the receiver, this feedback will correct the transmission rate. The third is prior knowledge of data to allocate the queue size accordingly, just like the streaming media players do, as a buffering mechanism. The <code class="language-plaintext highlighter-rouge">print(wf.getnframes())</code>  will show the total number of frames in the audio file, and the respective queue size will be <code class="language-plaintext highlighter-rouge">print(wf.getnframes()/CHUNK)</code>. In the codes below, we will use the third solution, which seems much better and suits well for multiple machines. The idea is to send the size of audio frames to the client, so that the client can decide its maximum qsize, and then go on loading the buffer at the
client size.</p>

<h3 id="serverpy-2">server.py</h3>
<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## This is server code to send video and audio frames over UDP
</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">threading</span><span class="p">,</span> <span class="n">wave</span><span class="p">,</span> <span class="n">pyaudio</span><span class="p">,</span> <span class="n">time</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="n">host_name</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">gethostname</span><span class="p">()</span>
<span class="n">host_ip</span> <span class="o">=</span> <span class="s">'192.168.1.104'</span><span class="c1">#  socket.gethostbyname(host_name)
</span><span class="k">print</span><span class="p">(</span><span class="n">host_ip</span><span class="p">)</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">9633</span>
<span class="c1">## For details visit: www.pyshine.com
</span>
<span class="k">def</span> <span class="nf">audio_stream_UDP</span><span class="p">():</span>

	<span class="n">BUFF_SIZE</span> <span class="o">=</span> <span class="mi">65536</span>
	<span class="n">server_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_INET</span><span class="p">,</span><span class="n">socket</span><span class="p">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
	<span class="n">server_socket</span><span class="p">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span><span class="n">socket</span><span class="p">.</span><span class="n">SO_RCVBUF</span><span class="p">,</span><span class="n">BUFF_SIZE</span><span class="p">)</span>

	<span class="n">server_socket</span><span class="p">.</span><span class="n">bind</span><span class="p">((</span><span class="n">host_ip</span><span class="p">,</span> <span class="p">(</span><span class="n">port</span><span class="p">)))</span>
	<span class="n">CHUNK</span> <span class="o">=</span> <span class="mi">10</span><span class="o">*</span><span class="mi">1024</span>
	<span class="n">wf</span> <span class="o">=</span> <span class="n">wave</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="s">"temp.wav.wav"</span><span class="p">)</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">pyaudio</span><span class="p">.</span><span class="n">PyAudio</span><span class="p">()</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'server listening at'</span><span class="p">,(</span><span class="n">host_ip</span><span class="p">,</span> <span class="p">(</span><span class="n">port</span><span class="p">)),</span><span class="n">wf</span><span class="p">.</span><span class="n">getframerate</span><span class="p">())</span>
	<span class="n">stream</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">get_format_from_width</span><span class="p">(</span><span class="n">wf</span><span class="p">.</span><span class="n">getsampwidth</span><span class="p">()),</span>
					<span class="n">channels</span><span class="o">=</span><span class="n">wf</span><span class="p">.</span><span class="n">getnchannels</span><span class="p">(),</span>
					<span class="n">rate</span><span class="o">=</span><span class="n">wf</span><span class="p">.</span><span class="n">getframerate</span><span class="p">(),</span>
					<span class="nb">input</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
					<span class="n">frames_per_buffer</span><span class="o">=</span><span class="n">CHUNK</span><span class="p">)</span>

	<span class="n">data</span> <span class="o">=</span> <span class="bp">None</span>
	<span class="n">sample_rate</span> <span class="o">=</span> <span class="n">wf</span><span class="p">.</span><span class="n">getframerate</span><span class="p">()</span>
	<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
		<span class="n">msg</span><span class="p">,</span><span class="n">client_addr</span> <span class="o">=</span> <span class="n">server_socket</span><span class="p">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="n">BUFF_SIZE</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">'[GOT connection from]... '</span><span class="p">,</span><span class="n">client_addr</span><span class="p">,</span><span class="n">msg</span><span class="p">)</span>
		<span class="n">DATA_SIZE</span> <span class="o">=</span> <span class="n">math</span><span class="p">.</span><span class="n">ceil</span><span class="p">(</span><span class="n">wf</span><span class="p">.</span><span class="n">getnframes</span><span class="p">()</span><span class="o">/</span><span class="n">CHUNK</span><span class="p">)</span>
		<span class="n">DATA_SIZE</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">DATA_SIZE</span><span class="p">).</span><span class="n">encode</span><span class="p">()</span>
		<span class="k">print</span><span class="p">(</span><span class="s">'[Sending data size]...'</span><span class="p">,</span><span class="n">wf</span><span class="p">.</span><span class="n">getnframes</span><span class="p">()</span><span class="o">/</span><span class="n">sample_rate</span><span class="p">)</span>
		<span class="n">server_socket</span><span class="p">.</span><span class="n">sendto</span><span class="p">(</span><span class="n">DATA_SIZE</span><span class="p">,</span><span class="n">client_addr</span><span class="p">)</span>
		<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
		<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
			
			<span class="n">data</span> <span class="o">=</span> <span class="n">wf</span><span class="p">.</span><span class="n">readframes</span><span class="p">(</span><span class="n">CHUNK</span><span class="p">)</span>
			<span class="n">server_socket</span><span class="p">.</span><span class="n">sendto</span><span class="p">(</span><span class="n">data</span><span class="p">,</span><span class="n">client_addr</span><span class="p">)</span>
			<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.001</span><span class="p">)</span> <span class="c1"># Here you can adjust it according to how fast you want to send data keep it &gt; 0
</span>			<span class="k">print</span><span class="p">(</span><span class="n">cnt</span><span class="p">)</span>
			<span class="k">if</span> <span class="n">cnt</span> <span class="o">&gt;</span><span class="p">(</span><span class="n">wf</span><span class="p">.</span><span class="n">getnframes</span><span class="p">()</span><span class="o">/</span><span class="n">CHUNK</span><span class="p">):</span>
				<span class="k">break</span>
			<span class="n">cnt</span><span class="o">+=</span><span class="mi">1</span>

		<span class="k">break</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'SENT...'</span><span class="p">)</span>            

<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">audio_stream_UDP</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
<span class="n">t1</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>

</code></pre></div></div>

<h3 id="clientpy-2">client.py</h3>
<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">## Welcome to PyShine
## This is client code to receive video and audio frames over UDP
</span>
<span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">threading</span><span class="p">,</span> <span class="n">wave</span><span class="p">,</span> <span class="n">pyaudio</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">queue</span>

<span class="n">host_name</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">gethostname</span><span class="p">()</span>
<span class="n">host_ip</span> <span class="o">=</span> <span class="s">'192.168.1.104'</span><span class="c1">#  socket.gethostbyname(host_name)
</span><span class="k">print</span><span class="p">(</span><span class="n">host_ip</span><span class="p">)</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">9633</span>
<span class="c1">## For details visit: www.pyshine.com
</span>

<span class="k">def</span> <span class="nf">audio_stream_UDP</span><span class="p">():</span>
	<span class="n">BUFF_SIZE</span> <span class="o">=</span> <span class="mi">65536</span>
	<span class="n">client_socket</span> <span class="o">=</span> <span class="n">socket</span><span class="p">.</span><span class="n">socket</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">AF_INET</span><span class="p">,</span><span class="n">socket</span><span class="p">.</span><span class="n">SOCK_DGRAM</span><span class="p">)</span>
	<span class="n">client_socket</span><span class="p">.</span><span class="n">setsockopt</span><span class="p">(</span><span class="n">socket</span><span class="p">.</span><span class="n">SOL_SOCKET</span><span class="p">,</span><span class="n">socket</span><span class="p">.</span><span class="n">SO_RCVBUF</span><span class="p">,</span><span class="n">BUFF_SIZE</span><span class="p">)</span>
	<span class="n">p</span> <span class="o">=</span> <span class="n">pyaudio</span><span class="p">.</span><span class="n">PyAudio</span><span class="p">()</span>
	<span class="n">CHUNK</span> <span class="o">=</span> <span class="mi">10</span><span class="o">*</span><span class="mi">1024</span>
	<span class="n">stream</span> <span class="o">=</span> <span class="n">p</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">p</span><span class="p">.</span><span class="n">get_format_from_width</span><span class="p">(</span><span class="mi">2</span><span class="p">),</span>
					<span class="n">channels</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
					<span class="n">rate</span><span class="o">=</span><span class="mi">44100</span><span class="p">,</span>
					<span class="n">output</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
					<span class="n">frames_per_buffer</span><span class="o">=</span><span class="n">CHUNK</span><span class="p">)</span>
					
<span class="c1">### create socket
</span>	<span class="n">message</span> <span class="o">=</span> <span class="sa">b</span><span class="s">'Hello'</span>
	<span class="n">client_socket</span><span class="p">.</span><span class="n">sendto</span><span class="p">(</span><span class="n">message</span><span class="p">,(</span><span class="n">host_ip</span><span class="p">,</span><span class="n">port</span><span class="p">))</span>
	<span class="n">DATA_SIZE</span><span class="p">,</span><span class="n">_</span><span class="o">=</span> <span class="n">client_socket</span><span class="p">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="n">BUFF_SIZE</span><span class="p">)</span>
	<span class="n">DATA_SIZE</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">DATA_SIZE</span><span class="p">.</span><span class="n">decode</span><span class="p">())</span>
	<span class="n">q</span> <span class="o">=</span> <span class="n">queue</span><span class="p">.</span><span class="n">Queue</span><span class="p">(</span><span class="n">maxsize</span><span class="o">=</span><span class="n">DATA_SIZE</span><span class="p">)</span>
	<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
	<span class="k">def</span> <span class="nf">getAudioData</span><span class="p">():</span>
		<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
			<span class="n">frame</span><span class="p">,</span><span class="n">_</span><span class="o">=</span> <span class="n">client_socket</span><span class="p">.</span><span class="n">recvfrom</span><span class="p">(</span><span class="n">BUFF_SIZE</span><span class="p">)</span>
			<span class="n">q</span><span class="p">.</span><span class="n">put</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
			<span class="k">print</span><span class="p">(</span><span class="s">'[Queue size while loading]...'</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">qsize</span><span class="p">())</span>
				
	<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">getAudioData</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
	<span class="n">t1</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
	<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
	<span class="n">DURATION</span> <span class="o">=</span> <span class="n">DATA_SIZE</span><span class="o">*</span><span class="n">CHUNK</span><span class="o">/</span><span class="mi">44100</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'[Now Playing]... Data'</span><span class="p">,</span><span class="n">DATA_SIZE</span><span class="p">,</span><span class="s">'[Audio Time]:'</span><span class="p">,</span><span class="n">DURATION</span> <span class="p">,</span><span class="s">'seconds'</span><span class="p">)</span>
	<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
		<span class="n">frame</span> <span class="o">=</span> <span class="n">q</span><span class="p">.</span><span class="n">get</span><span class="p">()</span>
		<span class="n">stream</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">'[Queue size while playing]...'</span><span class="p">,</span><span class="n">q</span><span class="p">.</span><span class="n">qsize</span><span class="p">(),</span><span class="s">'[Time remaining...]'</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">DURATION</span><span class="p">),</span><span class="s">'seconds'</span><span class="p">)</span>
		<span class="n">DURATION</span><span class="o">-=</span><span class="n">CHUNK</span><span class="o">/</span><span class="mi">44100</span>
	<span class="n">client_socket</span><span class="p">.</span><span class="n">close</span><span class="p">()</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'Audio closed'</span><span class="p">)</span>
	<span class="n">os</span><span class="p">.</span><span class="n">_exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>



<span class="n">t1</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">audio_stream_UDP</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">())</span>
<span class="n">t1</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>


</code></pre></div></div>


          <!-- Syntax Highlighting -->
          <link href="/assets/css/syntax.css" rel="stylesheet">
          <script src="/assets/scripts/copyCode.js" async></script>

          <!-- Ads -->
          <section aria-label="Advertisements" class="ads mt-4">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-2976211678184829"
                 data-ad-slot="7658460605"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          </section>

        </article>

      </div>

      <!-- Post Navigation -->
      <nav class="post-navigation controls__inner mt-5" aria-label="Post navigation">
        <div class="controls__item prev">
          
            <span>Previous</span>
            <a href="/How-to-send-audio-video-of-MP4-using-sockets-in-Python/" rel="prev">
              How to send audio and video using soc...
            </a>
          
        </div>

        <div class="controls__item next">
          
            <span>Next</span>
            <a href="/How-to-install-OpenCV-in-Rasspberry-Pi/" rel="next">
              How to easily install OpenCv in Raspb...
            </a>
          
        </div>
      </nav>

      <!-- Disqus -->
      
        <section class="comments mt-5" aria-label="Comments Section">
          
<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = 'https://www.pyshine.com/How-to-send-audio-from-PyAudio-over-socket/';
this.page.identifier = 'https://www.pyshine.com/How-to-send-audio-from-PyAudio-over-socket/';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://https-py2ai-github-io.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the comments.</noscript>


        </section>
      

    </main>

    <footer class="footer">
  <div class="container">
    <nav class="social">
      
      
      
    </nav>
    <span>&copy; 2026 PyShine. All rights reserved.</span>
  </div>
</footer>
<script async src="/assets/js/bundle.js"></script>

<script async>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').then(function( registration ) {
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    })
    .catch(function(error) {
      console.log('ServiceWorker registration failed: ', error);
    });
  }
</script>



    <!-- MathJax -->
    
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
>
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://vincenttam.github.io/javascripts/MathJaxLocal.js"
>
</script>



    <!-- Ads -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    <!-- SIDEBAR TOC SCRIPT -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
      const toc = document.getElementById("toc-list");
      const headings = document.querySelectorAll(
        ".post-content h2:not(.no-toc), .post-content h3:not(.no-toc)"
      );
      if (!toc || headings.length === 0) return;

      const ul = document.createElement("ul");
      headings.forEach(h => {
        const id = h.id || h.textContent.trim().toLowerCase().replace(/\s+/g, "-");
        h.id = id;

        const li = document.createElement("li");
        if (h.tagName === "H3") li.style.marginLeft = "1rem";

        li.innerHTML = `<a href="#${id}">${h.textContent}</a>`;
        ul.appendChild(li);
      });
      toc.appendChild(ul);
    });
    </script>

    <!-- INLINE TOC SCRIPT -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
      const tocTarget = document.getElementById("inline-toc-list");
      const headings = document.querySelectorAll(
        ".post-content h2:not(.no-toc), .post-content h3:not(.no-toc)"
      );
      if (!tocTarget || headings.length === 0) return;

      const ul = document.createElement("ul");
      headings.forEach(h => {
        const id = h.id || h.textContent.trim().toLowerCase().replace(/\s+/g, "-");
        h.id = id;

        const li = document.createElement("li");
        if (h.tagName === "H3") li.style.marginLeft = "1rem";

        li.innerHTML = `<a href="#${id}">${h.textContent}</a>`;
        ul.appendChild(li);
      });
      tocTarget.appendChild(ul);
    });
    </script>

    <!-- INLINE TOC STYLES -->
    <style>
      .inline-toc-box {
        background: #D4EDFD;
        padding: 15px 20px;
        border-radius: 10px;
        margin-bottom: 25px;
        border: 1px solid #e0e0e0;
      }
      .inline-toc-box ul {
        margin: 0;
        padding-left: 18px;
      }
      .inline-toc-box li {
        margin-bottom: 6px;
      }
    </style>

  </body>
</html>


