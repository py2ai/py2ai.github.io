

  <!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/Article">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Pinterest & Google verification -->
  <meta name="p:domain_verify" content="fb68a8459fe32b8b072bcd5cc620d125"/>
  <meta name="google-site-verification" content="WAkFPi5cvufClnQetgIl0STmvvwHhVf8jfyENFWhsxU" />
  <meta name="google-site-verification" content="g2pFZlv-92XQD67BPgiVHsvZ4TZH13Ucvmmvvv36kU4" />

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>How to deploy Python video processing application on the… | PyShine</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="How to deploy Python video processing application on the…" />
<meta name="author" content="PyShine Team" />
<meta property="og:locale" content="en" />
<meta name="description" content="We will use Flask and OpenCv to change blur and brightness of the video and serve it on the network" />
<meta property="og:description" content="We will use Flask and OpenCv to change blur and brightness of the video and serve it on the network" />
<link rel="canonical" href="https://www.pyshine.com/How-to-quickly-deploy-flask-application-for-video/" />
<meta property="og:url" content="https://www.pyshine.com/How-to-quickly-deploy-flask-application-for-video/" />
<meta property="og:site_name" content="PyShine" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-12-03T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="How to deploy Python video processing application on the…" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"PyShine Team"},"dateModified":"2020-12-03T00:00:00+00:00","datePublished":"2020-12-03T00:00:00+00:00","description":"We will use Flask and OpenCv to change blur and brightness of the video and serve it on the network","headline":"How to deploy Python video processing application on the…","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.pyshine.com/How-to-quickly-deploy-flask-application-for-video/"},"name":"{{ page.title escape }}","url":"https://www.pyshine.com/How-to-quickly-deploy-flask-application-for-video/"}</script>
<!-- End Jekyll SEO tag -->
  <!-- This will generate the canonical link automatically -->

  <script src="https://analytics.ahrefs.com/analytics.js" data-key="Im0K82YsmEDy08+6wyUIZA" async></script>

  <!-- Favicon & App Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icons/apple-touch-icon.png?v=qA3OXqyw77">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/icons/favicon-32x32.png?v=qA3OXqyw77">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/icons/favicon-16x16.png?v=qA3OXqyw77">
  <link rel="manifest" href="/assets/img/icons/manifest.json?v=qA3OXqyw77">
  <link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg?v=qA3OXqyw77" color="#5bbad5">
  <link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77">
  <!--[if IE]><link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77"><![endif]-->

  <!-- App & Theme Info -->
  <meta name="apple-mobile-web-app-title" content="Sleek">
  <meta name="application-name" content="Sleek">
  <meta name="msapplication-config" content="/assets/img/icons/browserconfig.xml?v=qA3OXqyw77">
  <meta name="theme-color" content="#ffffff">

  
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-TCVFBKF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GTM-TCVFBKF');
</script>

  

  <!-- Critical CSS Inline -->
  <style class="inlineCSS">
    h1{color:#313237;margin-top:0;margin-bottom:.5rem}.dark-bg{background-color:#19d319}@media (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:last-of-type,.post-card:nth-child(2n+2){margin-right:0}}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figure,main{display:block}figure{margin:1em 40px}a{background-color:transparent;-webkit-text-decoration-skip:objects}img{border-style:none}svg:not(:root){overflow:hidden}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}body{-webkit-overflow-scrolling:touch}*,::after,::before{-webkit-box-sizing:inherit;box-sizing:inherit}.site{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.site__content{-webkit-box-flex:1;-ms-flex:1;flex:1}img{max-width:100%;height:auto;width:auto;vertical-align:middle}figure{margin:0}body{background-color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Hiragino Sans GB","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;font-size:1rem;line-height:1.5;color:#343851;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%}p{margin-top:0;margin-bottom:1.25rem}h1,h2{color:#313237;margin-top:0;margin-bottom:.5rem}a{color:#277cea;text-decoration:none;border-bottom:1px dashed #277cea}.blur{background:#fff;filter:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"><filter id="filter"><feGaussianBlur stdDeviation="16" /></filter></svg>#filter');-webkit-filter:blur(1rem);filter:blur(1rem)}.container{padding:0 20px}@media (min-width:0){.container{max-width:auto;margin:0 auto}}@media (min-width:36em){.container{max-width:540px;margin:0 auto}}@media (min-width:48em){.container{max-width:720px;margin:0 auto}}@media (min-width:62em){.container{max-width:960px;margin:0 auto}}@media (min-width:75em){.container{max-width:1170px;margin:0 auto}}.header{background-color:#fff;color:#343851;position:absolute;z-index:4;width:100%;top:0;left:0;will-change:transform;-webkit-transform:translateY(0);transform:translateY(0)}.header a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:0}.header__logo{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;overflow:hidden;padding:19px 0;margin-right:1.25rem;outline:0;border-bottom:0;color:#313237}.header__logo .header__logo--container{width:58px}.header__logo .header__logo--container .logo{fill:currentColor}.header__inner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3.75em;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header__links{padding-bottom:.5rem;display:none;position:absolute;top:3.75em;left:0;width:100%;height:auto;background:#fff}.header__link{color:#343851;padding:.938rem 0;border-top:1px solid #ededed}.header__toggle{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:44px;height:100%;background-color:transparent;padding-left:1.25rem}.header__toggle span{display:block;position:relative;margin-top:4px;background-color:#343851;width:100%;height:2px;border-radius:1px}.header__toggle span:first-child{margin-top:0}@media (min-width:62em){.header__toggle{display:none;visibility:hidden}.header__links{position:static;padding:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;visibility:visible;width:auto;height:100%}.header__links-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;padding:0}.header__link{position:relative;padding:.938rem 1rem;border:0;height:100%}.header__link::after{content:"";display:block;position:absolute;left:0;bottom:0;height:3px;width:100%;-webkit-transform:scaleX(0);transform:scaleX(0);background:#277cea}}.post-card{display:block;position:relative;width:100%;min-height:250px;border-radius:4px;overflow:hidden;background-color:#fff;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.08);box-shadow:0 1px 3px rgba(0,0,0,.08);margin-bottom:2.25rem;border-bottom:0}@media (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:0}}@media (min-width:75em){.post-card{width:31.25%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:3.125%}}.post-card__label{position:absolute;top:1.5rem;left:1.5rem;z-index:2}.post-card__thumb{margin:0;background:#fff;position:relative;overflow:hidden}.post-card__thumb::after{content:"";display:block;height:0;width:100%;padding-bottom:56.25%}.post-card__thumb>*{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.post-card__inner{padding:1.875rem 1.25rem .625rem;color:#838c8d}.post-card__header{margin-bottom:.75rem}.post-card__header .post-card__meta{font-size:.875rem}.label{padding:0 10px;margin-bottom:1rem;display:inline-block;line-height:20px;font-size:.75rem;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.8);border:2px solid rgba(255,255,255,.5);border-radius:100px}.hero{margin:3.75rem auto 0;min-height:16.25rem;width:100%;position:relative;background-color:#dde5ea;background-repeat:no-repeat;background-position:50%;background-size:cover}@media (min-width:62em){.hero{margin:0 auto;height:36em}}.hero::before{position:absolute;display:block;content:"";top:0;left:0;width:100%;height:100%;background:rgba(52,56,81,.8)}.hero__wrap{position:absolute;margin:auto;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;color:rgba(255,255,255,.8);width:100%;max-width:90%;z-index:1}.hero__wrap .hero__title{font-size:1.8em;color:#fff}.blog{background-color:#f9f9f9}.post-list{padding-top:2.5em;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}@media (min-width:48em){.hero__wrap{max-width:40em}.hero__wrap .hero__title{padding:1rem 0;font-size:2.625em;line-height:3.125rem}.post-list{padding-top:5em}}
  </style>

  <!-- Main CSS -->
  <link rel="preload" href="/assets/css/main.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/css/main.css"></noscript>

  <script type="text/javascript">
    /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
(function(w){"use strict";if(!w.loadCSS){w.loadCSS=function(){}}
var rp=loadCSS.relpreload={};rp.support=(function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload")}catch(e){ret=!1}
return function(){return ret}})();rp.bindMediaToggle=function(link){var finalMedia=link.media||"all";function enableStylesheet(){link.media=finalMedia}
if(link.addEventListener){link.addEventListener("load",enableStylesheet)}else if(link.attachEvent){link.attachEvent("onload",enableStylesheet)}
setTimeout(function(){link.rel="stylesheet";link.media="only x"});setTimeout(enableStylesheet,3000)};rp.poly=function(){if(rp.support()){return}
var links=w.document.getElementsByTagName("link");for(var i=0;i<links.length;i++){var link=links[i];if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){link.setAttribute("data-loadcss",!0);rp.bindMediaToggle(link)}}};if(!rp.support()){rp.poly();var run=w.setInterval(rp.poly,500);if(w.addEventListener){w.addEventListener("load",function(){rp.poly();w.clearInterval(run)})}else if(w.attachEvent){w.attachEvent("onload",function(){rp.poly();w.clearInterval(run)})}}
if(typeof exports!=="undefined"){exports.loadCSS=loadCSS}
else{w.loadCSS=loadCSS}}(typeof global!=="undefined"?global:this))

  </script>

  <!-- MathJax -->
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>


  <body class="site" itemscope itemtype="https://schema.org/WebPage">

    
      <!-- Google Tag Manager (noscript) -->
      <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TCVFBKF"
                height="0" width="0" style="display:none;visibility:hidden"></iframe>
      </noscript>
      <!-- End Google Tag Manager -->
    

    <header class="header" itemscope itemtype="http://schema.org/SiteNavigationElement" aria-label="Main navigation">
  <div class="container">
    <div class="header__inner">

      <!-- Logo -->
      <a class="header__logo" href="/">
        <div class="header__logo--container">
          <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<g>
	<path d="M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"></path>

	
	
</g>
</svg>

        </div>
      </a>

      <!-- Navigation Links -->
      <nav class="header__links">
        <div class="container header__links-wrapper">
          
            <a class="header__link" href="/" itemprop="url">
              <span itemprop="name">Home</span>
            </a>
          
            <a class="header__link" href="/categories" itemprop="url">
              <span itemprop="name">Posts</span>
            </a>
          
            <a class="header__link" href="/avatars" itemprop="url">
              <span itemprop="name">Make Avatars</span>
            </a>
          
            <a class="header__link" href="/converter.html" itemprop="url">
              <span itemprop="name">Free PNG Converter</span>
            </a>
          
            <a class="header__link" href="/finger.html" itemprop="url">
              <span itemprop="name">Fingers Scanner</span>
            </a>
          
            <a class="header__link" href="/about" itemprop="url">
              <span itemprop="name">About</span>
            </a>
          
            <a class="header__link" href="/contact" itemprop="url">
              <span itemprop="name">Contact</span>
            </a>
          
            <a class="header__link" href="/privacy" itemprop="url">
              <span itemprop="name">Privacy Policy</span>
            </a>
          
            <a class="header__link" href="/disclaimer" itemprop="url">
              <span itemprop="name">Disclaimer</span>
            </a>
          
        </div>
      </nav>

      <!-- Language Switcher (Only for posts with 'lang') -->
      

      <!-- Mobile Menu Toggle -->
      <div class="header__toggle" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </div>

    </div>
  </div>

  <style>
    .header__lang-switcher {
      display: inline-flex;
      gap: 0.5rem;
      align-items: center;
      font-size: 1.3rem; /* emoji size */
      margin-left: 1rem;
    }

    .header__lang-switcher .lang-flag.active {
      text-decoration: underline;
      text-underline-offset: 4px; /* spacing under emoji */
    }

    .header__lang-switcher .lang-flag.disabled {
      filter: grayscale(100%);
      opacity: 0.5;
      cursor: not-allowed;
    }

    /* Optional: spacing on mobile if needed */
    @media (max-width: 768px) {
      .header__lang-switcher {
        margin-left: 0;
      }
    }
  </style>

</header>


    
      <div class="hero lazyload"
           data-bg="https://www.pyshine.com/assets/img/posts/flask.jpg"
           role="img"
           aria-label="How to deploy Python video processing application on the...">
    
        <div class="hero__wrap">

          
            <div class="hero__categories">
              
                <a class="label"
                   href="/categories/#Web development tutorial series"
                   aria-label="Category: Web development tutorial series">
                   Web development tutorial series
                </a>
                
              
            </div>
          

          <h1 class="hero__title" itemprop="headline">How to deploy Python video processing application on the...</h1>

          <p class="hero__meta">
            <time datetime="2020-12-03T00:00:00+00:00" itemprop="datePublished">
              03 Dec 2020
            </time>
            &nbsp;·&nbsp;
            
            <span itemprop="timeRequired">
              
                14 mins read
              
            </span>
          </p>
        </div>
      </div>

    <main class="site__content" role="main">
      <div class="container post-layout">

        <!-- SIDEBAR TOC -->
        <aside class="post-toc" id="post-toc">
          <h3 class="no-toc">Contents</h3>
          <nav id="toc-list"></nav>
        </aside>

        <!-- MAIN CONTENT -->
        <article class="post-content"
                 itemprop="articleBody"
                 itemscope itemtype="https://schema.org/Article">

          <!-- INLINE TOC -->
          <div id="inline-toc" class="inline-toc-box">
            <h3 class="no-toc">Contents</h3>
            <nav id="inline-toc-list"></nav>
          </div>

          <p><br /></p>
<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/2Nw4WQj4isA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; 
encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<p>Hello friends! Today we will design a web application using Flask framework. We will use opencv to process the video frames. The user will submit a form containing 
input parameters. These parameters are Brightness value, and Blur value. Following is the code for the deployment of application on the internet especially using
the PythonAnywhere.com service. Its basic plan is free, for more details please visit the website. Follow the above video tutorial for deployment on the wifi local
area network as per your server’s IP address.</p>

<h1 id="important-installation-steps-to-aviod-any-issues">Important installation steps to aviod any issues</h1>

<p>We need to install the proper working version of Werkzeug i.e. (Werkzeug-0.10.2.dev0dev-20220510) . In addition install the following versions</p>

<p><code class="language-plaintext highlighter-rouge">pip3 install Flask-SocketIO==4.3.1</code></p>

<p><code class="language-plaintext highlighter-rouge">pip3 install python-engineio==3.13.2</code></p>

<p><code class="language-plaintext highlighter-rouge">pip3 install python-socketio==4.6.0</code></p>

<p><code class="language-plaintext highlighter-rouge">pip3 install git+https://github.com/untitaker/werkzeug.git@reloader-perf</code></p>

<p>Please note that the above installations will resolve following issues:</p>
<ul>
  <li>ImportError: cannot import name ‘run_with_reloader’ from ‘werkzeug.serving’</li>
  <li>The client is using an unsupported version of the Socket.IO or Engine.IO protocols (further occurrences of this error will be logged with level INFO)</li>
  <li>“GET /socket.io/?EIO=3&amp;transport=polling&amp;t=O2j_BJX HTTP/1.1” 400</li>
</ul>

<h2 id="files-for-deployment-on-the-internet">Files for deployment on the internet</h2>

<h3 id="processpy">process.py</h3>

<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span><span class="n">Response</span>
<span class="kn">import</span> <span class="nn">cv2</span><span class="p">,</span><span class="n">imutils</span><span class="p">,</span><span class="n">time</span>
<span class="kn">import</span> <span class="nn">pyshine</span> <span class="k">as</span> <span class="n">ps</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
   <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">'index.html'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">changeBrightness</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
	<span class="s">""" This function will take an image (img) and the brightness
		value. It will perform the brightness change using OpenCv
		and after split, will merge the img and return it.
	"""</span>
	<span class="n">hsv</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2HSV</span><span class="p">)</span>
	<span class="n">h</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">v</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">hsv</span><span class="p">)</span>
	<span class="n">lim</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">value</span>
	<span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">&gt;</span><span class="n">lim</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
	<span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">&lt;=</span><span class="n">lim</span><span class="p">]</span> <span class="o">+=</span> <span class="n">value</span>
	<span class="n">final_hsv</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">merge</span><span class="p">((</span><span class="n">h</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">v</span><span class="p">))</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">final_hsv</span><span class="p">,</span><span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_HSV2BGR</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">img</span>

<span class="k">def</span> <span class="nf">changeBlur</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
	<span class="s">""" This function will take the img image and blur values as inputs.
		After perform blur operation using opencv function, it returns
		the image img.
	"""</span>
	<span class="n">kernel_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">value</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># +1 is to avoid 0
</span>	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">blur</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">kernel_size</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">img</span>

<span class="k">def</span> <span class="nf">pyshine_process</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
	<span class="k">print</span><span class="p">(</span><span class="s">"Parameters:"</span><span class="p">,</span><span class="n">params</span><span class="p">)</span>
	<span class="s">"""Video streaming generator function."""</span>
	<span class="n">CAMERA</span><span class="o">=</span><span class="bp">False</span>
	<span class="k">if</span> <span class="n">CAMERA</span><span class="p">:</span>
		<span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="s">'videos/mario.mp4'</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'FUNCTION DONE'</span><span class="p">)</span>
<span class="c1">### Read until video is completed
</span>	<span class="n">fps</span><span class="o">=</span><span class="mi">0</span>
	<span class="n">st</span><span class="o">=</span><span class="mi">0</span>
	<span class="n">frames_to_count</span><span class="o">=</span><span class="mi">20</span>
	<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>


	<span class="k">while</span><span class="p">(</span><span class="n">cap</span><span class="p">.</span><span class="n">isOpened</span><span class="p">()):</span>

		<span class="n">ret</span><span class="p">,</span> <span class="n">img</span> <span class="o">=</span> <span class="n">cap</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
		<span class="n">brightness_value_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s">'brightness'</span><span class="p">])</span>
		<span class="n">blur_value_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s">'blur'</span><span class="p">])</span>
		<span class="n">img</span> <span class="o">=</span> <span class="n">changeBrightness</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">brightness_value_now</span><span class="p">)</span>
		<span class="n">img</span> <span class="o">=</span> <span class="n">changeBlur</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">blur_value_now</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>

			<span class="k">if</span> <span class="n">cnt</span> <span class="o">==</span> <span class="n">frames_to_count</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span> <span class="c1"># To avoid divide by 0 we put it in try except
</span>
					<span class="n">fps</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">frames_to_count</span><span class="o">/</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">st</span><span class="p">))</span>
					<span class="n">st</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
					<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
				<span class="k">except</span><span class="p">:</span>
					<span class="k">pass</span>

			<span class="n">cnt</span><span class="o">+=</span><span class="mi">1</span>

			<span class="n">img</span> <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">640</span><span class="p">)</span>

			<span class="n">text</span>  <span class="o">=</span>  <span class="s">'FPS: '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fps</span><span class="p">)</span>
			<span class="n">img</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">222</span><span class="p">))</span>
			<span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%d %b %Y %H.%M.%S %p"</span><span class="p">))</span>
			<span class="n">img</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">190</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">228</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">222</span><span class="p">))</span>
			<span class="n">text</span>  <span class="o">=</span>  <span class="sa">f</span><span class="s">"Brightness: </span><span class="si">{</span><span class="n">brightness_value_now</span><span class="si">}</span><span class="s">"</span>
			<span class="n">img</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">210</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
			<span class="n">text</span>  <span class="o">=</span>  <span class="sa">f</span><span class="s">'Blur: </span><span class="si">{</span><span class="n">blur_value_now</span><span class="si">}</span><span class="s">'</span>
			<span class="n">img</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">490</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
			<span class="n">frame</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imencode</span><span class="p">(</span><span class="s">'.JPEG'</span><span class="p">,</span> <span class="n">img</span><span class="p">,[</span><span class="n">cv2</span><span class="p">.</span><span class="n">IMWRITE_JPEG_QUALITY</span><span class="p">,</span><span class="mi">20</span><span class="p">])[</span><span class="mi">1</span><span class="p">].</span><span class="n">tobytes</span><span class="p">()</span>
			<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.016</span><span class="p">)</span>
			<span class="k">yield</span> <span class="p">(</span><span class="sa">b</span><span class="s">'--frame</span><span class="se">\r\n</span><span class="s">'</span><span class="sa">b</span><span class="s">'Content-Type: image/jpeg</span><span class="se">\r\n\r\n</span><span class="s">'</span> <span class="o">+</span> <span class="n">frame</span> <span class="o">+</span> <span class="sa">b</span><span class="s">'</span><span class="se">\r\n</span><span class="s">'</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">break</span>


<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/res'</span><span class="p">,</span><span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s">'POST'</span><span class="p">,</span><span class="s">'GET'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">res</span><span class="p">():</span>
	<span class="k">global</span> <span class="n">result</span>
	<span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
		<span class="n">result</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="n">to_dict</span><span class="p">()</span>
		<span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">"results.html"</span><span class="p">,</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">)</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/results'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">video_feed</span><span class="p">():</span>
	<span class="k">global</span> <span class="n">result</span>
	<span class="n">params</span><span class="o">=</span> <span class="n">result</span>
	<span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">pyshine_process</span><span class="p">(</span><span class="n">params</span><span class="p">),</span><span class="n">mimetype</span><span class="o">=</span><span class="s">'multipart/x-mixed-replace; boundary=frame'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">threaded</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="indexhtml">index.html</h3>

<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;!DOCTYPE html&gt;</span>

<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>PyShine streaming video application <span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>

  <span class="nt">&lt;h1&gt;</span>Please input the parameters (0 to 100): <span class="nt">&lt;/h1&gt;</span>

<span class="nt">&lt;form</span> <span class="na">action = </span><span class="s">"/res"</span> <span class="na">method = </span><span class="s">"POST"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;table&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"right"</span><span class="nt">&gt;</span>Brightness:<span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"brightness"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
    <span class="nt">&lt;tr&gt;</span>
      <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"right"</span><span class="nt">&gt;</span>Blur:<span class="nt">&lt;/td&gt;</span>
      <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"blur"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="nt">/&gt;&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>
   <span class="nt">&lt;tr&gt;</span>
   <span class="nt">&lt;td&gt;&lt;/td&gt;</span>
      <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"right"</span><span class="nt">&gt;&lt;input</span> <span class="na">type = </span><span class="s">"submit"</span> <span class="na">value = </span><span class="s">"submit"</span> <span class="nt">/&gt;&lt;/td&gt;</span>
    <span class="nt">&lt;/tr&gt;</span>

  <span class="nt">&lt;/table&gt;</span>
<span class="nt">&lt;/form&gt;</span>


  <span class="nt">&lt;/body&gt;</span>

<span class="nt">&lt;/html&gt;</span>


</code></pre></div></div>

<h3 id="resultshtml">results.html</h3>

<p>!<img src="https://www.pyshine.com/assets/img/posts/resultshtml.png" alt="resultshtml" /></p>

<h2 id="files-for-deployment-on-the-wifi-lan">Files for deployment on the wifi LAN</h2>

<p>Following is the code set for the local wifi based deployment. Please note that ‘192.168.1.104’ is the IP address on our computer, please change it according
to your computer’s IP address against the Wirless LAN. If you dont know your IP address, then please follow our tutorial about socket programming. The process.py 
file is the main python code here. The index.html and results.html should be put in the templates directory. Because Flask looks for the htmls in this directory
by default. We have set the Camera flag to True, so when you will run this code, the video will come from your webcam attached to the server.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
python process.py

</code></pre></div></div>
<p>After running this code, copy the address and enter in the browser, http://192.168.1.104:9999, again it may be different in your case. It will appear in the
power shell or terminal window, so you can copy it easily. The good thing about this application is that, you can view the video on your wireless mobile device.
It can be a smart phone, table, etc.</p>

<h3 id="processpy-1">process.py</h3>

<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">render_template</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span><span class="n">Response</span>
<span class="kn">import</span> <span class="nn">cv2</span><span class="p">,</span><span class="n">imutils</span><span class="p">,</span><span class="n">time</span>
<span class="kn">import</span> <span class="nn">pyshine</span> <span class="k">as</span> <span class="n">ps</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>
<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">index</span><span class="p">():</span>
   <span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">'index.html'</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">changeBrightness</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
	<span class="s">""" This function will take an image (img) and the brightness
		value. It will perform the brightness change using OpenCv
		and after split, will merge the img and return it.
	"""</span>
	<span class="n">hsv</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2HSV</span><span class="p">)</span>
	<span class="n">h</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">v</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">split</span><span class="p">(</span><span class="n">hsv</span><span class="p">)</span>
	<span class="n">lim</span> <span class="o">=</span> <span class="mi">255</span> <span class="o">-</span> <span class="n">value</span>
	<span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">&gt;</span><span class="n">lim</span><span class="p">]</span> <span class="o">=</span> <span class="mi">255</span>
	<span class="n">v</span><span class="p">[</span><span class="n">v</span><span class="o">&lt;=</span><span class="n">lim</span><span class="p">]</span> <span class="o">+=</span> <span class="n">value</span>
	<span class="n">final_hsv</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">merge</span><span class="p">((</span><span class="n">h</span><span class="p">,</span><span class="n">s</span><span class="p">,</span><span class="n">v</span><span class="p">))</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">final_hsv</span><span class="p">,</span><span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_HSV2BGR</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">img</span>

<span class="k">def</span> <span class="nf">changeBlur</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
	<span class="s">""" This function will take the img image and blur values as inputs.
		After perform blur operation using opencv function, it returns
		the image img.
	"""</span>
	<span class="n">kernel_size</span> <span class="o">=</span> <span class="p">(</span><span class="n">value</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">value</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># +1 is to avoid 0
</span>	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">blur</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">kernel_size</span><span class="p">)</span>
	<span class="k">return</span> <span class="n">img</span>

<span class="k">def</span> <span class="nf">pyshine_process</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
	<span class="k">print</span><span class="p">(</span><span class="s">"Parameters:"</span><span class="p">,</span><span class="n">params</span><span class="p">)</span>
	<span class="s">"""Video streaming generator function."""</span>
	<span class="n">CAMERA</span><span class="o">=</span><span class="bp">True</span>
	<span class="k">if</span> <span class="n">CAMERA</span><span class="p">:</span>
		<span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="s">'videos/mario.mp4'</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'FUNCTION DONE'</span><span class="p">)</span>
<span class="c1">### Read until video is completed
</span>	<span class="n">fps</span><span class="o">=</span><span class="mi">0</span>
	<span class="n">st</span><span class="o">=</span><span class="mi">0</span>
	<span class="n">frames_to_count</span><span class="o">=</span><span class="mi">20</span>
	<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>


	<span class="k">while</span><span class="p">(</span><span class="n">cap</span><span class="p">.</span><span class="n">isOpened</span><span class="p">()):</span>

		<span class="n">ret</span><span class="p">,</span> <span class="n">img</span> <span class="o">=</span> <span class="n">cap</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
		<span class="n">brightness_value_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s">'brightness'</span><span class="p">])</span>
		<span class="n">blur_value_now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">params</span><span class="p">[</span><span class="s">'blur'</span><span class="p">])</span>
		<span class="n">img</span> <span class="o">=</span> <span class="n">changeBrightness</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">brightness_value_now</span><span class="p">)</span>
		<span class="n">img</span> <span class="o">=</span> <span class="n">changeBlur</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">blur_value_now</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">ret</span> <span class="o">==</span> <span class="bp">True</span><span class="p">:</span>

			<span class="k">if</span> <span class="n">cnt</span> <span class="o">==</span> <span class="n">frames_to_count</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span> <span class="c1"># To avoid divide by 0 we put it in try except
</span>
					<span class="n">fps</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">frames_to_count</span><span class="o">/</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">st</span><span class="p">))</span>
					<span class="n">st</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
					<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
				<span class="k">except</span><span class="p">:</span>
					<span class="k">pass</span>

			<span class="n">cnt</span><span class="o">+=</span><span class="mi">1</span>

			<span class="n">img</span> <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">640</span><span class="p">)</span>

			<span class="n">text</span>  <span class="o">=</span>  <span class="s">'FPS: '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">fps</span><span class="p">)</span>
			<span class="n">img</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">222</span><span class="p">))</span>
			<span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%d %b %Y %H.%M.%S %p"</span><span class="p">))</span>
			<span class="n">img</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">190</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">228</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">222</span><span class="p">))</span>
			<span class="n">text</span>  <span class="o">=</span>  <span class="sa">f</span><span class="s">"Brightness: </span><span class="si">{</span><span class="n">brightness_value_now</span><span class="si">}</span><span class="s">"</span>
			<span class="n">img</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">210</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
			<span class="n">text</span>  <span class="o">=</span>  <span class="sa">f</span><span class="s">'Blur: </span><span class="si">{</span><span class="n">blur_value_now</span><span class="si">}</span><span class="s">'</span>
			<span class="n">img</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">490</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">210</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
			<span class="n">frame</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imencode</span><span class="p">(</span><span class="s">'.JPEG'</span><span class="p">,</span> <span class="n">img</span><span class="p">,[</span><span class="n">cv2</span><span class="p">.</span><span class="n">IMWRITE_JPEG_QUALITY</span><span class="p">,</span><span class="mi">20</span><span class="p">])[</span><span class="mi">1</span><span class="p">].</span><span class="n">tobytes</span><span class="p">()</span>
			<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.016</span><span class="p">)</span>
			<span class="k">yield</span> <span class="p">(</span><span class="sa">b</span><span class="s">'--frame</span><span class="se">\r\n</span><span class="s">'</span><span class="sa">b</span><span class="s">'Content-Type: image/jpeg</span><span class="se">\r\n\r\n</span><span class="s">'</span> <span class="o">+</span> <span class="n">frame</span> <span class="o">+</span> <span class="sa">b</span><span class="s">'</span><span class="se">\r\n</span><span class="s">'</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">break</span>


<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/res'</span><span class="p">,</span><span class="n">methods</span> <span class="o">=</span> <span class="p">[</span><span class="s">'POST'</span><span class="p">,</span><span class="s">'GET'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">res</span><span class="p">():</span>
	<span class="k">global</span> <span class="n">result</span>
	<span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
		<span class="n">result</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">form</span><span class="p">.</span><span class="n">to_dict</span><span class="p">()</span>
		<span class="k">return</span> <span class="n">render_template</span><span class="p">(</span><span class="s">"results.html"</span><span class="p">,</span><span class="n">result</span> <span class="o">=</span> <span class="n">result</span><span class="p">)</span>

<span class="o">@</span><span class="n">app</span><span class="p">.</span><span class="n">route</span><span class="p">(</span><span class="s">'/results'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">video_feed</span><span class="p">():</span>
	<span class="k">global</span> <span class="n">result</span>
	<span class="n">params</span><span class="o">=</span> <span class="n">result</span>
	<span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">pyshine_process</span><span class="p">(</span><span class="n">params</span><span class="p">),</span><span class="n">mimetype</span><span class="o">=</span><span class="s">'multipart/x-mixed-replace; boundary=frame'</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">app</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="s">'192.168.1.104'</span><span class="p">,</span><span class="n">port</span><span class="o">=</span><span class="mi">9999</span><span class="p">,</span><span class="n">threaded</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

</code></pre></div></div>

<h3 id="indexhtml-1">index.html</h3>

<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="cp">&lt;!DOCTYPE html&gt;</span>

<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;title&gt;</span>PyShine streaming video application <span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;h1&gt;</span>Please input the parameters (0 to 100): <span class="nt">&lt;/h1&gt;</span>
	<span class="nt">&lt;form</span> <span class="na">action = </span><span class="s">"http://192.168.1.104:9999/res"</span> <span class="na">method = </span><span class="s">"POST"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;table&gt;</span>
		<span class="nt">&lt;tr&gt;</span>
		  <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"right"</span><span class="nt">&gt;</span>Brightness:<span class="nt">&lt;/td&gt;</span>
		  <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"brightness"</span> <span class="na">value=</span><span class="s">"1"</span> <span class="nt">/&gt;&lt;/td&gt;</span>
		<span class="nt">&lt;/tr&gt;</span>
		<span class="nt">&lt;tr&gt;</span>
		  <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"right"</span><span class="nt">&gt;</span>Blur:<span class="nt">&lt;/td&gt;</span>
		  <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"left"</span><span class="nt">&gt;&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">name=</span><span class="s">"blur"</span> <span class="na">value=</span><span class="s">"0"</span> <span class="nt">/&gt;&lt;/td&gt;</span>
		<span class="nt">&lt;/tr&gt;</span>
		 <span class="nt">&lt;tr&gt;</span>
		 <span class="nt">&lt;td&gt;&lt;/td&gt;</span>
		  <span class="nt">&lt;td</span> <span class="na">align=</span><span class="s">"right"</span><span class="nt">&gt;&lt;input</span> <span class="na">type = </span><span class="s">"submit"</span> <span class="na">value = </span><span class="s">"submit"</span> <span class="nt">/&gt;&lt;/td&gt;</span>
		<span class="nt">&lt;/tr&gt;</span>
		<span class="nt">&lt;/table&gt;</span>
	<span class="nt">&lt;/form&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>


</code></pre></div></div>

<h3 id="resultshtml-1">results.html</h3>

<p>!<img src="https://www.pyshine.com/assets/img/posts/resultshtml.png" alt="resultshtml" /></p>

<p>Please do comment, if you like this tutorial, also if have question or suggestions.</p>



          <!-- Syntax Highlighting -->
          <link href="/assets/css/syntax.css" rel="stylesheet">
          <script src="/assets/scripts/copyCode.js" async></script>

          <!-- Ads -->
          <section aria-label="Advertisements" class="ads mt-4">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-2976211678184829"
                 data-ad-slot="7658460605"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          </section>

        </article>

      </div>

      <!-- Post Navigation -->
      <nav class="post-navigation controls__inner mt-5" aria-label="Post navigation">
        <div class="controls__item prev">
          
            <span>Previous</span>
            <a href="/Working-with-multiple-threads-in-PyQt5/" rel="prev">
              Working with multiple threads in PyQt5
            </a>
          
        </div>

        <div class="controls__item next">
          
            <span>Next</span>
            <a href="/Audio-plot-in-five-llines/" rel="next">
              How to get audio frames from the micr...
            </a>
          
        </div>
      </nav>

      <!-- Disqus -->
      
        <section class="comments mt-5" aria-label="Comments Section">
          
<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = 'https://www.pyshine.com/How-to-quickly-deploy-flask-application-for-video/';
this.page.identifier = 'https://www.pyshine.com/How-to-quickly-deploy-flask-application-for-video/';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://https-py2ai-github-io.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the comments.</noscript>


        </section>
      

    </main>

    <footer class="footer">
  <div class="container">
    <nav class="social">
      
      
      
    </nav>
    <span>&copy; 2026 PyShine. All rights reserved.</span>
  </div>
</footer>
<script async src="/assets/js/bundle.js"></script>

<script async>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').then(function( registration ) {
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    })
    .catch(function(error) {
      console.log('ServiceWorker registration failed: ', error);
    });
  }
</script>



    <!-- MathJax -->
    
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
>
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://vincenttam.github.io/javascripts/MathJaxLocal.js"
>
</script>



    <!-- Ads -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    <!-- SIDEBAR TOC SCRIPT -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
      const toc = document.getElementById("toc-list");
      const headings = document.querySelectorAll(
        ".post-content h2:not(.no-toc), .post-content h3:not(.no-toc)"
      );
      if (!toc || headings.length === 0) return;

      const ul = document.createElement("ul");
      headings.forEach(h => {
        const id = h.id || h.textContent.trim().toLowerCase().replace(/\s+/g, "-");
        h.id = id;

        const li = document.createElement("li");
        if (h.tagName === "H3") li.style.marginLeft = "1rem";

        li.innerHTML = `<a href="#${id}">${h.textContent}</a>`;
        ul.appendChild(li);
      });
      toc.appendChild(ul);
    });
    </script>

    <!-- INLINE TOC SCRIPT -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
      const tocTarget = document.getElementById("inline-toc-list");
      const headings = document.querySelectorAll(
        ".post-content h2:not(.no-toc), .post-content h3:not(.no-toc)"
      );
      if (!tocTarget || headings.length === 0) return;

      const ul = document.createElement("ul");
      headings.forEach(h => {
        const id = h.id || h.textContent.trim().toLowerCase().replace(/\s+/g, "-");
        h.id = id;

        const li = document.createElement("li");
        if (h.tagName === "H3") li.style.marginLeft = "1rem";

        li.innerHTML = `<a href="#${id}">${h.textContent}</a>`;
        ul.appendChild(li);
      });
      tocTarget.appendChild(ul);
    });
    </script>

    <!-- INLINE TOC STYLES -->
    <style>
      .inline-toc-box {
        background: #D4EDFD;
        padding: 15px 20px;
        border-radius: 10px;
        margin-bottom: 25px;
        border: 1px solid #e0e0e0;
      }
      .inline-toc-box ul {
        margin: 0;
        padding-left: 18px;
      }
      .inline-toc-box li {
        margin-bottom: 6px;
      }
    </style>

  </body>
</html>


