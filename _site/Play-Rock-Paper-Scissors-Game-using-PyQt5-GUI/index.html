

  <!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/Article">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Canonical URL - redirect www to non-www -->
  <link rel="canonical" href="https://pyshine.com/Play-Rock-Paper-Scissors-Game-using-PyQt5-GUI/">

  <!-- Pinterest & Google verification -->
  <meta name="p:domain_verify" content="fb68a8459fe32b8b072bcd5cc620d125"/>
  <meta name="google-site-verification" content="WAkFPi5cvufClnQetgIl0STmvvwHhVf8jfyENFWhsxU" />
  <meta name="google-site-verification" content="g2pFZlv-92XQD67BPgiVHsvZ4TZH13Ucvmmvvv36kU4" />

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Play Rock Paper Scissors Game using PyQt5 GUI | PyShine</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Play Rock Paper Scissors Game using PyQt5 GUI" />
<meta name="author" content="PyShine Team" />
<meta property="og:locale" content="en" />
<meta name="description" content="This tutorial is about making a GUI in PyQt5 using OpenCV and Keras to play Rock Paper Scissors Game." />
<meta property="og:description" content="This tutorial is about making a GUI in PyQt5 using OpenCV and Keras to play Rock Paper Scissors Game." />
<link rel="canonical" href="http://localhost:4000/Play-Rock-Paper-Scissors-Game-using-PyQt5-GUI/" />
<meta property="og:url" content="http://localhost:4000/Play-Rock-Paper-Scissors-Game-using-PyQt5-GUI/" />
<meta property="og:site_name" content="PyShine" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-29T00:00:00+08:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Play Rock Paper Scissors Game using PyQt5 GUI" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"PyShine Team"},"dateModified":"2021-01-29T00:00:00+08:00","datePublished":"2021-01-29T00:00:00+08:00","description":"This tutorial is about making a GUI in PyQt5 using OpenCV and Keras to play Rock Paper Scissors Game.","headline":"Play Rock Paper Scissors Game using PyQt5 GUI","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/Play-Rock-Paper-Scissors-Game-using-PyQt5-GUI/"},"name":"{{ page.title escape }}","url":"http://localhost:4000/Play-Rock-Paper-Scissors-Game-using-PyQt5-GUI/"}</script>
<!-- End Jekyll SEO tag -->
  <!-- This will generate the canonical link automatically -->

  <script src="https://analytics.ahrefs.com/analytics.js" data-key="Im0K82YsmEDy08+6wyUIZA" async></script>

  <!-- Favicon & App Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icons/apple-touch-icon.png?v=qA3OXqyw77">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/icons/favicon-32x32.png?v=qA3OXqyw77">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/icons/favicon-16x16.png?v=qA3OXqyw77">
  <link rel="manifest" href="/assets/img/icons/manifest.json?v=qA3OXqyw77">
  <link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg?v=qA3OXqyw77" color="#5bbad5">
  <link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77">
  <!--[if IE]><link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77"><![endif]-->

  <!-- App & Theme Info -->
  <meta name="apple-mobile-web-app-title" content="Sleek">
  <meta name="application-name" content="Sleek">
  <meta name="msapplication-config" content="/assets/img/icons/browserconfig.xml?v=qA3OXqyw77">
  <meta name="theme-color" content="#ffffff">

  
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-TCVFBKF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GTM-TCVFBKF');
</script>

  

  <!-- Critical CSS Inline -->
  <style class="inlineCSS">
    h1{color:#313237;margin-top:0;margin-bottom:.5rem}.dark-bg{background-color:#19d319}@media (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:last-of-type,.post-card:nth-child(2n+2){margin-right:0}}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figure,main{display:block}figure{margin:1em 40px}a{background-color:transparent;-webkit-text-decoration-skip:objects}img{border-style:none}svg:not(:root){overflow:hidden}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}body{-webkit-overflow-scrolling:touch}*,::after,::before{-webkit-box-sizing:inherit;box-sizing:inherit}.site{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.site__content{-webkit-box-flex:1;-ms-flex:1;flex:1}img{max-width:100%;height:auto;width:auto;vertical-align:middle}figure{margin:0}body{background-color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Hiragino Sans GB","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;font-size:1rem;line-height:1.5;color:#343851;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%}p{margin-top:0;margin-bottom:1.25rem}h1,h2{color:#313237;margin-top:0;margin-bottom:.5rem}a{color:#277cea;text-decoration:none;border-bottom:1px dashed #277cea}.blur{background:#fff;filter:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"><filter id="filter"><feGaussianBlur stdDeviation="16" /></filter></svg>#filter');-webkit-filter:blur(1rem);filter:blur(1rem)}.container{padding:0 20px}@media (min-width:0){.container{max-width:auto;margin:0 auto}}@media (min-width:36em){.container{max-width:540px;margin:0 auto}}@media (min-width:48em){.container{max-width:720px;margin:0 auto}}@media (min-width:62em){.container{max-width:960px;margin:0 auto}}@media (min-width:75em){.container{max-width:1170px;margin:0 auto}}.header{background-color:#fff;color:#343851;position:absolute;z-index:4;width:100%;top:0;left:0;will-change:transform;-webkit-transform:translateY(0);transform:translateY(0)}.header a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:0}.header__logo{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;overflow:hidden;padding:19px 0;margin-right:1.25rem;outline:0;border-bottom:0;color:#313237}.header__logo .header__logo--container{width:58px}.header__logo .header__logo--container .logo{fill:currentColor}.header__inner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3.75em;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header__links{padding-bottom:.5rem;display:none;position:absolute;top:3.75em;left:0;width:100%;height:auto;background:#fff}.header__link{color:#343851;padding:.938rem 0;border-top:1px solid #ededed}.header__toggle{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:44px;height:100%;background-color:transparent;padding-left:1.25rem}.header__toggle span{display:block;position:relative;margin-top:4px;background-color:#343851;width:100%;height:2px;border-radius:1px}.header__toggle span:first-child{margin-top:0}@media (min-width:62em){.header__toggle{display:none;visibility:hidden}.header__links{position:static;padding:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;visibility:visible;width:auto;height:100%}.header__links-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;padding:0}.header__link{position:relative;padding:.938rem 1rem;border:0;height:100%}.header__link::after{content:"";display:block;position:absolute;left:0;bottom:0;height:3px;width:100%;-webkit-transform:scaleX(0);transform:scaleX(0);background:#277cea}}.post-card{display:block;position:relative;width:100%;min-height:250px;border-radius:4px;overflow:hidden;background-color:#fff;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.08);box-shadow:0 1px 3px rgba(0,0,0,.08);margin-bottom:2.25rem;border-bottom:0}@media (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:0}}@media (min-width:75em){.post-card{width:31.25%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:3.125%}}.post-card__label{position:absolute;top:1.5rem;left:1.5rem;z-index:2}.post-card__thumb{margin:0;background:#fff;position:relative;overflow:hidden}.post-card__thumb::after{content:"";display:block;height:0;width:100%;padding-bottom:56.25%}.post-card__thumb>*{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.post-card__inner{padding:1.875rem 1.25rem .625rem;color:#838c8d}.post-card__header{margin-bottom:.75rem}.post-card__header .post-card__meta{font-size:.875rem}.label{padding:0 10px;margin-bottom:1rem;display:inline-block;line-height:20px;font-size:.75rem;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.8);border:2px solid rgba(255,255,255,.5);border-radius:100px}.hero{margin:3.75rem auto 0;min-height:16.25rem;width:100%;position:relative;background-color:#dde5ea;background-repeat:no-repeat;background-position:50%;background-size:cover}@media (min-width:62em){.hero{margin:0 auto;height:36em}}.hero::before{position:absolute;display:block;content:"";top:0;left:0;width:100%;height:100%;background:rgba(52,56,81,.8)}.hero__wrap{position:absolute;margin:auto;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;color:rgba(255,255,255,.8);width:100%;max-width:90%;z-index:1}.hero__wrap .hero__title{font-size:1.8em;color:#fff}.blog{background-color:#f9f9f9}.post-list{padding-top:2.5em;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}@media (min-width:48em){.hero__wrap{max-width:40em}.hero__wrap .hero__title{padding:1rem 0;font-size:2.625em;line-height:3.125rem}.post-list{padding-top:5em}}
  </style>

  <!-- Main CSS -->
  <link rel="preload" href="/assets/css/main.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/css/main.css"></noscript>

  <script type="text/javascript">
    /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
(function(w){"use strict";if(!w.loadCSS){w.loadCSS=function(){}}
var rp=loadCSS.relpreload={};rp.support=(function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload")}catch(e){ret=!1}
return function(){return ret}})();rp.bindMediaToggle=function(link){var finalMedia=link.media||"all";function enableStylesheet(){link.media=finalMedia}
if(link.addEventListener){link.addEventListener("load",enableStylesheet)}else if(link.attachEvent){link.attachEvent("onload",enableStylesheet)}
setTimeout(function(){link.rel="stylesheet";link.media="only x"});setTimeout(enableStylesheet,3000)};rp.poly=function(){if(rp.support()){return}
var links=w.document.getElementsByTagName("link");for(var i=0;i<links.length;i++){var link=links[i];if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){link.setAttribute("data-loadcss",!0);rp.bindMediaToggle(link)}}};if(!rp.support()){rp.poly();var run=w.setInterval(rp.poly,500);if(w.addEventListener){w.addEventListener("load",function(){rp.poly();w.clearInterval(run)})}else if(w.attachEvent){w.attachEvent("onload",function(){rp.poly();w.clearInterval(run)})}}
if(typeof exports!=="undefined"){exports.loadCSS=loadCSS}
else{w.loadCSS=loadCSS}}(typeof global!=="undefined"?global:this))

  </script>

  <!-- MathJax -->
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>


  <body class="site" itemscope itemtype="https://schema.org/WebPage">

    
      <!-- Google Tag Manager (noscript) -->
      <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TCVFBKF"
                height="0" width="0" style="display:none;visibility:hidden"></iframe>
      </noscript>
      <!-- End Google Tag Manager -->
    

    <header class="header"
  itemscope
  itemtype="http://schema.org/SiteNavigationElement"
  aria-label="Main navigation">

  <div class="container">
    <div class="header__inner">

      <!-- Logo -->
      <a class="header__logo" href="/">
        <div class="header__logo--container">
          <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<g>
	<path d="M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"></path>

	
	
</g>
</svg>

        </div>
      </a>

      <!-- Navigation -->
      <nav class="header__links">
        <div class="header__links-wrapper">

          
            
              <a class="header__link" href="/">
                Home
              </a>
            
          
            
              <a class="header__link" href="/categories">
                Posts
              </a>
            
          
            

            <!-- Applications Dropdown -->
            <div class="header__dropdown">
              <span class="header__link header__dropdown-toggle">
                Applications
                <span class="dropdown-arrow">â–¾</span>
              </span>

              <div class="header__dropdown-menu">
                
                  <a class="header__dropdown-item"
                     href="/photo_correction">
                    Online Photo Correction
                  </a>
                
                  <a class="header__dropdown-item"
                     href="/photo">
                    Online Passport Photo 20KB
                  </a>
                
                  <a class="header__dropdown-item"
                     href="/finger.html">
                    Online Fingers Scanner
                  </a>
                
                  <a class="header__dropdown-item"
                     href="/avatars">
                    Online Make Avatars
                  </a>
                
                  <a class="header__dropdown-item"
                     href="/kanban/debounce.html">
                    Online Reminder App
                  </a>
                
                  <a class="header__dropdown-item"
                     href="/converter.html">
                    Online Image Resize
                  </a>
                
              </div>
            </div>

            
          
            

            <!-- Applications Dropdown -->
            <div class="header__dropdown">
              <span class="header__link header__dropdown-toggle">
                Games
                <span class="dropdown-arrow">â–¾</span>
              </span>

              <div class="header__dropdown-menu">
                
                  <a class="header__dropdown-item"
                     href="/games/snake">
                    Snake Game
                  </a>
                
                  <a class="header__dropdown-item"
                     href="/games/flappy-bird">
                    Flappy Bird
                  </a>
                
              </div>
            </div>

            
          
            
              <a class="header__link" href="/about">
                About
              </a>
            
          
            
              <a class="header__link" href="/contact">
                Contact
              </a>
            
          
            
              <a class="header__link" href="/privacy">
                Privacy Policy
              </a>
            
          
            
              <a class="header__link" href="/disclaimer">
                Disclaimer
              </a>
            
          

        </div>
      </nav>

      <!-- Language Switcher -->
      

      <!-- Mobile Toggle -->
      <div class="header__toggle">
        <span></span><span></span><span></span>
      </div>

    </div>
  </div>

<style>
/* ==================================================
   ðŸ”’ HEADER â€” ALWAYS VISIBLE, FULL WIDTH COLOR
================================================== */
.header{
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;           /* full width */
  z-index: 10000;
  background: #FFFFFF;    /* uniform header background */
  box-shadow: 0 2px 12px rgba(0,0,0,.35);
  transform: none !important;
  transition: none !important;
}

/* Lock height to avoid reflow */
.header__inner{
  min-height: 72px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* Prevent content hiding under fixed header */
body{
  padding-top: 72px;
}

/* ===============================
   NAV BASE
=============================== */
.header__links-wrapper{
  display:flex;
  align-items:center;
  gap:1.5rem;
}

.header__link,
.header__dropdown-toggle{
  display:inline-flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
  font-size:20px;
  font-weight:500;
}

/* ===============================
   DROPDOWN
=============================== */
.header__dropdown{
  position:relative;
}

.dropdown-arrow{
  font-size:1.4em;
  transition:transform .2s ease;
}

.header__dropdown:hover .dropdown-arrow{
  transform:rotate(180deg);
}

.header__dropdown-menu{
  position:absolute;
  top:100%;
  left:0;
  min-width:220px;
  background:#121212;
  border:1px solid #333;
  border-radius:10px;
  padding:6px 0;
  display:none;
  z-index:9999;
}

.header__dropdown:hover .header__dropdown-menu{
  display:block;
}

.header__dropdown-item{
  display:block;
  padding:10px 16px;
  color:#eaeaea;
  text-decoration:none;
}

.header__dropdown-item:hover{
  background:#1f1f1f;
}

/* ===============================
   MOBILE
=============================== */
@media (max-width:768px){

  body{
    padding-top: 64px;
  }

  .header__inner{
    min-height: 64px;
  }

  .header__links-wrapper{
    flex-direction:column;
    align-items:stretch;
    gap:0;
  }

  .header__dropdown-toggle{
    justify-content:space-between;
    padding:14px 16px;
  }

  .header__dropdown-menu{
    position:static;
    display:none;
    background:#0f0f0f;
    border:none;
  }

  .header__dropdown:hover .header__dropdown-menu{
    display:block;
  }

  .header__dropdown-item{
    padding:14px 20px;
    background:#1a1a1a;
    border-top:1px solid #2a2a2a;
    font-size:15px;
  }
}

/* ===============================
   LANGUAGE SWITCHER
=============================== */
.header__lang-switcher{
  display:inline-flex;
  gap:.5rem;
  align-items:center;
  font-size:1.3rem;
  margin-left:1rem;
}
.lang-flag.active{ text-decoration:underline }
.lang-flag.disabled{ opacity:.5; filter:grayscale(100%) }

</style>
</header>


    
      <div class="hero lazyload"
           data-bg="http://localhost:4000/assets/img/posts/pyqtRPS.jpg"
           role="img"
           aria-label="Play Rock Paper Scissors Game using PyQt5 GUI">
    
        <div class="hero__wrap">

          
            <div class="hero__categories">
              
                <a class="label"
                   href="/categories/#GUI tutorial series"
                   aria-label="Category: GUI tutorial series">
                   GUI tutorial series
                </a>
                
              
            </div>
          

          <h1 class="hero__title" itemprop="headline">Play Rock Paper Scissors Game using PyQt5 GUI</h1>

          <p class="hero__meta">
            <time datetime="2021-01-29T00:00:00+08:00" itemprop="datePublished">
              29 Jan 2021
            </time>
            &nbsp;Â·&nbsp;
            
            <span itemprop="timeRequired">
              
                56 mins read
              
            </span>
          </p>
        </div>
      </div>

    <main class="site__content" role="main">
      <div class="container post-layout">

        <!-- SIDEBAR TOC -->
        <aside class="post-toc" id="post-toc">
          <h3 class="no-toc">Contents</h3>
          <nav id="toc-list"></nav>
        </aside>

        <!-- MAIN CONTENT -->
        <article class="post-content"
                 itemprop="articleBody"
                 itemscope itemtype="https://schema.org/Article">

          <!-- INLINE TOC -->
          <div id="inline-toc" class="inline-toc-box">
            <h3 class="no-toc">Contents</h3>
            <nav id="inline-toc-list"></nav>
          </div>

          <p>Hi and welcome! It is part 14 of the PyQt5 learning series. Today we will design a GUI to play Rock Paper Scissors (RPS) game. Most of you already have known or played this game. 
But letâ€™s make it straightforward for those who are new to this game. It is a priority-based hand playing game between
two people, where each player simultaneously makes three shapes with a hand. These shapes include a rock (or stone with a closed fist), a paper (with all fingers stretched),
and scissors (like two fingers making a victory sign).</p>

<p>Possible outcomes of each draw of the game are either win/loss for one player or a tie for both. The decision
is made based on predecided priorities. The rock will beat scissors, the scissors will beat paper, and the paper will beat rock (because it can cover the rock). If
both players select the same sign, there will be a tie. This game is often played as a proper choosing method between two people, similar to a coinâ€™s flipping. Alright, from the machine learning perspectives, we have
some questions. If one player is human and another is a computer, how can one let computers know a human playerâ€™s choice? How to let a computer decide a choice randomly?
How to make this game in a single graphical user interface (GUI)?</p>

<p>To answer these questions, we will develop a GUI. The computer will get a dataset from the user about the possible shapes. With the help of deep learning neural network, it will learn to classify during the game (each of the possible shapes in an image frame from the video or a live camera). The computer will simultaneously
select and decide the winner by knowing both preferences (from computer and human). The GUI will display the name of the winner using the above-described priorities.</p>

<p>The critical points of this GUI include:</p>

<ol>
  <li>Acquire the images from a user webcam using OpenCV; the amount of images data belonging to each class is given by the user besides the labelâ€™s name.</li>
  <li>Train a deep neural network model using Keras and generate an output .h5 model file. The accuracy of prediction depends on various factors such as a clean dataset, number of Epochs, etc.</li>
  <li>Load the trained .h5 model and start playing the game. Notice that this modelâ€™s purpose is only to classify the image as Rock, Paper, Scissors, or None.</li>
</ol>

<p>Please install latest version 0.0.7 of pyshine as:
<code class="language-plaintext highlighter-rouge">pip3 install pyshine==0.0.7</code></p>

<p>We will proceed in several steps to finish this GUI project. First letâ€™s have look at the structure of this GUI project.</p>

<h1 id="1-structure-of-project-directory">1. Structure of project directory</h1>
<p>In the main project directory <code class="language-plaintext highlighter-rouge">14-Play Rock Paper Scissors Game using PyQt5 GUI</code> we have these items:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>14-Play Rock Paper Scissors Game using PyQt5 GUI/
â”œâ”€â”€ dataset/
â”‚   â”œâ”€â”€ None/
â”‚   â”‚   â”œâ”€â”€ 1.jpg
â”‚   â”‚   â”œâ”€â”€ 2.jpg
â”‚   â”‚   â”œâ”€â”€ 3.jpg
|   |   |...... 
|   |   |...... 
â”‚   â”‚   â””â”€â”€ 400.jpg
â”‚   â”œâ”€â”€ Paper/
â”‚   â”‚   â”œâ”€â”€ 1.jpg
â”‚   â”‚   â”œâ”€â”€ 2.jpg
â”‚   â”‚   â”œâ”€â”€ 3.jpg
|   |   |...... 
|   |   |...... 
â”‚   â”‚   â””â”€â”€ 400.jpg
â”‚   â”œâ”€â”€ Rock/
â”‚   â”‚   â”œâ”€â”€ 1.jpg
â”‚   â”‚   â”œâ”€â”€ 2.jpg
â”‚   â”‚   â”œâ”€â”€ 3.jpg
|   |   |...... 
|   |   |...... 
â”‚   â”‚   â””â”€â”€ 400.jpg
â”‚   â””â”€â”€ Scissors/
â”‚   |   â”œâ”€â”€ 1.jpg
â”‚   |   â”œâ”€â”€ 2.jpg
â”‚   â”‚   â”œâ”€â”€ 3.jpg
|   |   |...... 
|   |   |...... 
â”‚   â”‚   â””â”€â”€ 400.jpg
â”œâ”€â”€ images/
â”‚   â”œâ”€â”€ Paper.jpg
â”‚   â”œâ”€â”€ Rock.jpg
â”‚   â”œâ”€â”€ Scissors.jpg
â”‚   â””â”€â”€ Try.png
â”œâ”€â”€ out.avi
â”œâ”€â”€ RPS.h5
â””â”€â”€ RPS.py
 
</code></pre></div></div>

<ol>
  <li><code class="language-plaintext highlighter-rouge">dataset</code> directory: This will be generated automatically, once we press the Acquire data button on the GUI. Simply
  provide the label and the number of samples for each label. The label will be used to generate a subdirectory with the 
  same name as label. So please use it accordingly. The <code class="language-plaintext highlighter-rouge">dataset</code> should contain the acquired data (&gt;100 files) each in separate subdirectory as:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>(a) ```None```: any blank image except the possible shapes like rock paper or scissors. 

(b) ```Paper```: The images containing paper shaped hand with a plane background.

(c) ```Rock```: The images containing rock shaped hand with a plane background.
        
(d) ```Scissors```: The images containing scissors shaped hand with a plane background.
</code></pre></div></div>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">images</code> directory: contains images that the computer will show for its decisions on the GUI.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">out.avi</code> file: A sample avi video file for the demonstration purpose.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">RPS.h5</code>: A keras trained model to predict the shape in an input image.</p>
  </li>
</ol>

<p>The <code class="language-plaintext highlighter-rouge">images</code>, <code class="language-plaintext highlighter-rouge">out.avi</code> and <code class="language-plaintext highlighter-rouge">RPS.h5</code> are available here: https://drive.google.com/file/d/1-nxrMplXegj91ls6XLjqcwA7LeJhKP50/view?usp=sharing</p>

<ol>
  <li><code class="language-plaintext highlighter-rouge">RPS.py</code>: Our main code that will run all things in the GUI (availble at the end).</li>
</ol>

<p>In a project directory to run the GUI simply use:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  python RPS.py
</code></pre></div></div>
<p>We will now proceed to explain the details.</p>

<h2 id="-2-importing-essentials"># 2. Importing essentials</h2>
<p>We can install them using pip install and then import them as:</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QFileDialog</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="n">QImage</span>
<span class="kn">import</span>  <span class="nn">imutils</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">cv2</span><span class="p">,</span><span class="n">os</span>
<span class="kn">import</span> <span class="nn">pyshine</span> <span class="k">as</span> <span class="n">ps</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span> 
<span class="kn">from</span> <span class="nn">keras.models</span> <span class="kn">import</span> <span class="n">load_model</span>
<span class="kn">from</span> <span class="nn">keras.utils</span> <span class="kn">import</span> <span class="n">np_utils</span>
<span class="kn">from</span> <span class="nn">keras.callbacks</span> <span class="kn">import</span> <span class="n">Callback</span>
<span class="kn">from</span> <span class="nn">keras.preprocessing.image</span> <span class="kn">import</span> <span class="n">ImageDataGenerator</span>
<span class="kn">from</span> <span class="nn">keras.optimizers</span> <span class="kn">import</span> <span class="n">Adam</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">keras.utils</span> <span class="kn">import</span> <span class="n">to_categorical</span>

</code></pre></div></div>
<h2 id="-3-a-global-epoch-counter"># 3. A global Epoch counter</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">global</span> <span class="n">epoch_cnt</span>
<span class="n">epoch_cnt</span> <span class="o">=</span> <span class="mi">0</span>
</code></pre></div></div>
<p>Here we have the <code class="language-plaintext highlighter-rouge">epoch_cnt</code> that will be used in the training process to update the progress bar.</p>

<h2 id="-4-pyshine_callback-for-the-end-of-each-training-epoch"># 4. PyShine_Callback for the end of each training Epoch</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">PyShine_Callback</span><span class="p">(</span><span class="n">Callback</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">on_epoch_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">epoch</span><span class="p">,</span> <span class="n">logs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
		<span class="s">""" This function will continue to update the current running Epoch count """</span>
		<span class="k">global</span> <span class="n">epoch_cnt</span>
		<span class="n">epoch_cnt</span><span class="o">+=</span><span class="mi">1</span>
</code></pre></div></div>
<p>This class will continue to update the <code class="language-plaintext highlighter-rouge">epoch_cnt</code> counter for the display purpose of progress bar.</p>

<h2 id="-5-main-window-class"># 5. Main window class</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Ui_MainWindow</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">)</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
		<span class="p">...</span>
		<span class="p">...</span>
		<span class="p">...</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">W</span> <span class="o">=</span> <span class="mi">28</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">H</span> <span class="o">=</span> <span class="mi">28</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">winner</span><span class="o">=</span><span class="s">'None'</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div>
<p>Here after initializing the setupUi for the MainWindow we will initialize all the parameters of the GUI just like we did in the
previous PyQt5 tutorials on pyshine.com.</p>

<h2 id="-6-input-modes-functions"># 6. Input modes functions</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">selectCam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function will set the camera mode to True
	so that webcam frames can be played
	"""</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">cam</span> <span class="o">=</span> <span class="bp">True</span>

<span class="k">def</span> <span class="nf">selectVideo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function will set the camera mode to False
	so that video file can be played
	"""</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">cam</span> <span class="o">=</span> <span class="bp">False</span>
</code></pre></div></div>
<p>The above two functions will be used to select the mode, either video input or camera input.</p>

<h2 id="-7-start-the-training"># 7. Start the Training</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">start_training</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">"""
	This function will initiate two threads once the training is required
	1. run the train_model function
	2. run the progress bar which will display the epochs in terms of percentage
	"""</span>
	<span class="k">global</span> <span class="n">epoch_cnt</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">th</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">train_model</span><span class="p">,</span><span class="n">args</span> <span class="o">=</span> <span class="p">())</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">th</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>	
	<span class="bp">self</span><span class="p">.</span><span class="n">update_train_progress</span><span class="p">()</span>
</code></pre></div></div>
<p>The above function will start the training process.</p>

<h2 id="-8-load-the-trained-model"># 8. Load the trained model</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">loadModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">"""
	This function will open a file dialog to let user load the model (.h5 file only)
	after that set the status message
	"""</span>
	<span class="n">model_filename</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="p">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="s">"Keras (*.h5)"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
	<span class="k">try</span><span class="p">:</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">loaded_model</span> <span class="o">=</span> <span class="n">load_model</span><span class="p">(</span><span class="n">model_filename</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">test</span> <span class="o">=</span> <span class="bp">True</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: Model loaded! Press Start"</span><span class="p">)</span>
	<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
	<span class="k">pass</span>
	<span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: {}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

</code></pre></div></div>
<p>The above function will be used to load the .h5 file using a file dialog. This step is important before starting the game.</p>

<h2 id="-9-find-the-winner"># 9. Find the winner</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">find_winner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">predicted_name</span><span class="p">,</span> <span class="n">pc_selected_name</span><span class="p">):</span>
	<span class="s">"""
	This function will input the predicted_name (user image predicted by the model) and
	pc_selected_name (random guess of the pc) and then decided by returning the winner based on
	standard priority of the Rock Paper Scissors Game :)
	"""</span>
	<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">==</span> <span class="n">pc_selected_name</span><span class="p">:</span>
		<span class="k">return</span> <span class="s">"Tie"</span>

	<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">==</span> <span class="s">"Rock"</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Scissors"</span><span class="p">:</span>
			<span class="k">return</span> <span class="s">"User"</span>
		<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Paper"</span><span class="p">:</span>
			<span class="k">return</span> <span class="s">"Computer"</span>

	<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">==</span> <span class="s">"Paper"</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Rock"</span><span class="p">:</span>
			<span class="k">return</span> <span class="s">"User"</span>
		<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Scissors"</span><span class="p">:</span>
			<span class="k">return</span> <span class="s">"Computer"</span>

	<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">==</span> <span class="s">"Scissors"</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Paper"</span><span class="p">:</span>
			<span class="k">return</span> <span class="s">"User"</span>
		<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Rock"</span><span class="p">:</span>
			<span class="k">return</span> <span class="s">"Computer"</span>
</code></pre></div></div>
<p>Once both players have made a choice, the human choice will be obtained via trained model and we will call it <code class="language-plaintext highlighter-rouge">predicted_name</code>.
The above function will use another <code class="language-plaintext highlighter-rouge">pc_selected_name</code> to return the winner or a Tie.</p>

<h2 id="-10-update-the-progress-bar-to-show-training-progress"># 10. Update the progress bar to show training progress</h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">update_train_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function is responsible to update the progress bar to show training percentage """</span>

	<span class="k">print</span><span class="p">(</span><span class="s">'Training started...'</span><span class="p">)</span>
	<span class="k">global</span> <span class="n">epoch_cnt</span>

	<span class="n">prev</span><span class="o">=</span><span class="mi">0</span>

	<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
	<span class="k">if</span> <span class="n">epoch_cnt</span><span class="o">&gt;</span><span class="n">prev</span><span class="p">:</span>
	<span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">epoch_cnt</span><span class="o">/</span><span class="bp">self</span><span class="p">.</span><span class="n">EPOCHS</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">progressBar_2</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
	<span class="n">prev</span> <span class="o">=</span> <span class="n">epoch_cnt</span>
	<span class="n">QtWidgets</span><span class="p">.</span><span class="n">QApplication</span><span class="p">.</span><span class="n">processEvents</span><span class="p">()</span>	
	<span class="k">if</span> <span class="n">epoch_cnt</span><span class="o">==</span><span class="bp">self</span><span class="p">.</span><span class="n">EPOCHS</span><span class="p">:</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">progressBar_2</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
	<span class="k">break</span>
</code></pre></div></div>
<p>The above function will update the progress bar 2 once the epoch is incremented. Notice how we map the EPOCHS to a percentage.</p>

<h2 id="-11-mapping-and-demapping-the-labels"># 11. Mapping and Demapping the labels</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">mapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">labels</span><span class="p">):</span>
	<span class="s">""" This function will map the string labels in self.CLASS_DICT
		to their corresponding integer values """</span>
	<span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">CLASS_DICT</span><span class="p">[</span><span class="n">labels</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">demapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">val</span><span class="p">):</span>
	<span class="s">""" This function will map the integer values in self.REV_CLASS_DICT
	to their corresponding string labels """</span>
	<span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">REV_CLASS_DICT</span><span class="p">[</span><span class="n">val</span><span class="p">]</span>
</code></pre></div></div>
<p>The above two functions will perform mapping to let the machine learn the repective integer for a label. After training,
the demapper will be used to represent the predicted integer to its respective label such as Rock, Paper, Scissors, None.</p>

<h2 id="-12-training-the-model"># 12. Training the model</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">train_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function will call the Keras model and 
	map the data and labels, provide itto the model,
	compile and train to generate a .h5 file
	"""</span>

	<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: Training in progress, please wait!"</span><span class="p">)</span>
	<span class="n">NUM_CLASSES</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">CLASS_DICT</span><span class="p">)</span>

	<span class="n">dataset</span> <span class="o">=</span> <span class="p">[]</span>
	<span class="k">for</span> <span class="n">directory</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMAGES_DATASET</span><span class="p">):</span>
	<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMAGES_DATASET</span><span class="p">,</span> <span class="n">directory</span><span class="p">)</span>
	<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
	<span class="k">continue</span>
	<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
	<span class="k">if</span> <span class="n">item</span><span class="p">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">"."</span><span class="p">):</span>
	<span class="k">continue</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">H</span><span class="p">))</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="s">'float32'</span><span class="p">)</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">/</span><span class="mi">255</span>
	<span class="n">dataset</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="n">img</span><span class="p">,</span> <span class="n">directory</span><span class="p">])</span>

	<span class="n">data</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">dataset</span><span class="p">)</span>
	<span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">mapper</span><span class="p">,</span> <span class="n">labels</span><span class="p">))</span>
	<span class="n">labels</span> <span class="o">=</span> <span class="n">np_utils</span><span class="p">.</span><span class="n">to_categorical</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>


	<span class="p">(</span><span class="n">trainX</span><span class="p">,</span> <span class="n">testX</span><span class="p">,</span> <span class="n">trainY</span><span class="p">,</span> <span class="n">testY</span><span class="p">)</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="c1">## # construct the image generator for data augmentation
</span>	<span class="n">aug</span> <span class="o">=</span> <span class="n">ImageDataGenerator</span><span class="p">(</span><span class="n">rotation_range</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">width_shift_range</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
	<span class="n">height_shift_range</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">shear_range</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">zoom_range</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
	<span class="n">horizontal_flip</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill_mode</span><span class="o">=</span><span class="s">"nearest"</span><span class="p">)</span>


	<span class="n">INIT_LR</span> <span class="o">=</span> <span class="mf">1e-3</span>
	<span class="n">opt</span> <span class="o">=</span> <span class="n">Adam</span><span class="p">(</span><span class="n">lr</span><span class="o">=</span><span class="n">INIT_LR</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="n">INIT_LR</span> <span class="o">/</span> <span class="bp">self</span><span class="p">.</span><span class="n">EPOCHS</span><span class="p">)</span>
	<span class="n">sgd</span> <span class="o">=</span> <span class="n">keras</span><span class="p">.</span><span class="n">optimizers</span><span class="p">.</span><span class="n">SGD</span><span class="p">(</span><span class="n">lr</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">momentum</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">nesterov</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


	<span class="n">model</span> <span class="o">=</span><span class="n">ps</span><span class="p">.</span><span class="n">RPSNET</span><span class="p">.</span><span class="n">build</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">H</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="n">NUM_CLASSES</span><span class="p">)</span>
	<span class="n">model</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span>
	<span class="n">optimizer</span><span class="o">=</span><span class="n">opt</span><span class="p">,</span>
	<span class="n">loss</span><span class="o">=</span><span class="s">'categorical_crossentropy'</span><span class="p">,</span>
	<span class="n">metrics</span><span class="o">=</span><span class="p">[</span><span class="s">'accuracy'</span><span class="p">]</span>
	<span class="p">)</span>

	<span class="n">cl</span> <span class="o">=</span> <span class="n">PyShine_Callback</span><span class="p">()</span> 	
	<span class="n">BS</span> <span class="o">=</span> <span class="mi">32</span>


	<span class="n">H</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">fit_generator</span><span class="p">(</span><span class="n">aug</span><span class="p">.</span><span class="n">flow</span><span class="p">(</span><span class="n">trainX</span><span class="p">,</span> <span class="n">trainY</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">BS</span><span class="p">),</span>
	<span class="n">validation_data</span><span class="o">=</span><span class="p">(</span><span class="n">testX</span><span class="p">,</span> <span class="n">testY</span><span class="p">),</span> <span class="n">steps_per_epoch</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">trainX</span><span class="p">)</span> <span class="o">//</span> <span class="n">BS</span><span class="p">,</span>
	<span class="n">epochs</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">EPOCHS</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">callbacks</span><span class="o">=</span><span class="p">[</span><span class="n">cl</span><span class="p">])</span>
	<span class="k">print</span><span class="p">(</span><span class="s">"Training network..."</span><span class="p">)</span>

	<span class="n">model</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">"RPS.h5"</span><span class="p">)</span>
	<span class="n">K</span><span class="p">.</span><span class="n">clear_session</span><span class="p">()</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: Training finished! Press Load Model"</span><span class="p">)</span>
</code></pre></div></div>
<p>The above function will scan the dataset directory and make the dataset and labels so that it can be used to 
train the model which has CNN architecture especially configured for the Rock Paper Scissors Network (RPSNET).</p>

<h2 id="-13-load-video-or-camera-input-to-start-the-game"># 13. Load video or camera input to start the game</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">loadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function will load the camera device, obtain the image
	and set it to label using the setPhoto function
	"""</span>

	<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="p">:</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">=</span><span class="bp">False</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">'Start'</span><span class="p">)</span>	
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

	<span class="k">else</span><span class="p">:</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">=</span><span class="bp">True</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">'Stop'</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>


	<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">cam</span><span class="p">:</span>
	<span class="n">vid</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

	<span class="k">else</span><span class="p">:</span>

	<span class="n">video_filename</span> <span class="o">=</span>  <span class="s">'out.avi'</span>
	<span class="n">vid</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="n">video_filename</span><span class="p">)</span>


	<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
	<span class="n">frames_to_count</span><span class="o">=</span><span class="mi">20</span>
	<span class="n">st</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">fps</span><span class="o">=</span><span class="mi">0</span>
	<span class="n">sample_count</span><span class="o">=</span><span class="mi">0</span>
	<span class="n">prev_move</span> <span class="o">=</span> <span class="bp">None</span>
	<span class="k">while</span><span class="p">(</span><span class="n">vid</span><span class="p">.</span><span class="n">isOpened</span><span class="p">()):</span>

	<span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">vid</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
	<span class="k">try</span><span class="p">:</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">image</span>  <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="p">,</span><span class="n">height</span> <span class="o">=</span> <span class="mi">480</span> <span class="p">)</span>
	<span class="k">except</span><span class="p">:</span>
	<span class="k">break</span>



	<span class="k">if</span> <span class="n">cnt</span> <span class="o">==</span> <span class="n">frames_to_count</span><span class="p">:</span>
	<span class="k">try</span><span class="p">:</span> <span class="c1"># To avoid divide by 0 we put it in try except
</span>	<span class="bp">self</span><span class="p">.</span><span class="n">fps</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">frames_to_count</span><span class="o">/</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">st</span><span class="p">))</span> 						
	<span class="n">st</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
	<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
	<span class="k">except</span><span class="p">:</span>
	<span class="k">pass</span>

	<span class="n">cnt</span><span class="o">+=</span><span class="mi">1</span>
	<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">acquire</span><span class="p">:</span>

	<span class="n">roi</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">[</span><span class="mi">80</span><span class="p">:</span><span class="mi">310</span><span class="p">,</span> <span class="mi">80</span><span class="p">:</span><span class="mi">310</span><span class="p">]</span>
	<span class="n">save_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMG_CLASS_PATH</span><span class="p">,</span> <span class="s">'{}.jpg'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">sample_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
	<span class="n">sample_count</span><span class="o">+=</span><span class="mi">1</span>
	<span class="n">Total</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">samples</span><span class="p">)</span>
	<span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">sample_count</span><span class="o">/</span><span class="n">Total</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">progressBar</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
	<span class="n">cv2</span><span class="p">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">roi</span><span class="p">)</span>

	<span class="k">if</span> <span class="n">sample_count</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">samples</span><span class="p">):</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">acquire</span> <span class="o">=</span> <span class="bp">False</span>
	<span class="n">sample_count</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

	<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">test</span><span class="p">:</span>
	<span class="n">roi</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">[</span><span class="mi">80</span><span class="p">:</span><span class="mi">310</span><span class="p">,</span> <span class="mi">80</span><span class="p">:</span><span class="mi">310</span><span class="p">]</span>
	<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.033</span><span class="p">)</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">H</span><span class="p">))</span>

	<span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="s">'float32'</span><span class="p">)</span>


	<span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">/</span><span class="mi">255</span>
	<span class="n">pred</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">loaded_model</span><span class="p">.</span><span class="n">predict</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">([</span><span class="n">img</span><span class="p">]))</span>

	<span class="n">pred_key</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">pred</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
	<span class="n">predicted_name</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">demapper</span><span class="p">(</span><span class="n">pred_key</span><span class="p">)</span>

	<span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">,</span><span class="n">predicted_name</span><span class="p">.</span><span class="n">upper</span><span class="p">(),</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span><span class="n">text_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>

<span class="c1">## # Find who is the winner
</span>	<span class="k">if</span> <span class="n">prev_move</span> <span class="o">!=</span> <span class="n">predicted_name</span><span class="p">:</span>
	<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">!=</span> <span class="s">"None"</span><span class="p">:</span>
	  <span class="n">pc_selected_name</span> <span class="o">=</span> <span class="n">choice</span><span class="p">([</span><span class="s">'Rock'</span><span class="p">,</span> <span class="s">'Paper'</span><span class="p">,</span> <span class="s">'Scissors'</span><span class="p">])</span>
	  <span class="bp">self</span><span class="p">.</span><span class="n">winner</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_winner</span><span class="p">(</span><span class="n">predicted_name</span><span class="p">,</span> <span class="n">pc_selected_name</span><span class="p">)</span>
	  <span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">winner</span> <span class="o">==</span> <span class="s">'Computer'</span><span class="p">:</span>
	    <span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(255, 255, 255);"</span><span class="p">)</span>
	    <span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(0, 255, 127);"</span><span class="p">)</span>
	  <span class="k">elif</span> <span class="bp">self</span><span class="p">.</span><span class="n">winner</span> <span class="o">==</span> <span class="s">'User'</span><span class="p">:</span>
	    <span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(255, 255, 255);"</span><span class="p">)</span>
	    <span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(0, 255, 127);"</span><span class="p">)</span>
	  <span class="k">else</span><span class="p">:</span>
	    <span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(0, 255, 127);"</span><span class="p">)</span>
	    <span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(0, 255, 127);"</span><span class="p">)</span>

	<span class="k">else</span><span class="p">:</span>
	  <span class="n">pc_selected_name</span> <span class="o">=</span> <span class="s">"None"</span>
	  <span class="bp">self</span><span class="p">.</span><span class="n">winner</span> <span class="o">=</span> <span class="s">"Waiting..."</span>
	<span class="n">prev_move</span> <span class="o">=</span> <span class="n">predicted_name</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: {}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">winner</span><span class="p">).</span><span class="n">upper</span><span class="p">())</span>

	<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span><span class="s">'Rock'</span><span class="p">:</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">ROCK_IMAGE</span>
	<span class="k">elif</span> <span class="n">pc_selected_name</span> <span class="o">==</span><span class="s">'Paper'</span><span class="p">:</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">PAPER_IMAGE</span>
	<span class="k">elif</span> <span class="n">pc_selected_name</span> <span class="o">==</span><span class="s">'Scissors'</span><span class="p">:</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">SCISSORS_IMAGE</span>
	<span class="k">else</span><span class="p">:</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">NONE_IMAGE</span>



	<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>
	<span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
	<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
	<span class="k">break</span>
</code></pre></div></div>
<p>This function is self explanatory, once the user hits the Start button, this function will be called. Based on the input type
the while loop will continue to call the update function. The inference of input image is performed via the loaded model
and the winner is displayed in the status.</p>

<h2 id="-14-set-photo-on-the-label"># 14. Set photo on the label</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">setPhoto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">image</span><span class="p">):</span>
	<span class="s">""" This function will take image input and resize it 
	only for display purpose and convert it to QImage
	to set at the label.
	"""</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="n">image</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">tmp</span><span class="p">,</span> <span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="mi">310</span><span class="p">,</span> <span class="mi">310</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

	<span class="n">image</span> <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
	<span class="n">frame</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
	<span class="n">image</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">QImage</span><span class="p">.</span><span class="n">Format_RGB888</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="p">.</span><span class="n">QPixmap</span><span class="p">.</span><span class="n">fromImage</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

	<span class="n">frame</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
	<span class="n">image</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">QImage</span><span class="p">.</span><span class="n">Format_RGB888</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="p">.</span><span class="n">QPixmap</span><span class="p">.</span><span class="n">fromImage</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

</code></pre></div></div>
<p>Above function will display the image on the GUI with a red color rectangle of the region of interest (roi).</p>

<h2 id="-15-acquire-the-data"># 15. Acquire the data</h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">acquireData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This funciton will acquire the image data into the respective label directory """</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: "</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">lineEdit</span><span class="p">.</span><span class="n">text</span><span class="p">()</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_name</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">lineEdit_2</span><span class="p">.</span><span class="n">text</span><span class="p">()</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">generateDirs</span><span class="p">()</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">acquire</span> <span class="o">=</span> <span class="bp">True</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
    
 <span class="k">def</span> <span class="nf">generateDirs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function will generate the Directorys for each label images data """</span>

	<span class="bp">self</span><span class="p">.</span><span class="n">IMG_CLASS_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMAGES_DATASET</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">label_name</span><span class="p">)</span>

	<span class="k">try</span><span class="p">:</span>
	<span class="n">os</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMAGES_DATASET</span><span class="p">)</span>
	<span class="k">except</span> <span class="nb">FileExistsError</span><span class="p">:</span>
	<span class="k">pass</span>
	<span class="k">try</span><span class="p">:</span>
	<span class="n">os</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMG_CLASS_PATH</span><span class="p">)</span>
	<span class="k">except</span> <span class="nb">FileExistsError</span><span class="p">:</span>
	<span class="k">print</span><span class="p">(</span><span class="s">"{} FOLDER ALREADY EXISTS!"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMG_CLASS_PATH</span><span class="p">))</span>
</code></pre></div></div>
<p>Above function will set the flag <code class="language-plaintext highlighter-rouge">self.acquire</code> to True which initiate the process of acquiring data in the generated
 subdirectory once the user hit Start.</p>

<h2 id="-16-update-the-photo-on-the-label"># 16. Update the photo on the label</h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 
<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function will update the photo according to the 
		current values of blur and brightness and set it to photo label.
	"""</span>
	<span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>		
 
</code></pre></div></div>
<p>Above function will simply call the setPhoto function with the image img.</p>

<h2 id="-17-retranslate-the-user-interface-of-gui"># 17. Retranslate the User Interface of GUI</h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">retranslateUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
	<span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="p">.</span><span class="n">QCoreApplication</span><span class="p">.</span><span class="n">translate</span>
	<span class="n">MainWindow</span><span class="p">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"PyShine RPS Application"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_4</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"ROCK PAPER SCISSORS"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"User"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"User Video"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Computer"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Computer Video"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Please Load the Model (.h5) file..."</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_5</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Enter Samples:"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">lineEdit</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"400"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_6</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Enter Class Label:"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">lineEdit_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Paper"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Acquire Data"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Train Model"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Load Model"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Video input"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">radioButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Camera input"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Start"</span><span class="p">))</span>
</code></pre></div></div>

<h2 id="-18-run-the-application"># 18. Run the application</h2>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">MainWindow</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QMainWindow</span><span class="p">()</span>
    <span class="n">ui</span> <span class="o">=</span> <span class="n">Ui_MainWindow</span><span class="p">()</span>
    <span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
    <span class="n">MainWindow</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="p">.</span><span class="nb">exit</span><span class="p">(</span><span class="n">app</span><span class="p">.</span><span class="n">exec_</span><span class="p">())</span>
</code></pre></div></div>

<h2 id="-complete-code"># COMPLETE CODE</h2>
<p>Here is complete main code:</p>

<h2 id="-rpspy"># RPS.py</h2>
<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  
<span class="c1">## # -*- coding: utf-8 -*-
</span>
<span class="c1">## # Form implementation generated from reading ui file 'RPS.ui'
##
## # Created by: PyQt5 UI code generator 5.11.3
##
## # WARNING! All changes made in this file will be lost!
##
## # Subscribe to PyShine Youtube channel for more detail! 
## # 
## # This code will let user to input: 1)video, 2) webcam and either train or test the model
##
## # A user can generate data set by acquiring images and labels through GUI
##
## # Train the model RPSNET via GUI, once .h5 file is generated deploy to start game
##
## # Essentials can be installed through pip install: Tensorflow, cv2, PyQt5, numpy, imutils, pyshine, keras
##
## # Usage: python RPS.py 
##
## # Author: Pyshine www.pyshine.com
</span>

<span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">choice</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QFileDialog</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="n">QImage</span>
<span class="kn">import</span>  <span class="nn">imutils</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">cv2</span><span class="p">,</span><span class="n">os</span>
<span class="kn">import</span> <span class="nn">pyshine</span> <span class="k">as</span> <span class="n">ps</span>
<span class="kn">from</span> <span class="nn">threading</span> <span class="kn">import</span> <span class="n">Thread</span> 
<span class="kn">from</span> <span class="nn">keras.models</span> <span class="kn">import</span> <span class="n">load_model</span>
<span class="kn">from</span> <span class="nn">keras.utils</span> <span class="kn">import</span> <span class="n">np_utils</span>
<span class="kn">from</span> <span class="nn">keras.callbacks</span> <span class="kn">import</span> <span class="n">Callback</span>
<span class="kn">from</span> <span class="nn">keras.preprocessing.image</span> <span class="kn">import</span> <span class="n">ImageDataGenerator</span>
<span class="kn">from</span> <span class="nn">keras.optimizers</span> <span class="kn">import</span> <span class="n">Adam</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">keras.utils</span> <span class="kn">import</span> <span class="n">to_categorical</span>


<span class="k">global</span> <span class="n">epoch_cnt</span>
<span class="n">epoch_cnt</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">class</span> <span class="nc">PyShine_Callback</span><span class="p">(</span><span class="n">Callback</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">on_epoch_end</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">epoch</span><span class="p">,</span> <span class="n">logs</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
		<span class="s">""" This function will continue to update the current running Epoch count """</span>
		<span class="k">global</span> <span class="n">epoch_cnt</span>
		<span class="n">epoch_cnt</span><span class="o">+=</span><span class="mi">1</span>



<span class="k">class</span> <span class="nc">Ui_MainWindow</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">)</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">1280</span><span class="p">,</span> <span class="mi">800</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QWidget</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"centralwidget"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_8</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_8</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout_8"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_5</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_5</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout_5"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout"</span><span class="p">)</span>
		<span class="n">spacerItem</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">158</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_4</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_4</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"font: 16pt </span><span class="se">\"</span><span class="s">MS Shell Dlg 2</span><span class="se">\"</span><span class="s">;"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_4</span><span class="p">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">QtCore</span><span class="p">.</span><span class="n">Qt</span><span class="p">.</span><span class="n">AlignCenter</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_4</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"label_4"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label_4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">spacerItem1</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">118</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_5</span><span class="p">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"groupBox"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_3</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_3</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout_3"</span><span class="p">)</span>
		<span class="n">spacerItem2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_3</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">)</span>
		
		<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"label"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_3</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">spacerItem3</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">188</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_3</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_5</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGroupBox</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"groupBox_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">)</span>

		<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"label_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">spacerItem4</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">188</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">spacerItem5</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">40</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_5</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_4</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_4</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout_4"</span><span class="p">)</span>
		<span class="n">spacerItem6</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">148</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_4</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"font: 16pt </span><span class="se">\"</span><span class="s">MS Shell Dlg 2</span><span class="se">\"</span><span class="s">;"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">QtCore</span><span class="p">.</span><span class="n">Qt</span><span class="p">.</span><span class="n">AlignCenter</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"label_3"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_4</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">spacerItem7</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">158</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_4</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem7</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_5</span><span class="p">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_8</span><span class="p">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout_7"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_6</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_6</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout_6"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_5</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_5</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"label_5"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_6</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label_5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">lineEdit</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">lineEdit</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"lineEdit"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_6</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">lineEdit</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_6</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_6</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"label_6"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_6</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label_6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">lineEdit_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLineEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">lineEdit_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"lineEdit_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_6</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">lineEdit_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"pushButton"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_6</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_6</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">progressBar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QProgressBar</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">progressBar</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"value"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">progressBar</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"progressBar"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">progressBar</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"pushButton_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">progressBar_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QProgressBar</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">progressBar_2</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="s">"value"</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">progressBar_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"progressBar_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">progressBar_2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"pushButton_3"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">spacerItem8</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">346</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem8</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QRadioButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"radioButton"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QRadioButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton_2</span><span class="p">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"radioButton_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">radioButton_2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"pushButton_4"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_8</span><span class="p">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_7</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">statusbar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QStatusBar</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">statusbar</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"statusbar"</span><span class="p">)</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setStatusBar</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">statusbar</span><span class="p">)</span>

		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">loadImage</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">loadModel</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">start_training</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">acquireData</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">selectVideo</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton_2</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">selectCam</span><span class="p">)</span>

		<span class="bp">self</span><span class="p">.</span><span class="n">retranslateUi</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
		<span class="n">QtCore</span><span class="p">.</span><span class="n">QMetaObject</span><span class="p">.</span><span class="n">connectSlotsByName</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">started</span> <span class="o">=</span> <span class="bp">False</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="bp">None</span> 
		<span class="bp">self</span><span class="p">.</span><span class="n">IMAGES_DATASET</span> <span class="o">=</span> <span class="s">'dataset'</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">acquire</span> <span class="o">=</span> <span class="bp">False</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">IMG_CLASS_PATH</span>  <span class="o">=</span> <span class="bp">None</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">loaded_model</span> <span class="o">=</span> <span class="bp">None</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">test</span>  <span class="o">=</span>  <span class="bp">False</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">cam</span> <span class="o">=</span> <span class="bp">True</span> 
		<span class="bp">self</span><span class="p">.</span><span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">lineEdit</span><span class="p">.</span><span class="n">text</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_name</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">lineEdit_2</span><span class="p">.</span><span class="n">text</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">EPOCHS</span> <span class="o">=</span> <span class="mi">1000</span>


		<span class="bp">self</span><span class="p">.</span><span class="n">CLASS_DICT</span> <span class="o">=</span> <span class="p">{</span>
		<span class="s">"Rock"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
		<span class="s">"Paper"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
		<span class="s">"Scissors"</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
		<span class="s">"None"</span><span class="p">:</span> <span class="mi">3</span>
		<span class="p">}</span>
		
		<span class="bp">self</span><span class="p">.</span><span class="n">REV_CLASS_DICT</span> <span class="o">=</span> <span class="p">{</span>
		<span class="mi">0</span><span class="p">:</span> <span class="s">"Rock"</span><span class="p">,</span>
		<span class="mi">1</span><span class="p">:</span> <span class="s">"Paper"</span><span class="p">,</span>
		<span class="mi">2</span><span class="p">:</span> <span class="s">"Scissors"</span><span class="p">,</span>
		<span class="mi">3</span><span class="p">:</span> <span class="s">"None"</span>
		<span class="p">}</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">ROCK_IMAGE</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="s">'images/Rock.jpg'</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">ROCK_IMAGE</span>  <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">ROCK_IMAGE</span> <span class="p">,</span><span class="n">height</span> <span class="o">=</span> <span class="mi">480</span> <span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">PAPER_IMAGE</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="s">'images/Paper.jpg'</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">PAPER_IMAGE</span>  <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">PAPER_IMAGE</span> <span class="p">,</span><span class="n">height</span> <span class="o">=</span> <span class="mi">480</span> <span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">SCISSORS_IMAGE</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="s">'images/Scissors.jpg'</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">SCISSORS_IMAGE</span>  <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">SCISSORS_IMAGE</span> <span class="p">,</span><span class="n">height</span> <span class="o">=</span> <span class="mi">480</span> <span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">NONE_IMAGE</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="s">'images/Try.png'</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">NONE_IMAGE</span>  <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">NONE_IMAGE</span> <span class="p">,</span><span class="n">height</span> <span class="o">=</span> <span class="mi">480</span> <span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">NONE_IMAGE</span>

		<span class="bp">self</span><span class="p">.</span><span class="n">W</span> <span class="o">=</span> <span class="mi">28</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">H</span> <span class="o">=</span> <span class="mi">28</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">winner</span><span class="o">=</span><span class="s">'None'</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
		
	<span class="k">def</span> <span class="nf">selectCam</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function will set the camera mode to True
			so that webcam frames can be played
		"""</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">cam</span> <span class="o">=</span> <span class="bp">True</span>
	
	<span class="k">def</span> <span class="nf">selectVideo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function will set the camera mode to False
			so that video file can be played
		"""</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">cam</span> <span class="o">=</span> <span class="bp">False</span>
	
	<span class="k">def</span> <span class="nf">start_training</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">"""
		This function will initiate two threads once the training is required
		1. run the train_model function
		2. run the progress bar which will display the epochs in terms of percentage
		"""</span>
		<span class="k">global</span> <span class="n">epoch_cnt</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">th</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">train_model</span><span class="p">,</span><span class="n">args</span> <span class="o">=</span> <span class="p">())</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">th</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>	
		<span class="bp">self</span><span class="p">.</span><span class="n">update_train_progress</span><span class="p">()</span>
		
		
	<span class="k">def</span> <span class="nf">loadModel</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">"""
		This function will open a file dialog to let user load the model (.h5 file only)
		after that set the status message
		"""</span>
		<span class="n">model_filename</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="p">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="s">"Keras (*.h5)"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">loaded_model</span> <span class="o">=</span> <span class="n">load_model</span><span class="p">(</span><span class="n">model_filename</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">test</span> <span class="o">=</span> <span class="bp">True</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: Model loaded! Press Start"</span><span class="p">)</span>
		<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="k">pass</span>
			<span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: {}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

		
	<span class="k">def</span> <span class="nf">find_winner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">predicted_name</span><span class="p">,</span> <span class="n">pc_selected_name</span><span class="p">):</span>
		<span class="s">"""
		This function will input the predicted_name (user image predicted by the model) and
		pc_selected_name (random guess of the pc) and then decided by returning the winner based on
		standard priority of the Rock Paper Scissors Game :)
		"""</span>
		<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">==</span> <span class="n">pc_selected_name</span><span class="p">:</span>
			<span class="k">return</span> <span class="s">"Tie"</span>

		<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">==</span> <span class="s">"Rock"</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Scissors"</span><span class="p">:</span>
				<span class="k">return</span> <span class="s">"User"</span>
			<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Paper"</span><span class="p">:</span>
				<span class="k">return</span> <span class="s">"Computer"</span>

		<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">==</span> <span class="s">"Paper"</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Rock"</span><span class="p">:</span>
				<span class="k">return</span> <span class="s">"User"</span>
			<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Scissors"</span><span class="p">:</span>
				<span class="k">return</span> <span class="s">"Computer"</span>

		<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">==</span> <span class="s">"Scissors"</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Paper"</span><span class="p">:</span>
				<span class="k">return</span> <span class="s">"User"</span>
			<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span> <span class="s">"Rock"</span><span class="p">:</span>
				<span class="k">return</span> <span class="s">"Computer"</span>
		

	<span class="k">def</span> <span class="nf">update_train_progress</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function is responsible to update the progress bar to show training percentage """</span>

		<span class="k">print</span><span class="p">(</span><span class="s">'Training started...'</span><span class="p">)</span>
		<span class="k">global</span> <span class="n">epoch_cnt</span>
		
		<span class="n">prev</span><span class="o">=</span><span class="mi">0</span>
		
		<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">epoch_cnt</span><span class="o">&gt;</span><span class="n">prev</span><span class="p">:</span>
				<span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">epoch_cnt</span><span class="o">/</span><span class="bp">self</span><span class="p">.</span><span class="n">EPOCHS</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">progressBar_2</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
				<span class="n">prev</span> <span class="o">=</span> <span class="n">epoch_cnt</span>
			<span class="n">QtWidgets</span><span class="p">.</span><span class="n">QApplication</span><span class="p">.</span><span class="n">processEvents</span><span class="p">()</span>	
			<span class="k">if</span> <span class="n">epoch_cnt</span><span class="o">==</span><span class="bp">self</span><span class="p">.</span><span class="n">EPOCHS</span><span class="p">:</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">progressBar_2</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
				<span class="k">break</span>
		
		
	<span class="k">def</span> <span class="nf">mapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">labels</span><span class="p">):</span>
		<span class="s">""" This function will map the string labels in self.CLASS_DICT
			to their corresponding integer values """</span>
		<span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">CLASS_DICT</span><span class="p">[</span><span class="n">labels</span><span class="p">]</span>

	<span class="k">def</span> <span class="nf">demapper</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">val</span><span class="p">):</span>
		<span class="s">""" This function will map the integer values in self.REV_CLASS_DICT
		to their corresponding string labels """</span>
		<span class="k">return</span> <span class="bp">self</span><span class="p">.</span><span class="n">REV_CLASS_DICT</span><span class="p">[</span><span class="n">val</span><span class="p">]</span>
	
	<span class="k">def</span> <span class="nf">train_model</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function will call the Keras model and 
			map the data and labels, provide itto the model,
			compile and train to generate a .h5 file
		"""</span>
		
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: Training in progress, please wait!"</span><span class="p">)</span>
		<span class="n">NUM_CLASSES</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">CLASS_DICT</span><span class="p">)</span>
		
		<span class="n">dataset</span> <span class="o">=</span> <span class="p">[]</span>
		<span class="k">for</span> <span class="n">directory</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMAGES_DATASET</span><span class="p">):</span>
			<span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMAGES_DATASET</span><span class="p">,</span> <span class="n">directory</span><span class="p">)</span>
			<span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
				<span class="k">continue</span>
			<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
				<span class="k">if</span> <span class="n">item</span><span class="p">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">"."</span><span class="p">):</span>
					<span class="k">continue</span>
				<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">item</span><span class="p">))</span>
				<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
				<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">H</span><span class="p">))</span>
				<span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="s">'float32'</span><span class="p">)</span>
				<span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">/</span><span class="mi">255</span>
				<span class="n">dataset</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="n">img</span><span class="p">,</span> <span class="n">directory</span><span class="p">])</span>
		
		<span class="n">data</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="o">*</span><span class="n">dataset</span><span class="p">)</span>
		<span class="n">labels</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">mapper</span><span class="p">,</span> <span class="n">labels</span><span class="p">))</span>
		<span class="n">labels</span> <span class="o">=</span> <span class="n">np_utils</span><span class="p">.</span><span class="n">to_categorical</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span>

		
		<span class="p">(</span><span class="n">trainX</span><span class="p">,</span> <span class="n">testX</span><span class="p">,</span> <span class="n">trainY</span><span class="p">,</span> <span class="n">testY</span><span class="p">)</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

<span class="c1">## #	# construct the image generator for data augmentation
</span>		<span class="n">aug</span> <span class="o">=</span> <span class="n">ImageDataGenerator</span><span class="p">(</span><span class="n">rotation_range</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">width_shift_range</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span>
		<span class="n">height_shift_range</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">shear_range</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">zoom_range</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span>
		<span class="n">horizontal_flip</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">fill_mode</span><span class="o">=</span><span class="s">"nearest"</span><span class="p">)</span>

		
		<span class="n">INIT_LR</span> <span class="o">=</span> <span class="mf">1e-3</span>
		<span class="n">opt</span> <span class="o">=</span> <span class="n">Adam</span><span class="p">(</span><span class="n">lr</span><span class="o">=</span><span class="n">INIT_LR</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="n">INIT_LR</span> <span class="o">/</span> <span class="bp">self</span><span class="p">.</span><span class="n">EPOCHS</span><span class="p">)</span>
		<span class="n">sgd</span> <span class="o">=</span> <span class="n">keras</span><span class="p">.</span><span class="n">optimizers</span><span class="p">.</span><span class="n">SGD</span><span class="p">(</span><span class="n">lr</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">,</span> <span class="n">momentum</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">nesterov</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

		
		<span class="n">model</span> <span class="o">=</span><span class="n">ps</span><span class="p">.</span><span class="n">RPSNET</span><span class="p">.</span><span class="n">build</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">H</span><span class="p">,</span> <span class="n">depth</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">classes</span><span class="o">=</span><span class="n">NUM_CLASSES</span><span class="p">)</span>
		<span class="n">model</span><span class="p">.</span><span class="nb">compile</span><span class="p">(</span>
		<span class="n">optimizer</span><span class="o">=</span><span class="n">opt</span><span class="p">,</span>
		<span class="n">loss</span><span class="o">=</span><span class="s">'categorical_crossentropy'</span><span class="p">,</span>
		<span class="n">metrics</span><span class="o">=</span><span class="p">[</span><span class="s">'accuracy'</span><span class="p">]</span>
		<span class="p">)</span>

		<span class="n">cl</span> <span class="o">=</span> <span class="n">PyShine_Callback</span><span class="p">()</span> 	
		<span class="n">BS</span> <span class="o">=</span> <span class="mi">32</span>
		
		
		<span class="n">H</span> <span class="o">=</span> <span class="n">model</span><span class="p">.</span><span class="n">fit_generator</span><span class="p">(</span><span class="n">aug</span><span class="p">.</span><span class="n">flow</span><span class="p">(</span><span class="n">trainX</span><span class="p">,</span> <span class="n">trainY</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="n">BS</span><span class="p">),</span>
		<span class="n">validation_data</span><span class="o">=</span><span class="p">(</span><span class="n">testX</span><span class="p">,</span> <span class="n">testY</span><span class="p">),</span> <span class="n">steps_per_epoch</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">trainX</span><span class="p">)</span> <span class="o">//</span> <span class="n">BS</span><span class="p">,</span>
		<span class="n">epochs</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">EPOCHS</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">callbacks</span><span class="o">=</span><span class="p">[</span><span class="n">cl</span><span class="p">])</span>
		<span class="k">print</span><span class="p">(</span><span class="s">"Training network..."</span><span class="p">)</span>

		<span class="n">model</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="s">"RPS.h5"</span><span class="p">)</span>
		<span class="n">K</span><span class="p">.</span><span class="n">clear_session</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: Training finished! Press Load Model"</span><span class="p">)</span>
		
	<span class="k">def</span> <span class="nf">loadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function will load the camera device, obtain the image
			and set it to label using the setPhoto function
		"""</span>
		
		<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="p">:</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">=</span><span class="bp">False</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">'Start'</span><span class="p">)</span>	
			<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>

		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">=</span><span class="bp">True</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">'Stop'</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
			
		
		<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">cam</span><span class="p">:</span>
			<span class="n">vid</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
			
		<span class="k">else</span><span class="p">:</span>
			
			<span class="n">video_filename</span> <span class="o">=</span>  <span class="s">'out.avi'</span>
			<span class="n">vid</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="n">video_filename</span><span class="p">)</span>
			
		
		<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
		<span class="n">frames_to_count</span><span class="o">=</span><span class="mi">20</span>
		<span class="n">st</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">fps</span><span class="o">=</span><span class="mi">0</span>
		<span class="n">sample_count</span><span class="o">=</span><span class="mi">0</span>
		<span class="n">prev_move</span> <span class="o">=</span> <span class="bp">None</span>
		<span class="k">while</span><span class="p">(</span><span class="n">vid</span><span class="p">.</span><span class="n">isOpened</span><span class="p">()):</span>
			
			<span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">vid</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">image</span>  <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="p">,</span><span class="n">height</span> <span class="o">=</span> <span class="mi">480</span> <span class="p">)</span>
			<span class="k">except</span><span class="p">:</span>
				<span class="k">break</span>
			
			
			
			<span class="k">if</span> <span class="n">cnt</span> <span class="o">==</span> <span class="n">frames_to_count</span><span class="p">:</span>
				<span class="k">try</span><span class="p">:</span> <span class="c1"># To avoid divide by 0 we put it in try except
</span>					<span class="bp">self</span><span class="p">.</span><span class="n">fps</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">frames_to_count</span><span class="o">/</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">st</span><span class="p">))</span> 						
					<span class="n">st</span> <span class="o">=</span> <span class="n">time</span><span class="p">.</span><span class="n">time</span><span class="p">()</span>
					<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
				<span class="k">except</span><span class="p">:</span>
					<span class="k">pass</span>
			
			<span class="n">cnt</span><span class="o">+=</span><span class="mi">1</span>
			<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">acquire</span><span class="p">:</span>
				
				<span class="n">roi</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">[</span><span class="mi">80</span><span class="p">:</span><span class="mi">310</span><span class="p">,</span> <span class="mi">80</span><span class="p">:</span><span class="mi">310</span><span class="p">]</span>
				<span class="n">save_path</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMG_CLASS_PATH</span><span class="p">,</span> <span class="s">'{}.jpg'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">sample_count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
				<span class="n">sample_count</span><span class="o">+=</span><span class="mi">1</span>
				<span class="n">Total</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">samples</span><span class="p">)</span>
				<span class="n">value</span> <span class="o">=</span> <span class="p">(</span><span class="n">sample_count</span><span class="o">/</span><span class="n">Total</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">progressBar</span><span class="p">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
				<span class="n">cv2</span><span class="p">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">save_path</span><span class="p">,</span> <span class="n">roi</span><span class="p">)</span>
				
				<span class="k">if</span> <span class="n">sample_count</span> <span class="o">==</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">samples</span><span class="p">):</span>
					<span class="bp">self</span><span class="p">.</span><span class="n">acquire</span> <span class="o">=</span> <span class="bp">False</span>
					<span class="n">sample_count</span> <span class="o">=</span> <span class="mi">0</span>
					<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
					<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
			
			<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">test</span><span class="p">:</span>
				<span class="n">roi</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">[</span><span class="mi">80</span><span class="p">:</span><span class="mi">310</span><span class="p">,</span> <span class="mi">80</span><span class="p">:</span><span class="mi">310</span><span class="p">]</span>
				<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.033</span><span class="p">)</span>
				<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
				<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">W</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">H</span><span class="p">))</span>
				
				<span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="n">astype</span><span class="p">(</span><span class="s">'float32'</span><span class="p">)</span>
		
				
				<span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">/</span><span class="mi">255</span>
				<span class="n">pred</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">loaded_model</span><span class="p">.</span><span class="n">predict</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">([</span><span class="n">img</span><span class="p">]))</span>
				
				<span class="n">pred_key</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">pred</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
				<span class="n">predicted_name</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">demapper</span><span class="p">(</span><span class="n">pred_key</span><span class="p">)</span>
				
				<span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">,</span><span class="n">predicted_name</span><span class="p">.</span><span class="n">upper</span><span class="p">(),</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span><span class="n">text_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">220</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
	
<span class="c1">## #			# Find who is the winner
</span>				<span class="k">if</span> <span class="n">prev_move</span> <span class="o">!=</span> <span class="n">predicted_name</span><span class="p">:</span>
					<span class="k">if</span> <span class="n">predicted_name</span> <span class="o">!=</span> <span class="s">"None"</span><span class="p">:</span>
						<span class="n">pc_selected_name</span> <span class="o">=</span> <span class="n">choice</span><span class="p">([</span><span class="s">'Rock'</span><span class="p">,</span> <span class="s">'Paper'</span><span class="p">,</span> <span class="s">'Scissors'</span><span class="p">])</span>
						<span class="bp">self</span><span class="p">.</span><span class="n">winner</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">find_winner</span><span class="p">(</span><span class="n">predicted_name</span><span class="p">,</span> <span class="n">pc_selected_name</span><span class="p">)</span>
						<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">winner</span> <span class="o">==</span> <span class="s">'Computer'</span><span class="p">:</span>
							<span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(255, 255, 255);"</span><span class="p">)</span>
							<span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(0, 255, 127);"</span><span class="p">)</span>
						<span class="k">elif</span> <span class="bp">self</span><span class="p">.</span><span class="n">winner</span> <span class="o">==</span> <span class="s">'User'</span><span class="p">:</span>
							<span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(255, 255, 255);"</span><span class="p">)</span>
							<span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(0, 255, 127);"</span><span class="p">)</span>
						<span class="k">else</span><span class="p">:</span>
							<span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(0, 255, 127);"</span><span class="p">)</span>
							<span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">.</span><span class="n">setStyleSheet</span><span class="p">(</span><span class="s">"background-color: rgb(0, 255, 127);"</span><span class="p">)</span>

					<span class="k">else</span><span class="p">:</span>
						<span class="n">pc_selected_name</span> <span class="o">=</span> <span class="s">"None"</span>
						<span class="bp">self</span><span class="p">.</span><span class="n">winner</span> <span class="o">=</span> <span class="s">"Waiting..."</span>
				<span class="n">prev_move</span> <span class="o">=</span> <span class="n">predicted_name</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: {}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">winner</span><span class="p">).</span><span class="n">upper</span><span class="p">())</span>
				
				<span class="k">if</span> <span class="n">pc_selected_name</span> <span class="o">==</span><span class="s">'Rock'</span><span class="p">:</span>
					<span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">ROCK_IMAGE</span>
				<span class="k">elif</span> <span class="n">pc_selected_name</span> <span class="o">==</span><span class="s">'Paper'</span><span class="p">:</span>
					<span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">PAPER_IMAGE</span>
				<span class="k">elif</span> <span class="n">pc_selected_name</span> <span class="o">==</span><span class="s">'Scissors'</span><span class="p">:</span>
					<span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">SCISSORS_IMAGE</span>
				<span class="k">else</span><span class="p">:</span>
					<span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">NONE_IMAGE</span>
				
				

			<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>
			<span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
			<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
				<span class="k">break</span>
				
	
	<span class="k">def</span> <span class="nf">setPhoto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">image</span><span class="p">):</span>
		<span class="s">""" This function will take image input and resize it 
			only for display purpose and convert it to QImage
			to set at the label.
		"""</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="n">image</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">rectangle</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">tmp</span><span class="p">,</span> <span class="p">(</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">),</span> <span class="p">(</span><span class="mi">310</span><span class="p">,</span> <span class="mi">310</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">200</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span>

		<span class="n">image</span> <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
		<span class="n">frame</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
		<span class="n">image</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">QImage</span><span class="p">.</span><span class="n">Format_RGB888</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="p">.</span><span class="n">QPixmap</span><span class="p">.</span><span class="n">fromImage</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

		<span class="n">frame</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">DETECTED_IMAGE</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
		<span class="n">image</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">QImage</span><span class="p">.</span><span class="n">Format_RGB888</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="p">.</span><span class="n">QPixmap</span><span class="p">.</span><span class="n">fromImage</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>
	
	<span class="k">def</span> <span class="nf">acquireData</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This funciton will acquire the image data into the respective label directory """</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"STATUS: "</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">samples</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">lineEdit</span><span class="p">.</span><span class="n">text</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_name</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">lineEdit_2</span><span class="p">.</span><span class="n">text</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">generateDirs</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">acquire</span> <span class="o">=</span> <span class="bp">True</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>


	<span class="k">def</span> <span class="nf">generateDirs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function will generate the Directorys for each label images data """</span>
		
		<span class="bp">self</span><span class="p">.</span><span class="n">IMG_CLASS_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMAGES_DATASET</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">label_name</span><span class="p">)</span>

		<span class="k">try</span><span class="p">:</span>
			<span class="n">os</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMAGES_DATASET</span><span class="p">)</span>
		<span class="k">except</span> <span class="nb">FileExistsError</span><span class="p">:</span>
			<span class="k">pass</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="n">os</span><span class="p">.</span><span class="n">mkdir</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMG_CLASS_PATH</span><span class="p">)</span>
		<span class="k">except</span> <span class="nb">FileExistsError</span><span class="p">:</span>
			<span class="k">print</span><span class="p">(</span><span class="s">"{} FOLDER ALREADY EXISTS!"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">IMG_CLASS_PATH</span><span class="p">))</span>


	
	<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function will update the photo according to the 
			current values of blur and brightness and set it to photo label.
		"""</span>
		<span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>			


	<span class="k">def</span> <span class="nf">retranslateUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
		<span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="p">.</span><span class="n">QCoreApplication</span><span class="p">.</span><span class="n">translate</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"PyShine RPS Application"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_4</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"ROCK PAPER SCISSORS"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">groupBox</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"User"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"User Video"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">groupBox_2</span><span class="p">.</span><span class="n">setTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Computer"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Computer Video"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Please Load the Model (.h5) file..."</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_5</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Enter Samples:"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">lineEdit</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"400"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_6</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Enter Class Label:"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">lineEdit_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Paper"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Acquire Data"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Train Model"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Load Model"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Video input"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Camera input"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_4</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Start"</span><span class="p">))</span>

<span class="c1">## # www.pyshine.com
</span>



<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">sys</span>
    <span class="n">app</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span>
    <span class="n">MainWindow</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QMainWindow</span><span class="p">()</span>
    <span class="n">ui</span> <span class="o">=</span> <span class="n">Ui_MainWindow</span><span class="p">()</span>
    <span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
    <span class="n">MainWindow</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">sys</span><span class="p">.</span><span class="nb">exit</span><span class="p">(</span><span class="n">app</span><span class="p">.</span><span class="n">exec_</span><span class="p">())</span>

</code></pre></div></div>

<p>Thats all for today. Have a nice day!</p>



          <!-- Syntax Highlighting -->
          <link href="/assets/css/syntax.css" rel="stylesheet">
          <script src="/assets/scripts/copyCode.js" async></script>

          <!-- Ads -->
          <section aria-label="Advertisements" class="ads mt-4">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-2976211678184829"
                 data-ad-slot="7658460605"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          </section>

        </article>

      </div>

      <!-- Post Navigation -->
      <nav class="post-navigation controls__inner mt-5" aria-label="Post navigation">
        <div class="controls__item prev">
          
            <span>Previous</span>
            <a href="/How-to-make-a-lipstick-tryon-app-in-PyQt5/" rel="prev">
              Lipstick color picker GUI in PyQt5
            </a>
          
        </div>

        <div class="controls__item next">
          
            <span>Next</span>
            <a href="/Drag-and-Drop-CSV-file-with-axis-selection-gui/" rel="next">
              How to make a Matplotlib and PyQt5 ba...
            </a>
          
        </div>
      </nav>

      <!-- Disqus -->
      
        <section class="comments mt-5" aria-label="Comments Section">
          
<section class="comments mt-5" aria-label="Comments Section" style="text-align: center; padding: 50px 0; background-color: #fafafa;">
  <div id="disqus_thread" style="max-width: 800px; margin: 0 auto;"></div>
  <script>

var disqus_config = function () {
this.page.url = 'http://localhost:4000/Play-Rock-Paper-Scissors-Game-using-PyQt5-GUI/';
this.page.identifier = 'http://localhost:4000/Play-Rock-Paper-Scissors-Game-using-PyQt5-GUI/';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://https-py2ai-github-io.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the comments.</noscript>
</section>


        </section>
      

    </main>

    <footer class="footer">
  <div class="container">
    <nav class="social">
      
      
      
    </nav>
    <span>&copy; 2026 PyShine. All rights reserved.</span>
  </div>
</footer>
<script async src="/assets/js/bundle.js"></script>

<script async>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').then(function( registration ) {
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    })
    .catch(function(error) {
      console.log('ServiceWorker registration failed: ', error);
    });
  }
</script>



    <!-- MathJax -->
    
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
>
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://vincenttam.github.io/javascripts/MathJaxLocal.js"
>
</script>



    <!-- Ads -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

    <!-- SIDEBAR TOC SCRIPT -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
      const toc = document.getElementById("toc-list");
      const headings = document.querySelectorAll(
        ".post-content h2:not(.no-toc), .post-content h3:not(.no-toc)"
      );
      if (!toc || headings.length === 0) return;

      const ul = document.createElement("ul");
      headings.forEach(h => {
        const id = h.id || h.textContent.trim().toLowerCase().replace(/\s+/g, "-");
        h.id = id;

        const li = document.createElement("li");
        if (h.tagName === "H3") li.style.marginLeft = "1rem";

        li.innerHTML = `<a href="#${id}">${h.textContent}</a>`;
        ul.appendChild(li);
      });
      toc.appendChild(ul);
    });
    </script>

    <!-- INLINE TOC SCRIPT -->
    <script>
    document.addEventListener("DOMContentLoaded", function() {
      const tocTarget = document.getElementById("inline-toc-list");
      const headings = document.querySelectorAll(
        ".post-content h2:not(.no-toc), .post-content h3:not(.no-toc)"
      );
      if (!tocTarget || headings.length === 0) return;

      const ul = document.createElement("ul");
      headings.forEach(h => {
        const id = h.id || h.textContent.trim().toLowerCase().replace(/\s+/g, "-");
        h.id = id;

        const li = document.createElement("li");
        if (h.tagName === "H3") li.style.marginLeft = "1rem";

        li.innerHTML = `<a href="#${id}">${h.textContent}</a>`;
        ul.appendChild(li);
      });
      tocTarget.appendChild(ul);
    });
    </script>

    <!-- INLINE TOC STYLES -->
    <style>
      .inline-toc-box {
        background: #D4EDFD;
        padding: 15px 20px;
        border-radius: 10px;
        margin-bottom: 25px;
        border: 1px solid #e0e0e0;
      }
      .inline-toc-box ul {
        margin: 0;
        padding-left: 18px;
      }
      .inline-toc-box li {
        margin-bottom: 6px;
      }
      /* Center post navigation */
      .post-navigation.controls__inner {
        justify-content: center !important;
        gap: 4rem;
      }
    </style>

  </body>
</html>


