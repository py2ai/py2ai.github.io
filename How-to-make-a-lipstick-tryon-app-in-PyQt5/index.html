

  <!DOCTYPE html>
<html lang="en" itemscope itemtype="https://schema.org/Article">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Pinterest & Google verification -->
  <meta name="p:domain_verify" content="fb68a8459fe32b8b072bcd5cc620d125"/>
  <meta name="google-site-verification" content="WAkFPi5cvufClnQetgIl0STmvvwHhVf8jfyENFWhsxU" />
  <meta name="google-site-verification" content="g2pFZlv-92XQD67BPgiVHsvZ4TZH13Ucvmmvvv36kU4" />

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Lipstick color picker GUI in PyQt5 | PyShine</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Lipstick color picker GUI in PyQt5" />
<meta name="author" content="PyShine Team" />
<meta property="og:locale" content="en" />
<meta name="description" content="This tutorial is about making a GUI in PyQt5 using Dlib and OpenCV for changing color of lips." />
<meta property="og:description" content="This tutorial is about making a GUI in PyQt5 using Dlib and OpenCV for changing color of lips." />
<link rel="canonical" href="https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/" />
<meta property="og:url" content="https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/" />
<meta property="og:site_name" content="PyShine" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-21T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Lipstick color picker GUI in PyQt5" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"PyShine Team"},"dateModified":"2021-01-21T00:00:00+00:00","datePublished":"2021-01-21T00:00:00+00:00","description":"This tutorial is about making a GUI in PyQt5 using Dlib and OpenCV for changing color of lips.","headline":"Lipstick color picker GUI in PyQt5","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/"},"name":"{{ page.title escape }}","url":"https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/"}</script>
<!-- End Jekyll SEO tag -->

  <script src="https://analytics.ahrefs.com/analytics.js" data-key="Im0K82YsmEDy08+6wyUIZA" async></script>

  <!-- Favicon & App Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/img/icons/apple-touch-icon.png?v=qA3OXqyw77">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/img/icons/favicon-32x32.png?v=qA3OXqyw77">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/img/icons/favicon-16x16.png?v=qA3OXqyw77">
  <link rel="manifest" href="/assets/img/icons/manifest.json?v=qA3OXqyw77">
  <link rel="mask-icon" href="/assets/img/icons/safari-pinned-tab.svg?v=qA3OXqyw77" color="#5bbad5">
  <link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77">
  <!--[if IE]><link rel="shortcut icon" href="/assets/img/icons/favicon.ico?v=qA3OXqyw77"><![endif]-->

  <!-- App & Theme Info -->
  <meta name="apple-mobile-web-app-title" content="Sleek">
  <meta name="application-name" content="Sleek">
  <meta name="msapplication-config" content="/assets/img/icons/browserconfig.xml?v=qA3OXqyw77">
  <meta name="theme-color" content="#ffffff">

  
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-TCVFBKF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'GTM-TCVFBKF');
</script>

  

  <!-- Critical CSS Inline -->
  <style class="inlineCSS">
    h1{color:#313237;margin-top:0;margin-bottom:.5rem}.dark-bg{background-color:#19d319}@media (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:last-of-type,.post-card:nth-child(2n+2){margin-right:0}}html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figure,main{display:block}figure{margin:1em 40px}a{background-color:transparent;-webkit-text-decoration-skip:objects}img{border-style:none}svg:not(:root){overflow:hidden}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{-webkit-box-sizing:border-box;box-sizing:border-box}body{-webkit-overflow-scrolling:touch}*,::after,::before{-webkit-box-sizing:inherit;box-sizing:inherit}.site{display:-webkit-box;display:-ms-flexbox;display:flex;min-height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.site__content{-webkit-box-flex:1;-ms-flex:1;flex:1}img{max-width:100%;height:auto;width:auto;vertical-align:middle}figure{margin:0}body{background-color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Hiragino Sans GB","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif;font-size:1rem;line-height:1.5;color:#343851;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%}p{margin-top:0;margin-bottom:1.25rem}h1,h2{color:#313237;margin-top:0;margin-bottom:.5rem}a{color:#277cea;text-decoration:none;border-bottom:1px dashed #277cea}.blur{background:#fff;filter:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg"><filter id="filter"><feGaussianBlur stdDeviation="16" /></filter></svg>#filter');-webkit-filter:blur(1rem);filter:blur(1rem)}.container{padding:0 20px}@media (min-width:0){.container{max-width:auto;margin:0 auto}}@media (min-width:36em){.container{max-width:540px;margin:0 auto}}@media (min-width:48em){.container{max-width:720px;margin:0 auto}}@media (min-width:62em){.container{max-width:960px;margin:0 auto}}@media (min-width:75em){.container{max-width:1170px;margin:0 auto}}.header{background-color:#fff;color:#343851;position:absolute;z-index:4;width:100%;top:0;left:0;will-change:transform;-webkit-transform:translateY(0);transform:translateY(0)}.header a{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;border-bottom:0}.header__logo{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;overflow:hidden;padding:19px 0;margin-right:1.25rem;outline:0;border-bottom:0;color:#313237}.header__logo .header__logo--container{width:58px}.header__logo .header__logo--container .logo{fill:currentColor}.header__inner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:3.75em;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.header__links{padding-bottom:.5rem;display:none;position:absolute;top:3.75em;left:0;width:100%;height:auto;background:#fff}.header__link{color:#343851;padding:.938rem 0;border-top:1px solid #ededed}.header__toggle{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:44px;height:100%;background-color:transparent;padding-left:1.25rem}.header__toggle span{display:block;position:relative;margin-top:4px;background-color:#343851;width:100%;height:2px;border-radius:1px}.header__toggle span:first-child{margin-top:0}@media (min-width:62em){.header__toggle{display:none;visibility:hidden}.header__links{position:static;padding:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;visibility:visible;width:auto;height:100%}.header__links-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;height:100%;padding:0}.header__link{position:relative;padding:.938rem 1rem;border:0;height:100%}.header__link::after{content:"";display:block;position:absolute;left:0;bottom:0;height:3px;width:100%;-webkit-transform:scaleX(0);transform:scaleX(0);background:#277cea}}.post-card{display:block;position:relative;width:100%;min-height:250px;border-radius:4px;overflow:hidden;background-color:#fff;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.08);box-shadow:0 1px 3px rgba(0,0,0,.08);margin-bottom:2.25rem;border-bottom:0}@media (min-width:48em){.post-card{width:48.4375%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:0}}@media (min-width:75em){.post-card{width:31.25%;margin-right:3.125%}.post-card:nth-child(2n+2){margin-right:3.125%}}.post-card__label{position:absolute;top:1.5rem;left:1.5rem;z-index:2}.post-card__thumb{margin:0;background:#fff;position:relative;overflow:hidden}.post-card__thumb::after{content:"";display:block;height:0;width:100%;padding-bottom:56.25%}.post-card__thumb>*{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.post-card__inner{padding:1.875rem 1.25rem .625rem;color:#838c8d}.post-card__header{margin-bottom:.75rem}.post-card__header .post-card__meta{font-size:.875rem}.label{padding:0 10px;margin-bottom:1rem;display:inline-block;line-height:20px;font-size:.75rem;text-transform:uppercase;letter-spacing:1px;color:rgba(255,255,255,.8);border:2px solid rgba(255,255,255,.5);border-radius:100px}.hero{margin:3.75rem auto 0;min-height:16.25rem;width:100%;position:relative;background-color:#dde5ea;background-repeat:no-repeat;background-position:50%;background-size:cover}@media (min-width:62em){.hero{margin:0 auto;height:36em}}.hero::before{position:absolute;display:block;content:"";top:0;left:0;width:100%;height:100%;background:rgba(52,56,81,.8)}.hero__wrap{position:absolute;margin:auto;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);text-align:center;color:rgba(255,255,255,.8);width:100%;max-width:90%;z-index:1}.hero__wrap .hero__title{font-size:1.8em;color:#fff}.blog{background-color:#f9f9f9}.post-list{padding-top:2.5em;display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}@media (min-width:48em){.hero__wrap{max-width:40em}.hero__wrap .hero__title{padding:1rem 0;font-size:2.625em;line-height:3.125rem}.post-list{padding-top:5em}}
  </style>

  <!-- Main CSS -->
  <link rel="preload" href="/assets/css/main.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/css/main.css"></noscript>

  <script type="text/javascript">
    /*! loadCSS. [c]2017 Filament Group, Inc. MIT License */
(function(w){"use strict";if(!w.loadCSS){w.loadCSS=function(){}}
var rp=loadCSS.relpreload={};rp.support=(function(){var ret;try{ret=w.document.createElement("link").relList.supports("preload")}catch(e){ret=!1}
return function(){return ret}})();rp.bindMediaToggle=function(link){var finalMedia=link.media||"all";function enableStylesheet(){link.media=finalMedia}
if(link.addEventListener){link.addEventListener("load",enableStylesheet)}else if(link.attachEvent){link.attachEvent("onload",enableStylesheet)}
setTimeout(function(){link.rel="stylesheet";link.media="only x"});setTimeout(enableStylesheet,3000)};rp.poly=function(){if(rp.support()){return}
var links=w.document.getElementsByTagName("link");for(var i=0;i<links.length;i++){var link=links[i];if(link.rel==="preload"&&link.getAttribute("as")==="style"&&!link.getAttribute("data-loadcss")){link.setAttribute("data-loadcss",!0);rp.bindMediaToggle(link)}}};if(!rp.support()){rp.poly();var run=w.setInterval(rp.poly,500);if(w.addEventListener){w.addEventListener("load",function(){rp.poly();w.clearInterval(run)})}else if(w.attachEvent){w.attachEvent("onload",function(){rp.poly();w.clearInterval(run)})}}
if(typeof exports!=="undefined"){exports.loadCSS=loadCSS}
else{w.loadCSS=loadCSS}}(typeof global!=="undefined"?global:this))

  </script>

  <!-- MathJax -->
  <script type="text/javascript" id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>


  <body class="site" itemscope itemtype="https://schema.org/WebPage">

    
      <!-- Google Tag Manager (noscript) -->
      <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TCVFBKF"
                height="0" width="0" style="display:none;visibility:hidden"></iframe>
      </noscript>
      <!-- End Google Tag Manager -->
    

    <header class="header" itemscope itemtype="http://schema.org/SiteNavigationElement" aria-label="Main navigation">
  <div class="container">
    <div class="header__inner">
      <!-- Logo -->
      <a class="header__logo" href="/">
        <div class="header__logo--container">
          <?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 16.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="24px" height="24px" viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<g>
	<path d="M18.121,9.88l-7.832-7.836c-0.155-0.158-0.428-0.155-0.584,0L1.842,9.913c-0.262,0.263-0.073,0.705,0.292,0.705h2.069v7.042c0,0.227,0.187,0.414,0.414,0.414h3.725c0.228,0,0.414-0.188,0.414-0.414v-3.313h2.483v3.313c0,0.227,0.187,0.414,0.413,0.414h3.726c0.229,0,0.414-0.188,0.414-0.414v-7.042h2.068h0.004C18.331,10.617,18.389,10.146,18.121,9.88 M14.963,17.245h-2.896v-3.313c0-0.229-0.186-0.415-0.414-0.415H8.342c-0.228,0-0.414,0.187-0.414,0.415v3.313H5.032v-6.628h9.931V17.245z M3.133,9.79l6.864-6.868l6.867,6.868H3.133z"></path>

	
	
</g>
</svg>

        </div>
      </a>

      <!-- Navigation Links -->
      <nav class="header__links">
        <div class="container header__links-wrapper">
          
            <a class="header__link" href="/" itemprop="url">
              <span itemprop="name">Home</span>
            </a>
          
            <a class="header__link" href="/categories" itemprop="url">
              <span itemprop="name">Categories</span>
            </a>
          
            <a class="header__link" href="/converter.html" itemprop="url">
              <span itemprop="name">Free PNG Converter</span>
            </a>
          
            <a class="header__link" href="/about" itemprop="url">
              <span itemprop="name">About</span>
            </a>
          
            <a class="header__link" href="/contact" itemprop="url">
              <span itemprop="name">Contact</span>
            </a>
          
            <a class="header__link" href="/privacy" itemprop="url">
              <span itemprop="name">Privacy Policy</span>
            </a>
          
            <a class="header__link" href="/disclaimer" itemprop="url">
              <span itemprop="name">Disclaimer</span>
            </a>
          
        </div>
      </nav>

      <!-- Mobile Menu Toggle -->
      <div class="header__toggle" aria-label="Toggle navigation">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </div>

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Lipstick color picker GUI in PyQt5 | PyShine</title>
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Lipstick color picker GUI in PyQt5" />
<meta name="author" content="PyShine Team" />
<meta property="og:locale" content="en" />
<meta name="description" content="This tutorial is about making a GUI in PyQt5 using Dlib and OpenCV for changing color of lips." />
<meta property="og:description" content="This tutorial is about making a GUI in PyQt5 using Dlib and OpenCV for changing color of lips." />
<link rel="canonical" href="https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/" />
<meta property="og:url" content="https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/" />
<meta property="og:site_name" content="PyShine" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-01-21T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Lipstick color picker GUI in PyQt5" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"PyShine Team"},"dateModified":"2021-01-21T00:00:00+00:00","datePublished":"2021-01-21T00:00:00+00:00","description":"This tutorial is about making a GUI in PyQt5 using Dlib and OpenCV for changing color of lips.","headline":"Lipstick color picker GUI in PyQt5","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/"},"name":"{{ page.title escape }}","url":"https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/"}</script>
<!-- End Jekyll SEO tag -->

</header>


    
      <div class="hero dark-bg" role="img" aria-label="Lipstick color picker GUI in PyQt5">
    
        <div class="hero__wrap">
          
            <div class="hero__categories">
              
                <a class="label"
                   href="/categories/#GUI tutorial series"
                   aria-label="Category: GUI tutorial series">
                   GUI tutorial series
                </a>
                
              
            </div>
          

          <h1 class="hero__title" itemprop="headline">Lipstick color picker GUI in PyQt5</h1>

          <p class="hero__meta">
            <time datetime="2021-01-21T00:00:00+00:00" itemprop="datePublished">
              21 Jan 2021
            </time>
            &nbsp;·&nbsp;
            
            <span itemprop="timeRequired">
              
                35 mins read
              
            </span>
          </p>
        </div>
      </div>

    <main class="site__content" role="main">
      <div class="container">

        <article class="post-content"
                 itemprop="articleBody"
                 itemscope itemtype="https://schema.org/Article">
          
          <p><br /></p>
<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/q6qHIsZ6V8s" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<p>Hi and welcome! This is part 13 of the PyQt5 learning series. Previously, in Part 9 we have developed a video processing GUI. Today we will use that GUI in a more advanced
level. Recently, some friends have requested to make a tutorial in which a user can tryon lipstick colors. So, in this tutorial an image, video or webcam video can be 
used as input and the GUI will display the face with colored lips. The color of lips will be selected from a drop down list. So lets do it!</p>

<p>We will proceed in several steps to finish this GUI project.</p>

<h3 id="1-structure-of-project-directory">1. Structure of project directory</h3>
<p>In the main project directory 13-Lipstick color picker GUI in PyQt5 we have:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 13-Lipstick color picker GUI in PyQt5/
├── images/
│   ├── Air Force Blue (Raf).png
│   ├── Air Force Blue (Usaf).png
│   ├── Air Superiority Blue.png
│   ├── Alabama Crimson.png
│   ├── Alice Blue.png
│   ├── Alizarin Crimson.png
│   ├── Wood Brown.png
│   ├── Xanadu.png
│   ├── Yale Blue.png
│   ├── Yellow (Munsell).png
│   ├── Yellow (Ncs).png
│   ├── Yellow (Process).png
│   ├── Yellow (Ryb).png
│   ├── Yellow Orange.png
│   ├── Yellow-Green.png
│   ├── Yellow.png
│   ├── Zaffre.png
│   └── Zinnwaldite Brown.png
├── lena.jpg
├── process.py
└── shape_predictor_68_face_landmarks.dat
 
</code></pre></div></div>

<ol>
  <li>
    <p>images directory: that contains colored tiles. The center point of each color tile will be used as the input R,G,B color. Moreover, at the start, this images
  directory will be processed to generate the dropdown list. If you want to add more colors simply make small size solid tiles of 60x80 size in MS paint. Give this 
  tile a name so that this name will be displayed in the dropdown list. The default images directory can be downloaded from here: 
  https://drive.google.com/file/d/12cby1Njphwl2361tSsVA7RrmA1n-METo/view?usp=sharing</p>
  </li>
  <li>
    <p>process.py file: that contains the main code (Available below)</p>
  </li>
  <li>
    <p>lena.jpg file: A sample input image. Can be downloaded from here: https://drive.google.com/file/d/1BSNyxmqIjK8YKdIEmwZfK8xS8Q0dRoCb/view?usp=sharing</p>
  </li>
  <li>
    <p>shape_predictor_68_face_landmarks.dat: A dlib trained model which will be used to detect 68 facial landmarks. We will only use the points related to lips.
  You download it freely from https://github.com/davisking/dlib-models/blob/master/shape_predictor_68_face_landmarks.dat.bz2</p>
  </li>
</ol>

<p>In a project directory copy above four items and to run the GUI simply use:</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  python process.py
</code></pre></div></div>
<p>We will now proceed to explain the main code so that you can understand the changes we made to the Part 9 of the PyQt5 learning series. If you have missed that part, then please go this video tutorial before reading further</p>

<p><br /></p>
<div align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/UWxWcSxymHs" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>
<p><br /></p>

<p>Let’s begin the code details</p>

<h3 id="2-importing-essentials">2. Importing essentials</h3>

<p>We can install them using pip install and then import them as:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QFileDialog</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="n">QImage</span>
<span class="kn">import</span> <span class="nn">cv2</span><span class="p">,</span> <span class="n">imutils</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">dlib</span>
<span class="kn">import</span> <span class="nn">pyshine</span> <span class="k">as</span> <span class="n">ps</span>

</code></pre></div></div>
<h3 id="3-loading-the-dlib-facial-landmarks-detector-model">3. Loading the Dlib facial landmarks detector model</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">detector</span> <span class="o">=</span> <span class="n">dlib</span><span class="p">.</span><span class="n">get_frontal_face_detector</span><span class="p">()</span>
<span class="n">predictor</span> <span class="o">=</span> <span class="n">dlib</span><span class="p">.</span><span class="n">shape_predictor</span><span class="p">(</span><span class="s">"shape_predictor_68_face_landmarks.dat"</span><span class="p">)</span>
</code></pre></div></div>
<p>Here we have the detector to detect face and a predictor to predict the facial landmarks on that detected face</p>

<h3 id="4-loading-the-images-directory-to-generate-an-rgb-dictionary">4. Loading the images directory to generate an RGB dictionary</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">path</span> <span class="o">=</span><span class="s">"images"</span>
<span class="n">file_list</span><span class="o">=</span><span class="p">[]</span>
<span class="n">file_paths</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">isfile</span><span class="p">,[</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)])</span>
<span class="n">RGB_dict</span><span class="o">=</span><span class="p">{}</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_paths</span><span class="p">:</span>
	<span class="n">file_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span> <span class="n">f</span> <span class="p">)</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">IMREAD_UNCHANGED</span><span class="p">)</span>
	<span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="n">shape</span>
	<span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="n">h</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span><span class="n">w</span><span class="o">//</span><span class="mi">2</span>
	<span class="n">b</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">r</span>    <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">img</span><span class="p">[</span><span class="n">h</span><span class="p">,</span><span class="n">w</span> <span class="p">,</span> <span class="mi">1</span><span class="p">],</span><span class="n">img</span><span class="p">[</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
	<span class="n">base_name</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
	<span class="n">base_name</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">base_name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
	<span class="n">RGB_dict</span><span class="p">[</span><span class="n">base_name</span><span class="p">]</span>  <span class="o">=</span>  <span class="p">[</span><span class="n">r</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">b</span><span class="p">]</span>
</code></pre></div></div>
<p>Here we will give the path of images and then scan this path to get all the paths of each image file in it. Based on each path we will read the the image
take the shape of image img and then take the b,g,r of the center point h//2, w//2. The key to RGB_dict is the base name of that color tile image, and the 
value is a list [r,g,b].</p>

<h3 id="5-main-window-class">5. Main window class</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Ui_MainWindow</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">)</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">498</span><span class="p">,</span> <span class="mi">522</span><span class="p">)</span>
		<span class="p">...</span>
		<span class="p">...</span>
		<span class="p">...</span>
		<span class="c1"># Added code here
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">filename</span> <span class="o">=</span> <span class="s">'Snapshot '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%Y-%b-%d at %H.%M.%S %p"</span><span class="p">))</span><span class="o">+</span><span class="s">'.png'</span> <span class="c1"># Will hold the image address location
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># Will hold the temporary image for display
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">brightness_value_now</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Updated brightness value
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">blur_value_now</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Updated blur value
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">fps</span><span class="o">=</span><span class="mi">0</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">started</span> <span class="o">=</span> <span class="bp">False</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span><span class="o">=</span><span class="p">[</span><span class="mi">227</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">54</span><span class="p">]</span> <span class="c1"># 227,38,54
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">=</span><span class="s">'cam'</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">color_selected_text</span><span class="o">=</span> <span class="s">'Default'</span>
</code></pre></div></div>
<p>Here after initializing the setupUi for the MainWindow just like before in Part 9 tutorial, we will take the initial lipstick color R,G,B. The self.mode
is used for either ‘cam’ or ‘image’ selection. The self.color_selected_text will be used for the printing color value on the image. A user can tryon color
and then press the take photo button and that saved image will have a watermark on it to show the reference color name.</p>

<h3 id="6-input-modes-functions">6. Input modes functions</h3>
<p>We have added two radio buttons to the GUI, that will take user selection either image/video or webcam as the input</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">imageMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function willl select the image mode"""</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">=</span><span class="s">'image'</span>
	<span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">videoMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function willl select the video mode"""</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">=</span><span class="s">'cam'</span>
	<span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="p">)</span>
</code></pre></div></div>
<h3 id="7-load-the-input">7. Load the input</h3>
<p>This function will have two lists: one for the detection of video file extension, the other for the image file extension such as .jpg etc.
Based on the type it will operate to provide us the input image.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function will load the camera device, image file or video file, obtain the image
		and set it to label using the setPhoto function
	"""</span>
	<span class="n">video_file_ext</span> <span class="o">=</span> <span class="p">[</span><span class="s">'.MP4'</span><span class="p">,</span><span class="s">'.AVI'</span><span class="p">]</span>
	<span class="n">image_file_ext</span> <span class="o">=</span> <span class="p">[</span><span class="s">'.PNG'</span><span class="p">,</span><span class="s">'.JPG'</span><span class="p">,</span><span class="s">'.JPEG'</span><span class="p">,</span><span class="s">'.BMP'</span><span class="p">,</span><span class="s">'.TIFF'</span><span class="p">]</span>

	<span class="n">ext</span><span class="o">=</span><span class="bp">None</span>
	<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
		<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">==</span><span class="s">'image'</span><span class="p">:</span>		
			<span class="bp">self</span><span class="p">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="p">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="s">"Image or Video(mp4) (*.*)"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
			<span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="n">upper</span><span class="p">()</span>


	<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="p">:</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">=</span><span class="bp">False</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">'Start'</span><span class="p">)</span>	
	<span class="k">else</span><span class="p">:</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">=</span><span class="bp">True</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">'Stop'</span><span class="p">)</span>


	<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">==</span><span class="s">'cam'</span><span class="p">:</span>
		<span class="n">vid</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">video_file_ext</span><span class="p">:</span>
			<span class="n">vid</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">filename</span><span class="p">)</span>


	<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
	<span class="n">frames_to_count</span><span class="o">=</span><span class="mi">20</span>
	<span class="n">st</span> <span class="o">=</span> <span class="mi">0</span>
	<span class="n">fps</span><span class="o">=</span><span class="mi">0</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">comboBox</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
	<span class="k">while</span><span class="p">(</span><span class="bp">True</span><span class="p">):</span>
		<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s">'cam'</span><span class="p">:</span>
			<span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">vid</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">video_file_ext</span><span class="p">:</span>
				<span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">vid</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
			<span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">image_file_ext</span><span class="p">:</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">filename</span><span class="p">,</span><span class="n">cv2</span><span class="p">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>


		<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>
		<span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
		<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.033</span><span class="p">)</span>
		<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
			<span class="k">break</span>
			<span class="k">print</span><span class="p">(</span><span class="s">'Loop break'</span><span class="p">)</span>
		<span class="n">QtWidgets</span><span class="p">.</span><span class="n">QApplication</span><span class="p">.</span><span class="n">processEvents</span><span class="p">()</span>	

</code></pre></div></div>
<h3 id="8-several-functions-for-the-user-inputs">8. Several functions for the User inputs</h3>
<p>These functions are mostly similar to Part 9 tutorial. We will set photo, change brightness, blur and color values for the lips instead.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">setPhoto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">image</span><span class="p">):</span>
	<span class="s">""" This function will take image input and resize it 
		only for display purpose and convert it to QImage
		to set at the label.
	"""</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="n">image</span>
	<span class="n">image</span> <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
	<span class="n">text</span>  <span class="o">=</span>  <span class="bp">self</span><span class="p">.</span><span class="n">color_selected_text</span>
	<span class="n">rgb</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span>
	<span class="n">image</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="n">rgb</span><span class="p">,</span><span class="n">text_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>

	<span class="n">frame</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
	<span class="n">image</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">QImage</span><span class="p">.</span><span class="n">Format_RGB888</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="p">.</span><span class="n">QPixmap</span><span class="p">.</span><span class="n">fromImage</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">brightness_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
	<span class="s">""" This function will take value from the slider
		for the brightness from 0 to 99
	"""</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">brightness_value_now</span> <span class="o">=</span> <span class="n">value</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'Brightness: '</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">blur_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
	<span class="s">""" This function will take value from the slider 
		for the blur from 0 to 99 """</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">blur_value_now</span> <span class="o">=</span> <span class="n">value</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'Blur: '</span><span class="p">,</span><span class="n">value</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">lipStick_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
	<span class="s">"""  This function will take the RGB color selected from dropdown list
		then update
	"""</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span> <span class="o">=</span> <span class="n">RGB_dict</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">color_selected_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>


</code></pre></div></div>

<h3 id="9-apply-the-lip-color">9. Apply the lip color</h3>

<p>Here we will apply the color value to the input image img. Only at the lips part. We will iterate over the 68 points, take the ones belonging to lips and then
mask a binary image. After that we will merge the lips color image with the input image to output the desired image. The brightness and blur values will be 
used to change the lipstick color weight and blur. You can experiment with this part to achieve the desired results.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">changeLipstick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">img</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
	<span class="s">""" This funciton will take img image and lipstick color RGB
		Out the image with a changed lip color of the image
	"""</span> 

	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="bp">None</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
	<span class="n">imgOriginal</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
	<span class="n">imgColorLips</span><span class="o">=</span><span class="n">imgOriginal</span>
	<span class="n">imgGray</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
	<span class="n">faces</span> <span class="o">=</span> <span class="n">detector</span><span class="p">(</span><span class="n">imgGray</span><span class="p">)</span>

	<span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">faces</span><span class="p">:</span>
		<span class="n">x1</span><span class="p">,</span><span class="n">y1</span> <span class="o">=</span> <span class="n">face</span><span class="p">.</span><span class="n">left</span><span class="p">(),</span><span class="n">face</span><span class="p">.</span><span class="n">top</span><span class="p">()</span>
		<span class="n">x2</span><span class="p">,</span><span class="n">y2</span> <span class="o">=</span> <span class="n">face</span><span class="p">.</span><span class="n">right</span><span class="p">(),</span><span class="n">face</span><span class="p">.</span><span class="n">bottom</span><span class="p">()</span>

		<span class="n">facial_landmarks</span> <span class="o">=</span> <span class="n">predictor</span><span class="p">(</span><span class="n">imgGray</span><span class="p">,</span><span class="n">face</span><span class="p">)</span>
		<span class="n">points</span> <span class="o">=</span><span class="p">[]</span>
		<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">68</span><span class="p">):</span>
			<span class="n">x</span> <span class="o">=</span> <span class="n">facial_landmarks</span><span class="p">.</span><span class="n">part</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">x</span>
			<span class="n">y</span> <span class="o">=</span> <span class="n">facial_landmarks</span><span class="p">.</span><span class="n">part</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">y</span>
			<span class="n">points</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">])</span>


		<span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
		<span class="n">imgLips</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">getMaskOfLips</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">points</span><span class="p">[</span><span class="mi">48</span><span class="p">:</span><span class="mi">61</span><span class="p">])</span>

		<span class="n">imgColorLips</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">imgLips</span><span class="p">)</span>

		<span class="n">imgColorLips</span><span class="p">[:]</span> <span class="o">=</span><span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
		<span class="n">imgColorLips</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">bitwise_and</span><span class="p">(</span><span class="n">imgLips</span><span class="p">,</span><span class="n">imgColorLips</span><span class="p">)</span>

		<span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">blur_value_now</span>
		<span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">//</span><span class="mi">10</span>
		<span class="k">if</span> <span class="n">value</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
			<span class="n">value</span><span class="o">+=</span><span class="mi">1</span>
		<span class="n">kernel_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="o">+</span><span class="n">value</span><span class="p">,</span><span class="mi">6</span><span class="o">+</span><span class="n">value</span><span class="p">)</span> <span class="c1"># +1 is to avoid 0
</span>
		<span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">brightness_value_now</span>
		<span class="n">weight</span> <span class="o">=</span> <span class="mf">0.4</span> <span class="o">+</span> <span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="o">/</span><span class="mi">600</span>
		<span class="n">imgColorLips</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">imgColorLips</span><span class="p">,</span><span class="n">kernel_size</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
		<span class="n">imgColorLips</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">addWeighted</span><span class="p">(</span><span class="n">imgOriginal</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">imgColorLips</span><span class="p">,</span><span class="n">weight</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>




	<span class="k">return</span> <span class="n">imgColorLips</span>

<span class="k">def</span> <span class="nf">getMaskOfLips</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">img</span><span class="p">,</span><span class="n">points</span><span class="p">):</span>
	<span class="s">""" This function will input the lips points and the image
		It will return the mask of lips region containing white pixels
	"""</span>
	<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
	<span class="n">mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">fillPoly</span><span class="p">(</span><span class="n">mask</span><span class="p">,[</span><span class="n">points</span><span class="p">],(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
	<span class="k">return</span> <span class="n">mask</span>

</code></pre></div></div>

<h3 id="10-save-the-photo">10. Save the photo</h3>
<p>Here will save the photo and apply a watermark on it. After that we can run the main application just like before.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">savePhoto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
	<span class="s">""" This function will save the image"""</span>
	<span class="n">rgb</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span>
	<span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">tmp</span>
	<span class="n">text</span>  <span class="o">=</span>  <span class="bp">self</span><span class="p">.</span><span class="n">color_selected_text</span>
	<span class="n">image</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="n">rgb</span><span class="p">,</span><span class="n">text_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
	<span class="n">filename</span> <span class="o">=</span> <span class="s">'Snapshot '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%Y-%b-%d at %H.%M.%S %p"</span><span class="p">))</span><span class="o">+</span><span class="s">'.png'</span>
	<span class="n">cv2</span><span class="p">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">image</span><span class="p">)</span>
	<span class="k">print</span><span class="p">(</span><span class="s">'Image saved as:'</span><span class="p">,</span><span class="n">filename</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">retranslateUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
	<span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="p">.</span><span class="n">QCoreApplication</span><span class="p">.</span><span class="n">translate</span>
	<span class="n">MainWindow</span><span class="p">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"PyShine video process"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Start"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Brightness"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Blur"</span><span class="p">))</span>
	<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Take picture"</span><span class="p">))</span>
	
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
	<span class="kn">import</span> <span class="nn">sys</span>
	<span class="n">app</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span>
	<span class="n">MainWindow</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QMainWindow</span><span class="p">()</span>
	<span class="n">ui</span> <span class="o">=</span> <span class="n">Ui_MainWindow</span><span class="p">()</span>
	<span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
	<span class="n">MainWindow</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
	<span class="n">sys</span><span class="p">.</span><span class="nb">exit</span><span class="p">(</span><span class="n">app</span><span class="p">.</span><span class="n">exec_</span><span class="p">())</span>

</code></pre></div></div>

<h3 id="complete-code">COMPLETE CODE</h3>
<p>Here is complete main code:</p>

<h3 id="processpy">process.py</h3>
<style>
  .copy-code-button {
	box-shadow:inset 0px 1px 0px 0px #bbdaf7;
	background:linear-gradient(to bottom, #79bbff 5%, #378de5 100%);
	background-color:#79bbff;
	border-radius:6px;
	border:1px solid #84bbf3;
	display:inline-block;
	cursor:pointer;
	color:#ffffff;
	font-family:Arial;
	font-size:15px;
	font-weight:bold;
	padding:6px 24px;
	text-decoration:none;
	text-shadow:0px 1px 0px #528ecc;
}
.copy-code-button:hover {
	background:linear-gradient(to bottom, #378de5 5%, #79bbff 100%);
	background-color:#378de5;
}
.copy-code-button:active {
	position:relative;
	top:1px;
}
</style>

<div class="code-header">
  <button class="copy-code-button">
    Copy code to clipboard
  </button>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  
  <span class="c1"># -*- coding: utf-8 -*-
</span>
<span class="c1"># Form implementation generated from reading ui file 'process.ui'
#
# Created by: PyQt5 UI code generator 5.11.3
#
# WARNING! All changes made in this file will be lost!
#
# Subscribe to PyShine Youtube channel for more detail! 
# 
# This code will let user to input 1) image 2) video 3) webcam and apply lip color 
#
# Essentials can be installed through pip install: dlib, cv2, PyQt5, numpy, imutils, pyshine 
#
# Usage: python process.py
</span>
<span class="kn">from</span> <span class="nn">PyQt5</span> <span class="kn">import</span> <span class="n">QtCore</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">,</span> <span class="n">QtWidgets</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtWidgets</span> <span class="kn">import</span> <span class="n">QFileDialog</span><span class="p">,</span> <span class="n">QColorDialog</span>
<span class="kn">from</span> <span class="nn">PyQt5.QtGui</span> <span class="kn">import</span> <span class="n">QImage</span>
<span class="kn">import</span> <span class="nn">cv2</span><span class="p">,</span> <span class="n">imutils</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">dlib</span>
<span class="kn">import</span> <span class="nn">pyshine</span> <span class="k">as</span> <span class="n">ps</span>
<span class="n">detector</span> <span class="o">=</span> <span class="n">dlib</span><span class="p">.</span><span class="n">get_frontal_face_detector</span><span class="p">()</span>
<span class="n">predictor</span> <span class="o">=</span> <span class="n">dlib</span><span class="p">.</span><span class="n">shape_predictor</span><span class="p">(</span><span class="s">"shape_predictor_68_face_landmarks.dat"</span><span class="p">)</span>

<span class="n">path</span> <span class="o">=</span><span class="s">"images"</span>
<span class="n">file_list</span><span class="o">=</span><span class="p">[]</span>
<span class="n">file_paths</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">isfile</span><span class="p">,[</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">os</span><span class="p">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">)])</span>
<span class="n">RGB_dict</span><span class="o">=</span><span class="p">{}</span>

<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">file_paths</span><span class="p">:</span>
	<span class="n">file_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span> <span class="n">f</span> <span class="p">)</span>
	<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">IMREAD_UNCHANGED</span><span class="p">)</span>
	<span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="n">shape</span>
	<span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="o">=</span><span class="n">h</span><span class="o">//</span><span class="mi">2</span><span class="p">,</span><span class="n">w</span><span class="o">//</span><span class="mi">2</span>
	<span class="n">b</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">r</span>    <span class="o">=</span> <span class="n">img</span><span class="p">[</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">img</span><span class="p">[</span><span class="n">h</span><span class="p">,</span><span class="n">w</span> <span class="p">,</span> <span class="mi">1</span><span class="p">],</span><span class="n">img</span><span class="p">[</span><span class="n">h</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
	<span class="n">base_name</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">basename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
	<span class="n">base_name</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">base_name</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
	<span class="n">RGB_dict</span><span class="p">[</span><span class="n">base_name</span><span class="p">]</span>  <span class="o">=</span>  <span class="p">[</span><span class="n">r</span><span class="p">,</span><span class="n">g</span><span class="p">,</span><span class="n">b</span><span class="p">]</span>

<span class="k">class</span> <span class="nc">Ui_MainWindow</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="k">def</span> <span class="nf">setupUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">)</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="mi">498</span><span class="p">,</span> <span class="mi">522</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QWidget</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"centralwidget"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"horizontalLayout"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">""</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="p">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="s">"images/H.png"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"label"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QGridLayout</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"gridLayout"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSlider</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider</span><span class="p">.</span><span class="n">setOrientation</span><span class="p">(</span><span class="n">QtCore</span><span class="p">.</span><span class="n">Qt</span><span class="p">.</span><span class="n">Vertical</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"verticalSlider"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSlider</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider_2</span><span class="p">.</span><span class="n">setOrientation</span><span class="p">(</span><span class="n">QtCore</span><span class="p">.</span><span class="n">Qt</span><span class="p">.</span><span class="n">Vertical</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"verticalSlider_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider_2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">QtCore</span><span class="p">.</span><span class="n">Qt</span><span class="p">.</span><span class="n">AlignCenter</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"label_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QLabel</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setAlignment</span><span class="p">(</span><span class="n">QtCore</span><span class="p">.</span><span class="n">Qt</span><span class="p">.</span><span class="n">AlignCenter</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"label_3"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout</span><span class="p">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">gridLayout</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span><span class="p">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QHBoxLayout</span><span class="p">()</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"horizontalLayout_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"pushButton"</span><span class="p">)</span>

		
		<span class="bp">self</span><span class="p">.</span><span class="n">comboBox</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QComboBox</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">comboBox</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"comboBox"</span><span class="p">)</span>
		
		<span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">RGB_dict</span><span class="p">.</span><span class="n">items</span><span class="p">():</span>
			<span class="n">icon</span> <span class="o">=</span> <span class="n">QtGui</span><span class="p">.</span><span class="n">QIcon</span><span class="p">()</span>
			<span class="n">icon</span><span class="p">.</span><span class="n">addPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="p">.</span><span class="n">QPixmap</span><span class="p">(</span><span class="sa">f</span><span class="s">'images/</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s">.png'</span><span class="p">),</span> <span class="n">QtGui</span><span class="p">.</span><span class="n">QIcon</span><span class="p">.</span><span class="n">Normal</span><span class="p">,</span> <span class="n">QtGui</span><span class="p">.</span><span class="n">QIcon</span><span class="p">.</span><span class="n">On</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">comboBox</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">icon</span><span class="p">,</span><span class="n">k</span><span class="p">)</span>
		
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout_2</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">comboBox</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout_2</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"pushButton_2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QPushButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"pushButton_3"</span><span class="p">)</span>

		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QRadioButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"radioButton"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QRadioButton</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"radioButton2"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"Image/Video"</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">"Web Camera"</span><span class="p">)</span>

		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout_2</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout_2</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout_2</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout_2</span><span class="p">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span><span class="p">)</span>
		
		
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span><span class="p">.</span><span class="n">addLayout</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">horizontalLayout_2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">spacerItem</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSpacerItem</span><span class="p">(</span><span class="mi">313</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Expanding</span><span class="p">,</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QSizePolicy</span><span class="p">.</span><span class="n">Minimum</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">gridLayout_2</span><span class="p">.</span><span class="n">addItem</span><span class="p">(</span><span class="n">spacerItem</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">centralwidget</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">statusbar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QStatusBar</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">statusbar</span><span class="p">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s">"statusbar"</span><span class="p">)</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setStatusBar</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">statusbar</span><span class="p">)</span>



		<span class="bp">self</span><span class="p">.</span><span class="n">comboBox</span><span class="p">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> 
		<span class="bp">self</span><span class="p">.</span><span class="n">comboBox</span><span class="p">.</span><span class="n">currentIndexChanged</span><span class="p">[</span><span class="nb">str</span><span class="p">].</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">lipStick_value</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">comboBox</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span><span class="p">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">retranslateUi</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider</span><span class="p">.</span><span class="n">valueChanged</span><span class="p">[</span><span class="s">'int'</span><span class="p">].</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">brightness_value</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">verticalSlider_2</span><span class="p">.</span><span class="n">valueChanged</span><span class="p">[</span><span class="s">'int'</span><span class="p">].</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">blur_value</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">load</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">colorPicker</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">savePhoto</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">imageMode</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span><span class="p">.</span><span class="n">clicked</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">videoMode</span><span class="p">)</span>
		<span class="n">QtCore</span><span class="p">.</span><span class="n">QMetaObject</span><span class="p">.</span><span class="n">connectSlotsByName</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
		
		<span class="c1"># Added code here
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">filename</span> <span class="o">=</span> <span class="s">'Snapshot '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%Y-%b-%d at %H.%M.%S %p"</span><span class="p">))</span><span class="o">+</span><span class="s">'.png'</span> <span class="c1"># Will hold the image address location
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="bp">None</span> <span class="c1"># Will hold the temporary image for display
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">brightness_value_now</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Updated brightness value
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">blur_value_now</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># Updated blur value
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">fps</span><span class="o">=</span><span class="mi">0</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">started</span> <span class="o">=</span> <span class="bp">False</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span><span class="o">=</span><span class="p">[</span><span class="mi">227</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="mi">54</span><span class="p">]</span> <span class="c1"># 227,38,54
</span>		<span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">=</span><span class="s">'cam'</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">color_selected_text</span><span class="o">=</span> <span class="s">'Default'</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">readBefore</span> <span class="o">=</span> <span class="bp">False</span>
	
	<span class="k">def</span> <span class="nf">colorPicker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" Open up the color picker dialog"""</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">openColorDialog</span><span class="p">()</span>
	
	<span class="k">def</span> <span class="nf">openColorDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">"""  This function will open the color dialog and let user choose either from it or from anywhere in the 
			screen
		"""</span>

		<span class="n">color</span> <span class="o">=</span> <span class="n">QColorDialog</span><span class="p">.</span><span class="n">getColor</span><span class="p">()</span>
		<span class="k">if</span> <span class="n">color</span><span class="p">.</span><span class="n">isValid</span><span class="p">():</span>
			<span class="k">print</span><span class="p">(</span><span class="n">color</span><span class="p">.</span><span class="n">getRgb</span><span class="p">())</span>
			<span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">_</span><span class="p">)</span><span class="o">=</span><span class="n">color</span><span class="p">.</span><span class="n">getRgb</span><span class="p">()</span>
			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span> <span class="o">=</span> <span class="p">[</span><span class="n">R</span><span class="p">,</span><span class="n">G</span><span class="p">,</span><span class="n">B</span><span class="p">]</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">color_selected_text</span> <span class="o">=</span> <span class="s">'COLOR PICKED'</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>
			<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
				<span class="k">pass</span>
	
	<span class="k">def</span> <span class="nf">imageMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function willl select the image mode"""</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">=</span><span class="s">'image'</span>
		<span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">videoMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function willl select the video mode"""</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">=</span><span class="s">'cam'</span>
		<span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="p">)</span>
	
	

	<span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function will load the camera device, image file or video file, obtain the image
			and set it to label using the setPhoto function
		"""</span>
		<span class="n">video_file_ext</span> <span class="o">=</span> <span class="p">[</span><span class="s">'.MP4'</span><span class="p">,</span><span class="s">'.AVI'</span><span class="p">]</span>
		<span class="n">image_file_ext</span> <span class="o">=</span> <span class="p">[</span><span class="s">'.PNG'</span><span class="p">,</span><span class="s">'.JPG'</span><span class="p">,</span><span class="s">'.JPEG'</span><span class="p">,</span><span class="s">'.BMP'</span><span class="p">,</span><span class="s">'.TIFF'</span><span class="p">]</span>
		
		<span class="n">ext</span><span class="o">=</span><span class="bp">None</span>
		<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
			<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">==</span><span class="s">'image'</span><span class="p">:</span>		
				<span class="bp">self</span><span class="p">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="p">.</span><span class="n">getOpenFileName</span><span class="p">(</span><span class="nb">filter</span><span class="o">=</span><span class="s">"Image or Video(mp4) (*.*)"</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
				<span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">splitext</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="n">upper</span><span class="p">()</span>
		
		
		<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="p">:</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">=</span><span class="bp">False</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">'Start'</span><span class="p">)</span>	
		<span class="k">else</span><span class="p">:</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">=</span><span class="bp">True</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">'Stop'</span><span class="p">)</span>
		
		
		<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">mode</span><span class="o">==</span><span class="s">'cam'</span><span class="p">:</span>
			<span class="n">vid</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
		<span class="k">else</span><span class="p">:</span>
			<span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">video_file_ext</span><span class="p">:</span>
				<span class="n">vid</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">filename</span><span class="p">)</span>
			
		
		<span class="n">cnt</span><span class="o">=</span><span class="mi">0</span>
		<span class="n">frames_to_count</span><span class="o">=</span><span class="mi">20</span>
		<span class="n">st</span> <span class="o">=</span> <span class="mi">0</span>
		<span class="n">fps</span><span class="o">=</span><span class="mi">0</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">comboBox</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">False</span><span class="p">)</span>
		<span class="k">while</span><span class="p">(</span><span class="bp">True</span><span class="p">):</span>
			<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">mode</span> <span class="o">==</span> <span class="s">'cam'</span><span class="p">:</span>
				<span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">vid</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
			<span class="k">else</span><span class="p">:</span>
				<span class="k">if</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">video_file_ext</span><span class="p">:</span>
					<span class="k">try</span><span class="p">:</span>
						<span class="n">_</span><span class="p">,</span> <span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">vid</span><span class="p">.</span><span class="n">read</span><span class="p">()</span>
						<span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
					<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
						<span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
						<span class="k">pass</span>
				<span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="n">image_file_ext</span><span class="p">:</span>
					<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">readBefore</span> <span class="o">==</span> <span class="bp">False</span><span class="p">:</span>
						<span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">imread</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">filename</span><span class="p">,</span><span class="n">cv2</span><span class="p">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
						<span class="bp">self</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
						<span class="bp">self</span><span class="p">.</span><span class="n">readBefore</span>	<span class="o">=</span> <span class="bp">True</span>

			<span class="k">try</span><span class="p">:</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>
			<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
				<span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">=</span><span class="bp">False</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="s">'Start'</span><span class="p">)</span>
				
			
			<span class="n">key</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span>
			<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.01</span><span class="p">)</span>
		
			<span class="k">if</span> <span class="bp">self</span><span class="p">.</span><span class="n">started</span><span class="o">==</span><span class="bp">False</span><span class="p">:</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">radioButton</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">radioButton2</span><span class="p">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
				<span class="bp">self</span><span class="p">.</span><span class="n">readBefore</span>	<span class="o">=</span> <span class="bp">False</span>
				<span class="k">break</span>
				<span class="k">print</span><span class="p">(</span><span class="s">'Loop break'</span><span class="p">)</span>
			<span class="c1">#QtWidgets.QApplication.processEvents()	
</span>
	<span class="k">def</span> <span class="nf">setPhoto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">image</span><span class="p">):</span>
		<span class="s">""" This function will take image input and resize it 
			only for display purpose and convert it to QImage
			to set at the label.
		"""</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">tmp</span> <span class="o">=</span> <span class="n">image</span>
		<span class="n">image</span> <span class="o">=</span> <span class="n">imutils</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">480</span><span class="p">)</span>
		<span class="n">text</span>  <span class="o">=</span>  <span class="bp">self</span><span class="p">.</span><span class="n">color_selected_text</span>
		<span class="n">rgb</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span>
		<span class="n">image</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="n">rgb</span><span class="p">,</span><span class="n">text_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
	
		<span class="n">frame</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2RGB</span><span class="p">)</span>
		<span class="n">image</span> <span class="o">=</span> <span class="n">QImage</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">frame</span><span class="p">.</span><span class="n">strides</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">QImage</span><span class="p">.</span><span class="n">Format_RGB888</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label</span><span class="p">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="n">QtGui</span><span class="p">.</span><span class="n">QPixmap</span><span class="p">.</span><span class="n">fromImage</span><span class="p">(</span><span class="n">image</span><span class="p">))</span>

	<span class="k">def</span> <span class="nf">brightness_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
		<span class="s">""" This function will take value from the slider
			for the brightness from 0 to 99
		"""</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">brightness_value_now</span> <span class="o">=</span> <span class="n">value</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>
		<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
			<span class="k">pass</span>
		
		
	<span class="k">def</span> <span class="nf">blur_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
		<span class="s">""" This function will take value from the slider 
			for the blur from 0 to 99 """</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">blur_value_now</span> <span class="o">=</span> <span class="n">value</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>
		<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
			<span class="k">pass</span>
	
	<span class="k">def</span> <span class="nf">lipStick_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
		<span class="s">"""  This function will take the RGB color selected from dropdown list
			then update
		"""</span>
		<span class="k">try</span><span class="p">:</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span> <span class="o">=</span> <span class="n">RGB_dict</span><span class="p">[</span><span class="n">value</span><span class="p">]</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">color_selected_text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
			<span class="bp">self</span><span class="p">.</span><span class="n">update</span><span class="p">()</span>
		<span class="k">except</span> <span class="nb">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
			<span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
			<span class="k">pass</span>


	
	<span class="k">def</span> <span class="nf">changeLipstick</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">img</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
		<span class="s">""" This funciton will take img image and lipstick color RGB
			Out the image with a changed lip color of the image
		"""</span> 

		<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">img</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="bp">None</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
		<span class="n">imgOriginal</span> <span class="o">=</span> <span class="n">img</span><span class="p">.</span><span class="n">copy</span><span class="p">()</span>
		<span class="n">imgColorLips</span><span class="o">=</span><span class="n">imgOriginal</span>
		<span class="n">imgGray</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">cv2</span><span class="p">.</span><span class="n">COLOR_BGR2GRAY</span><span class="p">)</span>
		<span class="n">faces</span> <span class="o">=</span> <span class="n">detector</span><span class="p">(</span><span class="n">imgGray</span><span class="p">)</span>

		<span class="k">for</span> <span class="n">face</span> <span class="ow">in</span> <span class="n">faces</span><span class="p">:</span>
			<span class="n">x1</span><span class="p">,</span><span class="n">y1</span> <span class="o">=</span> <span class="n">face</span><span class="p">.</span><span class="n">left</span><span class="p">(),</span><span class="n">face</span><span class="p">.</span><span class="n">top</span><span class="p">()</span>
			<span class="n">x2</span><span class="p">,</span><span class="n">y2</span> <span class="o">=</span> <span class="n">face</span><span class="p">.</span><span class="n">right</span><span class="p">(),</span><span class="n">face</span><span class="p">.</span><span class="n">bottom</span><span class="p">()</span>
		   
			<span class="n">facial_landmarks</span> <span class="o">=</span> <span class="n">predictor</span><span class="p">(</span><span class="n">imgGray</span><span class="p">,</span><span class="n">face</span><span class="p">)</span>
			<span class="n">points</span> <span class="o">=</span><span class="p">[]</span>
			<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">68</span><span class="p">):</span>
				<span class="n">x</span> <span class="o">=</span> <span class="n">facial_landmarks</span><span class="p">.</span><span class="n">part</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">x</span>
				<span class="n">y</span> <span class="o">=</span> <span class="n">facial_landmarks</span><span class="p">.</span><span class="n">part</span><span class="p">(</span><span class="n">i</span><span class="p">).</span><span class="n">y</span>
				<span class="n">points</span><span class="p">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">])</span>


			<span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">array</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
			<span class="n">imgLips</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">getMaskOfLips</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">points</span><span class="p">[</span><span class="mi">48</span><span class="p">:</span><span class="mi">61</span><span class="p">])</span>
			
			<span class="n">imgColorLips</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">imgLips</span><span class="p">)</span>
			
			<span class="n">imgColorLips</span><span class="p">[:]</span> <span class="o">=</span><span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
			<span class="n">imgColorLips</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">bitwise_and</span><span class="p">(</span><span class="n">imgLips</span><span class="p">,</span><span class="n">imgColorLips</span><span class="p">)</span>
			
			<span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">blur_value_now</span>
			<span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="o">//</span><span class="mi">10</span>
			<span class="k">if</span> <span class="n">value</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
				<span class="n">value</span><span class="o">+=</span><span class="mi">1</span>
			<span class="n">kernel_size</span> <span class="o">=</span> <span class="p">(</span><span class="mi">6</span><span class="o">+</span><span class="n">value</span><span class="p">,</span><span class="mi">6</span><span class="o">+</span><span class="n">value</span><span class="p">)</span> <span class="c1"># +1 is to avoid 0
</span>			
			<span class="n">weight</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">brightness_value_now</span>
			<span class="n">weight</span> <span class="o">=</span> <span class="mf">0.4</span> <span class="o">+</span> <span class="p">(</span><span class="n">weight</span><span class="p">)</span><span class="o">/</span><span class="mi">400</span>
			<span class="n">imgColorLips</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">imgColorLips</span><span class="p">,</span><span class="n">kernel_size</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
			<span class="n">imgColorLips</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">addWeighted</span><span class="p">(</span><span class="n">imgOriginal</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">imgColorLips</span><span class="p">,</span><span class="n">weight</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
			
			

	
			
		<span class="k">return</span> <span class="n">imgColorLips</span>

	<span class="k">def</span> <span class="nf">getMaskOfLips</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">img</span><span class="p">,</span><span class="n">points</span><span class="p">):</span>
		<span class="s">""" This function will input the lips points and the image
			It will return the mask of lips region containing white pixels
		"""</span>
		<span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
		<span class="n">mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="p">.</span><span class="n">fillPoly</span><span class="p">(</span><span class="n">mask</span><span class="p">,[</span><span class="n">points</span><span class="p">],(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
		<span class="k">return</span> <span class="n">mask</span>	

	<span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function will update the photo according to the 
			current values of lipstick color, blur , brightness and set it to photo label.
		"""</span>
		<span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">changeLipstick</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="n">image</span><span class="p">,</span><span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span><span class="p">)</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">setPhoto</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

	<span class="k">def</span> <span class="nf">savePhoto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="s">""" This function will save the image"""</span>
		<span class="n">rgb</span><span class="o">=</span><span class="bp">self</span><span class="p">.</span><span class="n">lipstick_RGB</span>
		<span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="p">.</span><span class="n">tmp</span>
		<span class="n">text</span>  <span class="o">=</span>  <span class="bp">self</span><span class="p">.</span><span class="n">color_selected_text</span>
		<span class="n">image</span> <span class="o">=</span> <span class="n">ps</span><span class="p">.</span><span class="n">putBText</span><span class="p">(</span><span class="n">image</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">text_offset_x</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">text_offset_y</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span><span class="n">background_RGB</span><span class="o">=</span><span class="n">rgb</span><span class="p">,</span><span class="n">text_RGB</span><span class="o">=</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">))</span>
		<span class="n">filename</span> <span class="o">=</span> <span class="s">'Snapshot '</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">time</span><span class="p">.</span><span class="n">strftime</span><span class="p">(</span><span class="s">"%Y-%b-%d at %H.%M.%S %p"</span><span class="p">))</span><span class="o">+</span><span class="s">'.png'</span>
		<span class="n">cv2</span><span class="p">.</span><span class="n">imwrite</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span><span class="n">image</span><span class="p">)</span>
		<span class="k">print</span><span class="p">(</span><span class="s">'Image saved as:'</span><span class="p">,</span><span class="n">filename</span><span class="p">)</span>


	<span class="k">def</span> <span class="nf">retranslateUi</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">MainWindow</span><span class="p">):</span>
		<span class="n">_translate</span> <span class="o">=</span> <span class="n">QtCore</span><span class="p">.</span><span class="n">QCoreApplication</span><span class="p">.</span><span class="n">translate</span>
		<span class="n">MainWindow</span><span class="p">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"PyShine video process"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Start"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_2</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Brightness"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">label_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Blur"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Take picture"</span><span class="p">))</span>
		<span class="bp">self</span><span class="p">.</span><span class="n">pushButton_3</span><span class="p">.</span><span class="n">setText</span><span class="p">(</span><span class="n">_translate</span><span class="p">(</span><span class="s">"MainWindow"</span><span class="p">,</span> <span class="s">"Color"</span><span class="p">))</span>

<span class="c1"># Subscribe to PyShine Youtube channel for more detail! 
</span>
<span class="c1"># WEBSITE: www.pyshine.com
</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
	<span class="kn">import</span> <span class="nn">sys</span>
	<span class="n">app</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span>
	<span class="n">MainWindow</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="p">.</span><span class="n">QMainWindow</span><span class="p">()</span>
	<span class="n">ui</span> <span class="o">=</span> <span class="n">Ui_MainWindow</span><span class="p">()</span>
	<span class="n">ui</span><span class="p">.</span><span class="n">setupUi</span><span class="p">(</span><span class="n">MainWindow</span><span class="p">)</span>
	<span class="n">MainWindow</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
	<span class="n">sys</span><span class="p">.</span><span class="nb">exit</span><span class="p">(</span><span class="n">app</span><span class="p">.</span><span class="n">exec_</span><span class="p">())</span>


</code></pre></div></div>

<p>Thats all for today. In the next tutorial we will make Rock Paper Scissors Application in PyQt5 using Keras library. Have a nice day!</p>



          <!-- Inline code styling -->
          <link href="/assets/css/syntax.css" rel="stylesheet">
          <script src="/assets/scripts/copyCode.js" async></script>

          <!-- Google Ad (responsive rectangle after content) -->
          <section aria-label="Advertisements" class="ads mt-4">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-2976211678184829"
                 data-ad-slot="7658460605"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
              (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
          </section>

        </article>

        <!-- Post Navigation -->
        <nav class="post-navigation controls__inner mt-5" aria-label="Post navigation">
          <div class="controls__item prev">
            
              <span>Previous</span>
              <a href="/Sending-Live-Audio-From-Client-To-Server-over-wifi/" rel="prev">
                How to send audio from a client compu...
              </a>
            
          </div>

          <div class="controls__item next">
            
              <span>Next</span>
              <a href="/Play-Rock-Paper-Scissors-Game-using-PyQt5-GUI/" rel="next">
                Play Rock Paper Scissors Game using P...
              </a>
            
          </div>
        </nav>

        <!-- Comments Section -->
        
          <section class="comments mt-5" aria-label="Comments Section">
            
<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = 'https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/';
this.page.identifier = 'https://www.pyshine.com/How-to-make-a-lipstick-tryon-app-in-PyQt5/';
};

(function() {
var d = document, s = d.createElement('script');
s.src = 'https://https-py2ai-github-io.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the comments.</noscript>


          </section>
        

      </div>
    </main>

    <footer class="footer">
  <div class="container">
    <nav class="social">
      
      
      
    </nav>
    <span>&copy; 2025 PyShine. All rights reserved.</span>
  </div>
</footer>
<script async src="/assets/js/bundle.js"></script>

<script async>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js').then(function( registration ) {
      console.log('ServiceWorker registration successful with scope: ', registration.scope);
    })
    .catch(function(error) {
      console.log('ServiceWorker registration failed: ', error);
    });
  }
</script>



    <!-- Scripts at bottom for performance -->
    
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"
>
</script>
<script
  type="text/javascript"
  charset="utf-8"
  src="https://vincenttam.github.io/javascripts/MathJaxLocal.js"
>
</script>



    <!-- Async Ads script globally -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  </body>
</html>


