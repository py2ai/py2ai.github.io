<header class="header" itemscope itemtype="http://schema.org/SiteNavigationElement" aria-label="Main navigation">
  <div class="container">
    <div class="header__inner">

      <!-- Logo -->
      <a class="header__logo" href="{{ '/' | relative_url }}">
        <div class="header__logo--container">
          {% include logo.svg %}
        </div>
      </a>

      <!-- Navigation -->
      <nav class="header__links">
        <div class="container header__links-wrapper">

          {% for item in site.navigation %}
            {% if item.children %}

            <!-- DROPDOWN -->
            <div class="header__dropdown">
              <button class="header__link header__dropdown-toggle" type="button">
                <span>{{ item.name }}</span>
                <span class="dropdown-arrow">â–¾</span>
              </button>

              <div class="header__dropdown-menu">
                {% for child in item.children %}
                <a class="header__dropdown-item"
                   href="{{ child.link | relative_url }}">
                  {{ child.name }}
                </a>
                {% endfor %}
              </div>
            </div>

            {% else %}
              <a class="header__link" href="{{ item.link | relative_url }}">
                {{ item.name }}
              </a>
            {% endif %}
          {% endfor %}

        </div>
      </nav>

      <!-- Language Switcher -->
      {% if page.lang %}
      <div class="header__lang-switcher">
        {% assign langs = "en:ðŸ‡ºðŸ‡¸,zh:ðŸ‡¨ðŸ‡³,ko:ðŸ‡°ðŸ‡·" | split: "," %}
        {% for l in langs %}
          {% assign p = l | split: ":" %}
          {% assign code = p[0] %}
          {% assign emoji = p[1] %}
          {% assign url = page[code | append: "_url"] %}
          {% if page.lang == code %}
            <span class="lang-flag active">{{ emoji }}</span>
          {% elsif url %}
            <a class="lang-flag" href="{{ url | relative_url }}">{{ emoji }}</a>
          {% endif %}
        {% endfor %}
      </div>
      {% endif %}

      <!-- Mobile Toggle -->
      <div class="header__toggle">
        <span></span><span></span><span></span>
      </div>

    </div>
  </div>

<style>
/* ================================
   BASE NAV
================================ */
.header__links-wrapper{
  display:flex;
  align-items:center;
  gap:1.5rem;
}

.header__link{
  background:none;
  border:none;
  color:inherit;
  font:inherit;
  cursor:pointer;
  display:inline-flex;
  align-items:center;
  gap:6px;
}

/* ================================
   DROPDOWN (DESKTOP)
================================ */
.header__dropdown{
  position:relative;
}

.header__dropdown-toggle{
  padding:0;
}

.dropdown-arrow{
  font-size:.7em;
  transition:transform .2s ease;
}

.header__dropdown:hover .dropdown-arrow{
  transform:rotate(180deg);
}

.header__dropdown-menu{
  position:absolute;
  top:100%;
  left:0;
  min-width:220px;
  background:#121212;
  border:1px solid #333;
  border-radius:10px;
  padding:6px 0;
  display:none;
  z-index:9999;
}

.header__dropdown:hover .header__dropdown-menu{
  display:block;
}

.header__dropdown-item{
  display:block;
  padding:10px 16px;
  font-size:14px;
  color:#eaeaea;
  text-decoration:none;
}

.header__dropdown-item:hover{
  background:#1f1f1f;
}

/* ================================
   MOBILE PROFESSIONAL MODE
================================ */
@media (max-width:768px){

  .header__links-wrapper{
    flex-direction:column;
    align-items:stretch;
    gap:.25rem;
  }

  .header__link{
    width:100%;
    justify-content:space-between;
    padding:14px 16px;
    border-radius:10px;
  }

  .header__dropdown{
    width:100%;
  }

  .header__dropdown-toggle{
    width:100%;
    background:#141414;
  }

  /* mobile dropdown container */
  .header__dropdown-menu{
    position:static;
    display:none;
    border:none;
    background:#0f0f0f;
    border-radius:12px;
    margin:6px 0 10px;
    padding:6px;
  }

  /* show dropdown when parent hovered OR focused */
  .header__dropdown:hover .header__dropdown-menu,
  .header__dropdown:focus-within .header__dropdown-menu{
    display:block;
  }

  .header__dropdown-item{
    padding:12px 14px;
    border-radius:8px;
    margin-bottom:4px;
    background:#1a1a1a;
  }

  .header__dropdown-item:hover{
    background:#222;
  }

  .header__dropdown:hover .dropdown-arrow{
    transform:rotate(180deg);
  }
}

/* ================================
   LANGUAGE SWITCHER
================================ */
.header__lang-switcher{
  display:inline-flex;
  gap:.5rem;
  align-items:center;
  font-size:1.3rem;
}
.lang-flag.active{ text-decoration:underline }
</style>

</header>
