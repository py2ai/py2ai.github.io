<header class="header"
  itemscope
  itemtype="http://schema.org/SiteNavigationElement"
  aria-label="Main navigation">

  <div class="container">
    <div class="header__inner">

      <!-- Logo -->
      <a class="header__logo" href="{{ '/' | relative_url }}">
        <div class="header__logo--container">
          {% include logo.svg %}
        </div>
      </a>

      <!-- Navigation -->
      <nav class="header__links">
        <div class="header__links-wrapper">

          {% for item in site.navigation %}
            {% if item.children %}

            <!-- Applications Dropdown -->
            <div class="header__dropdown">
              <span class="header__link header__dropdown-toggle">
                {{ item.name }}
                <span class="dropdown-arrow">â–¾</span>
              </span>

              <div class="header__dropdown-menu">
                {% for child in item.children %}
                  <a class="header__dropdown-item"
                     href="{{ child.link | relative_url }}">
                    {{ child.name }}
                  </a>
                {% endfor %}
              </div>
            </div>

            {% else %}
              <a class="header__link" href="{{ item.link | relative_url }}">
                {{ item.name }}
              </a>
            {% endif %}
          {% endfor %}

        </div>
      </nav>

      <!-- Language Switcher -->
      {% if page.lang %}
      <div class="header__lang-switcher">
        {% assign langs = "en:ðŸ‡ºðŸ‡¸:English,zh:ðŸ‡¨ðŸ‡³:ä¸­æ–‡,ko:ðŸ‡°ðŸ‡·:í•œêµ­ì–´" | split: "," %}
        {% for l in langs %}
          {% assign p = l | split: ":" %}
          {% assign code = p[0] %}
          {% assign emoji = p[1] %}
          {% assign url = page[code | append: "_url"] %}
          {% if page.lang == code %}
            <span class="lang-flag active">{{ emoji }}</span>
          {% elsif url and url != "_url" %}
            <a class="lang-flag" href="{{ url | relative_url }}">{{ emoji }}</a>
          {% else %}
            <span class="lang-flag disabled">{{ emoji }}</span>
          {% endif %}
        {% endfor %}
      </div>
      {% endif %}

      <!-- Mobile Toggle -->
      <div class="header__toggle">
        <span></span><span></span><span></span>
      </div>

    </div>
  </div>

<style>
/* ==================================================
   ðŸ”’ HEADER â€” ALWAYS VISIBLE, FULL WIDTH COLOR
================================================== */
.header{
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;           /* full width */
  z-index: 10000;
  background: #FFFFFF;    /* uniform header background */
  box-shadow: 0 2px 12px rgba(0,0,0,.35);
  transform: none !important;
  transition: none !important;
}

/* Lock height to avoid reflow */
.header__inner{
  min-height: 72px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* Prevent content hiding under fixed header */
body{
  padding-top: 72px;
}

/* ===============================
   NAV BASE
=============================== */
.header__links-wrapper{
  display:flex;
  align-items:center;
  gap:1.5rem;
}

.header__link,
.header__dropdown-toggle{
  display:inline-flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
  font-size:20px;
  font-weight:500;
}

/* ===============================
   DROPDOWN
=============================== */
.header__dropdown{
  position:relative;
}

.dropdown-arrow{
  font-size:1.4em;
  transition:transform .2s ease;
}

.header__dropdown:hover .dropdown-arrow{
  transform:rotate(180deg);
}

.header__dropdown-menu{
  position:absolute;
  top:100%;
  left:0;
  min-width:220px;
  background:#121212;
  border:1px solid #333;
  border-radius:10px;
  padding:6px 0;
  display:none;
  z-index:9999;
}

.header__dropdown:hover .header__dropdown-menu{
  display:block;
}

.header__dropdown-item{
  display:block;
  padding:10px 16px;
  color:#eaeaea;
  text-decoration:none;
}

.header__dropdown-item:hover{
  background:#1f1f1f;
}

/* ===============================
   MOBILE
=============================== */
@media (max-width:768px){

  body{
    padding-top: 64px;
  }

  .header__inner{
    min-height: 64px;
  }

  .header__links-wrapper{
    flex-direction:column;
    align-items:stretch;
    gap:0;
  }

  .header__dropdown-toggle{
    justify-content:space-between;
    padding:14px 16px;
  }

  .header__dropdown-menu{
    position:static;
    display:none;
    background:#0f0f0f;
    border:none;
  }

  .header__dropdown:hover .header__dropdown-menu{
    display:block;
  }

  .header__dropdown-item{
    padding:14px 20px;
    background:#1a1a1a;
    border-top:1px solid #2a2a2a;
    font-size:15px;
  }
}

/* ===============================
   LANGUAGE SWITCHER
=============================== */
.header__lang-switcher{
  display:inline-flex;
  gap:.5rem;
  align-items:center;
  font-size:1.3rem;
  margin-left:1rem;
}
.lang-flag.active{ text-decoration:underline }
.lang-flag.disabled{ opacity:.5; filter:grayscale(100%) }

</style>
</header>
