<header class="header" itemscope itemtype="http://schema.org/SiteNavigationElement" aria-label="Main navigation">
  <div class="container">
    <div class="header__inner">

      <!-- Logo -->
      <a class="header__logo" href="{{ '/' | relative_url }}">
        <div class="header__logo--container">
          {% include logo.svg %}
        </div>
      </a>

      <!-- Navigation Links -->
      <nav class="header__links">
        <div class="container header__links-wrapper">

          {% for item in site.navigation %}
            {% if item.children %}

              <!-- DROPDOWN -->
              <div class="header__dropdown" itemprop="url">
                <a class="header__link header__dropdown-toggle" href="javascript:void(0)">
                  <span itemprop="name">{{ item.name }}</span>
                </a>

                <div class="header__dropdown-menu">
                  {% for child in item.children %}
                    <a class="header__dropdown-item"
                       href="{{ child.link | relative_url }}"
                       itemprop="url">
                      <span itemprop="name">{{ child.name }}</span>
                    </a>
                  {% endfor %}
                </div>
              </div>

            {% else %}
              <a class="header__link"
                 href="{{ item.link | relative_url }}"
                 itemprop="url">
                <span itemprop="name">{{ item.name }}</span>
              </a>
            {% endif %}
          {% endfor %}

        </div>
      </nav>

      <!-- Language Switcher -->
      {% if page.lang %}
        <div class="header__lang-switcher">
          {% assign langs = "en:ðŸ‡ºðŸ‡¸:English,zh:ðŸ‡¨ðŸ‡³:ä¸­æ–‡,ko:ðŸ‡°ðŸ‡·:í•œêµ­ì–´" | split: "," %}
          {% for lang_item in langs %}
            {% assign parts = lang_item | split: ":" %}
            {% assign code = parts[0] %}
            {% assign emoji = parts[1] %}
            {% assign label = parts[2] %}
            {% assign url_field = code | append: "_url" %}
            {% assign lang_url = page[url_field] %}
            {% if page.lang == code %}
              <span class="lang-flag active">{{ emoji }}</span>
            {% elsif lang_url %}
              <a class="lang-flag" href="{{ lang_url | relative_url }}">{{ emoji }}</a>
            {% else %}
              <span class="lang-flag disabled">{{ emoji }}</span>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

      <!-- Mobile Menu Toggle -->
      <div class="header__toggle">
        <span></span><span></span><span></span>
      </div>

    </div>
  </div>

<style>
/* ===============================
   BASE NAV ALIGNMENT
=============================== */
.header__links-wrapper{
  display:flex;
  align-items:center;
  gap:1.4rem;
}

/* ===============================
   DROPDOWN (STABLE)
=============================== */
.header__dropdown{
  position:relative;
  display:inline-flex;
  align-items:center;
}

/* invisible hover bridge */
.header__dropdown::after{
  content:"";
  position:absolute;
  top:100%;
  left:0;
  width:100%;
  height:12px;
}

/* Toggle */
.header__dropdown-toggle{
  display:inline-flex;
  align-items:center;
}

.header__dropdown-toggle::after{
  content:" â–¾";
  font-size:.7em;
  opacity:.8;
}

/* Menu */
.header__dropdown-menu{
  position:absolute;
  top:100%;
  left:0;
  min-width:220px;
  background:#121212;
  border:1px solid #333;
  border-radius:10px;
  padding:6px 0;
  display:none;
  z-index:9999;
}

/* SHOW when hovering parent OR menu */
.header__dropdown:hover .header__dropdown-menu,
.header__dropdown-menu:hover{
  display:block;
}

.header__dropdown-item{
  display:block;
  padding:10px 16px;
  font-size:14px;
  color:#eaeaea;
  text-decoration:none;
}

.header__dropdown-item:hover{
  background:#1f1f1f;
}

/* ===============================
   MOBILE
=============================== */
@media (max-width:768px){
  .header__dropdown-menu{
    position:static;
    border:none;
    background:transparent;
    padding-left:12px;
  }
}

/* ===============================
   LANGUAGE SWITCHER
=============================== */
.header__lang-switcher{
  display:inline-flex;
  gap:.5rem;
  align-items:center;
  font-size:1.3rem;
  margin-left:1rem;
}
.lang-flag.disabled{ opacity:.5; filter:grayscale(100%) }
.lang-flag.active{ text-decoration:underline }
</style>

</header>
